import{r as t,c as i,h as e,a as o}from"./index-DpmUT2Gr.js";import{t as s}from"./translations-6rJPElLH.js";function r(t,i){const e=t||i;return e&&{pdf:"pdf",jpg:"image",jpeg:"image",heic:"image",bmp:"image",png:"image",gif:"image",svg:"image",svgz:"image",ep:"image",eps:"image",avi:"video",flv:"video",h264:"video",mov:"video",mp4:"video",mwv:"video",mkv:"video",mp3:"audio",wav:"audio",wma:"audio",ogg:"audio",txt:"text",json:"text",html:"text",xml:"text",doc:"office",docx:"office",odt:"office",dot:"office",dotx:"office",docm:"office",dotm:"office",pot:"office",ppt:"office",pptx:"office",odp:"office",potx:"office",potm:"office",pps:"office",ppsx:"office",ppsm:"office",pptm:"office",ppam:"office",pages:"office",xls:"office",xlsx:"office",xlsm:"office",xlsb:"office",ods:"office",csv:"office",numbers:"office"}[e.split(".").pop().toLowerCase()]||"unknown"}class l{constructor(t){this.requestFullscreen=()=>{this.enter&&this.enter()},this.exitFullscreen=()=>{this.exit&&this.exit.bind(window.document)()},this.toggle=()=>{const t=window.document;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?this.exitFullscreen():this.requestFullscreen()},this.enter=t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen,this.enter=this.enter.bind(t);const i=window.document;this.exit=i.exitFullscreen||i.msExitFullscreen||i.mozCancelFullScreen||i.webkitExitFullscreen}isSupported(){return!!this.requestFullscreen}}const n=class{constructor(o){t(this,o),this.action=i(this,"action"),this.allowFullscreen=!1,this.allowOpenInNewTab=!1,this.allowDownload=!1,this.language="en",this.officeViewer="microsoft-office",this.isFullscreen=!1,this.loading=!0,this.fileUrl="",this.renderPdf=()=>[e("div",{class:"action-menu-for-pdf-files"},this.renderActionMenu()),e("iframe",{src:this.sanitizeUrl(this.fileUrl),loading:"lazy"})],this.renderImage=()=>[this.renderButtons(),e("img",{src:this.sanitizeUrl(this.fileUrl),alt:this.alt,loading:"lazy"})],this.renderVideo=()=>e("video",{controls:!0},e("source",{src:this.sanitizeUrl(this.fileUrl)})),this.renderAudio=()=>e("audio",{controls:!0},e("source",{src:this.sanitizeUrl(this.fileUrl)})),this.renderText=()=>{const t=[this.renderNoFileSupportMessage()];return[this.renderButtons(),e("object",{data:this.sanitizeUrl(this.fileUrl),type:"text/plain"},t)]},this.renderOffice=()=>[e("div",{class:"action-menu-for-office-files"},this.renderActionMenu()),e("iframe",{src:this.getOfficeViewerUrl()+encodeURIComponent(this.sanitizeUrl(this.fileUrl))+"&embedded=true",loading:"lazy"})],this.isOfficeFileAccessibleViaURL=()=>"office"===this.fileType&&!(this.fileUrl.startsWith("http://")||this.fileUrl.startsWith("https://")),this.getOfficeViewerUrl=()=>({"microsoft-office":"https://view.officeapps.live.com/op/embed.aspx?src=","google-drive":"https://docs.google.com/gview?url="}[this.officeViewer]),this.renderNoFileSupportMessage=()=>e("div",{class:"no-support",role:"alert"},e("h1",null,"⚠️"),e("p",null,this.getTranslation("file-viewer.message.unsupported-filetype")),e("p",{style:{textAlign:"center",margin:"0 auto"}},this.getTranslation("file-viewer.message.try-other-options")),this.renderDownloadButton()),this.renderButtons=()=>e("div",{class:"buttons"},this.renderActionMenu(),this.renderToggleFullscreenButton(),this.renderDownloadButton(),this.renderOpenInNewTabButton()),this.renderToggleFullscreenButton=()=>{if(!this.allowFullscreen||!this.fullscreen.isSupported())return;const t=this.isFullscreen?"multiply":"fit_to_width",i=this.getTranslation(this.isFullscreen?"file-viewer.exit-fullscreen":"file-viewer.open-in-fullscreen");return[e("button",{class:"button--toggle-fullscreen",id:"tooltip-toggle-fullscreen",role:"button",onClick:this.handleToggleFullscreen},e("limel-icon",{name:t}),e("limel-tooltip",{label:i,elementId:"tooltip-toggle-fullscreen",openDirection:"left"}))]},this.renderDownloadButton=()=>{var t;if(this.allowDownload&&!this.isFullscreen)return e("a",{class:"button--download",id:"tooltip-download",role:"button",download:null!==(t=this.filename)&&void 0!==t?t:"",href:this.sanitizeUrl(this.fileUrl),target:"_blank"},e("limel-icon",{name:"download_2"}),e("limel-tooltip",{label:this.getTranslation("file-viewer.download"),elementId:"tooltip-download",openDirection:"left"}))},this.renderOpenInNewTabButton=()=>{if(this.allowOpenInNewTab&&!this.isFullscreen)return e("a",{class:"button--new-tab",id:"tooltip-new-tab",role:"button",href:this.sanitizeUrl(this.fileUrl),target:"_blank",rel:"noopener noreferrer"},e("limel-icon",{name:"external_link"}),e("limel-tooltip",{label:this.getTranslation("file-viewer.open-in-new-tab"),elementId:"tooltip-new-tab",openDirection:"left"}))},this.renderActionMenu=()=>{if(this.actions&&!this.isFullscreen)return e("limel-menu",{class:"action-menu",items:this.actions,onSelect:this.emitOnAction,"open-direction":"left"},e("button",{class:"button--action",id:"tooltip-more",role:"button",slot:"trigger"},e("limel-icon",{name:"menu_2"}),e("limel-tooltip",{label:this.getTranslation("file-viewer.more-actions"),elementId:"tooltip-more",openDirection:"left"})))},this.createURL=async t=>{if(["pdf"].includes(t)){const t=await fetch(this.url),i=await t.blob();this.fileUrl=URL.createObjectURL(i)}else this.fileUrl=this.url;this.loading=!1},this.handleToggleFullscreen=()=>{this.fullscreen.isSupported()&&(this.fullscreen.toggle(),this.isFullscreen=!this.isFullscreen)},this.emitOnAction=t=>{t.stopPropagation(),this.action.emit(t.detail)},this.fullscreen=new l(this.HostElement)}async componentWillLoad(){this.fileType=r(this.filename,this.url),await this.createURL(this.fileType)}render(){return this.isOfficeFileAccessibleViaURL?this.loading?e("limel-spinner",{size:"x-small",limeBranded:!1}):this.renderFileViewer():this.renderNoFileSupportMessage()}async watchUrl(t,i){t!==i&&(this.loading=!0,this.fileType=r(this.filename,this.fileUrl),await this.createURL(this.fileType))}renderFileViewer(){return({pdf:this.renderPdf,image:this.renderImage,video:this.renderVideo,audio:this.renderAudio,text:this.renderText,office:this.renderOffice}[this.fileType]||this.renderNoFileSupportMessage)()}sanitizeUrl(t){try{const i=new URL(t,window.location.href);return["http:","https:","blob:"].includes(i.protocol)?i.href:""}catch(t){return""}}getTranslation(t){return s.get(t,this.language)}get HostElement(){return o(this)}static get watchers(){return{url:[{watchUrl:0}]}}};n.style='@charset "UTF-8";:host{isolation:isolate;position:relative;box-sizing:border-box;display:flex;align-items:center;justify-content:center;width:100%;height:100%}*{box-sizing:border-box}img,video,audio,object,iframe{max-height:100%;max-width:100%;box-sizing:border-box}iframe{border:none;width:100%;height:100%;min-height:20rem}img{min-width:7rem;object-fit:contain}video{width:100%;height:auto}audio{width:100%}object{width:100%;height:100%}object[type="application/pdf"]{min-height:20rem}object[type="text/plain"]{border-radius:0.25rem;padding-right:2rem;overflow-y:auto}:host(:fullscreen){background-color:rgb(var(--color-gray-darker))}:host(:fullscreen) object[type="text/plain"]{max-width:50rem;max-height:calc(100% - 2rem)}:host(:-webkit-full-screen){background-color:rgb(var(--color-gray-darker))}:host(:-webkit-full-screen) object[type="text/plain"]{max-width:50rem;max-height:calc(100% - 2rem)}.buttons{position:absolute;z-index:1;top:0.25rem;right:0.25rem;display:flex;flex-direction:column;gap:0.25rem}@media (pointer: coarse){.buttons{gap:0.5rem}}.no-support{display:flex;flex-direction:column;gap:0.5rem;align-items:center;border:1px dashed rgb(var(--contrast-600));border-radius:0.5rem;padding:1.25rem}.no-support h1,.no-support p{margin:0}[class^=button--]{all:unset;transition:color var(--limel-clickable-transition-speed, 0.4s) ease, background-color var(--limel-clickable-transition-speed, 0.4s) ease, box-shadow var(--limel-clickable-transform-speed, 0.4s) ease, transform var(--limel-clickable-transform-speed, 0.4s) var(--limel-clickable-transform-timing-function, ease);cursor:pointer;color:var(--limel-theme-on-surface-color);background-color:var(--lime-elevated-surface-background-color);box-shadow:var(--button-shadow-normal)}[class^=button--]:hover,[class^=button--]:focus,[class^=button--]:focus-visible{will-change:color, background-color, box-shadow, transform}[class^=button--]:hover,[class^=button--]:focus-visible{transform:translate3d(0, -0.04rem, 0);color:var(--limel-theme-on-surface-color);background-color:var(--lime-elevated-surface-background-color);box-shadow:var(--button-shadow-hovered)}[class^=button--]:active{--limel-clickable-transform-timing-function:cubic-bezier(       0.83,       -0.15,       0.49,       1.16   );transform:translate3d(0, 0.05rem, 0);box-shadow:var(--button-shadow-pressed)}[class^=button--]:hover,[class^=button--]:active{--limel-clickable-transition-speed:0.2s;--limel-clickable-transform-speed:0.16s}[class^=button--]:focus{outline:none}[class^=button--]:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}[class^=button--]{display:flex;align-items:center;justify-content:center;border-radius:50%;width:2rem;height:2rem;background-color:rgba(var(--contrast-100), 0.8);backdrop-filter:blur(0.25rem);-webkit-backdrop-filter:blur(0.25rem)}[class^=button--] limel-icon{transition:color 0.2s ease;width:1.25rem;color:rgb(var(--contrast-1200))}[class^=button--]:hover limel-icon{color:rgb(var(--contrast-1400))}.action-menu-for-pdf-files,.action-menu-for-office-files{position:absolute;right:0.75rem}.action-menu-for-pdf-files{bottom:0.75rem}.action-menu-for-office-files{top:0.75rem}';export{n as limel_file_viewer}