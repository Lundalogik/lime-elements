{"version":3,"names":["emailViewerCss","EmailViewer","render","h","class","part","this","renderHeaders","renderBody","renderEmailHeader","getTranslation","subject","from","to","cc","date","bodyHtml","innerHTML","bodyText","body","fallbackUrl","data","type","name","label","value","values","getHeaderValues","map","v","split","trim","filter","Boolean","key","translate","get","language"],"sources":["./src/components/email-viewer/email-viewer.scss?tag=limel-email-viewer&encapsulation=shadow","./src/components/email-viewer/email-viewer.tsx"],"sourcesContent":[":host(limel-email-viewer) {\n    display: block;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n* {\n    box-sizing: border-box;\n    min-width: 0;\n    min-height: 0;\n}\n\n.email {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n    width: 100%;\n    height: 100%;\n    padding: 0.5rem 0;\n    box-shadow: var(--shadow-depth-8);\n}\n\n.email-headers {\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 0.75rem;\n    border-bottom: 1px dashed rgba(var(--contrast-600));\n\n    dl {\n        all: unset;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 0 0.5rem;\n        padding: 0.5rem 0.75rem;\n\n        &:nth-child(even) {\n            background-color: rgb(var(--contrast-800), 0.1);\n        }\n\n        dt {\n            all: unset;\n            opacity: 0.6;\n            font-size: var(--limel-theme-small-font-size);\n            min-width: 3rem;\n\n            &:after {\n                content: ':';\n            }\n        }\n        dd {\n            all: unset;\n            font-size: var(--limel-theme-default-font-size);\n            &:not(:last-child) {\n                &:after {\n                    content: ',';\n                    opacity: 0.6;\n                }\n            }\n        }\n\n        &.subject {\n            dd {\n                font-weight: bold;\n            }\n        }\n    }\n}\n\n.body {\n    max-width: 100%;\n    padding: 0.75rem;\n\n    &.plain-text {\n        all: unset;\n        white-space: pre-wrap;\n        overflow-wrap: anywhere;\n        margin: 0;\n        font-family: inherit;\n\n        max-width: 100%;\n        padding: 0.75rem;\n    }\n\n    img {\n        max-width: 100% !important;\n    }\n}\n","import { Component, Prop, h } from '@stencil/core';\nimport translate from '../../global/translations';\nimport { Languages } from '../date-picker/date.types';\n\n/**\n * This is a private component, used to render `.eml` files inside\n * `limel-file-viewer`.\n *\n * :::note\n * If `bodyHtml` is provided, it will be rendered using `innerHTML`.\n * :::\n *\n * @exampleComponent limel-example-email-viewer-plain-text\n * @exampleComponent limel-example-email-viewer-inline-image\n *\n * @private\n */\n@Component({\n    tag: 'limel-email-viewer',\n    styleUrl: 'email-viewer.scss',\n    shadow: true,\n})\nexport class EmailViewer {\n    /**\n     * RFC 5322 Date header.\n     */\n    @Prop({ reflect: true })\n    public date?: string;\n\n    /**\n     * From header.\n     */\n    @Prop({ reflect: true })\n    public from?: string;\n\n    /**\n     * To header.\n     */\n    @Prop({ reflect: true })\n    public to?: string;\n\n    /**\n     * Cc header.\n     */\n    @Prop({ reflect: true })\n    public cc?: string;\n\n    /**\n     * Subject header.\n     */\n    @Prop({ reflect: true })\n    public subject?: string;\n\n    /**\n     * HTML email body.\n     */\n    @Prop()\n    public bodyHtml?: string;\n\n    /**\n     * Plain text email body.\n     */\n    @Prop()\n    public bodyText?: string;\n\n    /**\n     * Optional URL to render as a final fallback using an `<object type=\"text/plain\">`.\n     */\n    @Prop({ reflect: true })\n    public fallbackUrl?: string;\n\n    /**\n     * Defines the localization for translations.\n     */\n    @Prop({ reflect: true })\n    public language: Languages = 'en';\n\n    public render() {\n        return (\n            <div class=\"email\" part=\"email\">\n                {this.renderHeaders()}\n                {this.renderBody()}\n            </div>\n        );\n    }\n\n    private renderHeaders() {\n        return (\n            <div class=\"email-headers\" part=\"email-headers\">\n                {this.renderEmailHeader(\n                    'subject',\n                    this.getTranslation('file-viewer.email.subject'),\n                    this.subject\n                )}\n                {this.renderEmailHeader(\n                    'from',\n                    this.getTranslation('file-viewer.email.from'),\n                    this.from\n                )}\n                {this.renderEmailHeader(\n                    'to',\n                    this.getTranslation('file-viewer.email.to'),\n                    this.to\n                )}\n                {this.renderEmailHeader(\n                    'cc',\n                    this.getTranslation('file-viewer.email.cc'),\n                    this.cc\n                )}\n                {this.renderEmailHeader(\n                    'date',\n                    this.getTranslation('file-viewer.email.date'),\n                    this.date\n                )}\n            </div>\n        );\n    }\n\n    private renderBody() {\n        if (this.bodyHtml) {\n            return (\n                <div class=\"body\" innerHTML={this.bodyHtml} part=\"email-body\" />\n            );\n        }\n\n        if (this.bodyText) {\n            return h(\n                'pre',\n                {\n                    class: {\n                        body: true,\n                        'plain-text': true,\n                    },\n                    part: 'email-body',\n                },\n                this.bodyText\n            );\n        }\n\n        if (this.fallbackUrl) {\n            return (\n                <object data={this.fallbackUrl} type=\"text/plain\">\n                    <slot name=\"fallback\" />\n                </object>\n            );\n        }\n\n        return <slot name=\"fallback\" />;\n    }\n\n    private renderEmailHeader(\n        type: 'subject' | 'from' | 'to' | 'cc' | 'date',\n        label: string,\n        value?: string\n    ) {\n        if (!value) {\n            return;\n        }\n\n        const values = this.getHeaderValues(type, value);\n\n        return (\n            <dl class={`headers ${type}`}>\n                <dt>{label}</dt>\n                {values.map((v) => (\n                    <dd>{v}</dd>\n                ))}\n            </dl>\n        );\n    }\n\n    private getHeaderValues(\n        type: 'subject' | 'from' | 'to' | 'cc' | 'date',\n        value: string\n    ): string[] {\n        if (type === 'to' || type === 'cc') {\n            return value\n                .split(',')\n                .map((v) => v.trim())\n                .filter(Boolean);\n        }\n\n        return [value];\n    }\n\n    private getTranslation(key: string) {\n        return translate.get(key, this.language);\n    }\n}\n"],"mappings":"yFAAA,MAAMA,EAAiB,0kC,MCsBVC,EAAW,M,qNAqDS,I,CAEtBC,SACH,OACIC,EAAA,OAAKC,MAAM,QAAQC,KAAK,SACnBC,KAAKC,gBACLD,KAAKE,a,CAKVD,gBACJ,OACIJ,EAAA,OAAKC,MAAM,gBAAgBC,KAAK,iBAC3BC,KAAKG,kBACF,UACAH,KAAKI,eAAe,6BACpBJ,KAAKK,SAERL,KAAKG,kBACF,OACAH,KAAKI,eAAe,0BACpBJ,KAAKM,MAERN,KAAKG,kBACF,KACAH,KAAKI,eAAe,wBACpBJ,KAAKO,IAERP,KAAKG,kBACF,KACAH,KAAKI,eAAe,wBACpBJ,KAAKQ,IAERR,KAAKG,kBACF,OACAH,KAAKI,eAAe,0BACpBJ,KAAKS,M,CAMbP,aACJ,GAAIF,KAAKU,SAAU,CACf,OACIb,EAAA,OAAKC,MAAM,OAAOa,UAAWX,KAAKU,SAAUX,KAAK,c,CAIzD,GAAIC,KAAKY,SAAU,CACf,OAAOf,EACH,MACA,CACIC,MAAO,CACHe,KAAM,KACN,aAAc,MAElBd,KAAM,cAEVC,KAAKY,S,CAIb,GAAIZ,KAAKc,YAAa,CAClB,OACIjB,EAAA,UAAQkB,KAAMf,KAAKc,YAAaE,KAAK,cACjCnB,EAAA,QAAMoB,KAAK,a,CAKvB,OAAOpB,EAAA,QAAMoB,KAAK,Y,CAGdd,kBACJa,EACAE,EACAC,GAEA,IAAKA,EAAO,CACR,M,CAGJ,MAAMC,EAASpB,KAAKqB,gBAAgBL,EAAMG,GAE1C,OACItB,EAAA,MAAIC,MAAO,WAAWkB,KAClBnB,EAAA,UAAKqB,GACJE,EAAOE,KAAKC,GACT1B,EAAA,UAAK0B,K,CAMbF,gBACJL,EACAG,GAEA,GAAIH,IAAS,MAAQA,IAAS,KAAM,CAChC,OAAOG,EACFK,MAAM,KACNF,KAAKC,GAAMA,EAAEE,SACbC,OAAOC,Q,CAGhB,MAAO,CAACR,E,CAGJf,eAAewB,GACnB,OAAOC,EAAUC,IAAIF,EAAK5B,KAAK+B,S"}