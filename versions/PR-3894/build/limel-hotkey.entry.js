import{r as e,c as s,h as r,H as t}from"./index-BqlK_Alp.js";import{t as a,i,h as l,n}from"./hotkeys-C4m0KArV.js";import{i as o}from"./device-BWhDENxl.js";const c=class{constructor(r){e(this,r),this.hotkeyTrigger=s(this,"hotkeyTrigger"),this.disabled=!1,this.registeredNormalizedHotkey=null}connectedCallback(){this.updateRegistry()}disconnectedCallback(){this.unregister()}valueWatcher(){this.updateRegistry()}disabledWatcher(){this.updateRegistry()}render(){var e;const s=o(),i=a(this.value),l=(null!==(e=this.value)&&void 0!==e?e:"").trim();return r(t,{key:"698b2af6c00bf3b5c359f5d35c5c99ad6ab5abd7","aria-label":l||void 0},i.map(((e,t)=>{const{display:a,isGlyph:i}=this.formatDisplayToken(e,s);return r("kbd",{key:`${e}-${t}`,class:i?"is-glyph":void 0},r("span",null,a))})))}formatDisplayToken(e,s){const r=(null!=e?e:"").trim();if(!r)return{display:"",isGlyph:!1};if("+"===r)return{display:"+",isGlyph:!1};const t=r.toLowerCase();switch(t){case"meta":return s?{display:"⌘",isGlyph:!0}:{display:"⊞ Win",isGlyph:!1};case"cmd":case"command":return{display:"⌘",isGlyph:!0};case"alt":case"option":return s?{display:"⌥",isGlyph:!0}:{display:"Alt",isGlyph:!1};case"shift":return{display:"⇧",isGlyph:!0};case"enter":case"return":return{display:"↩",isGlyph:!0};case"tab":return{display:"⇥",isGlyph:!0};case"delete":case"del":case"backspace":return s?{display:"⌫",isGlyph:!0}:"backspace"===t?{display:"Backspace",isGlyph:!1}:{display:"Del",isGlyph:!1};case"ctrl":case"control":return{display:"Ctrl",isGlyph:!1}}return{display:r,isGlyph:!1}}handleKeyDown(e){if(e.defaultPrevented||e.repeat)return;if(e[c.handledFlag])return;const s=this.registeredNormalizedHotkey;if(!s)return;if(i(e))return;const r=l(e);r&&r===s&&(this.warnIfDuplicateHotkey(s,e),e[c.handledFlag]=!0,this.hotkeyTrigger.emit({hotkey:s,value:this.value,keyboardEvent:e}))}warnIfDuplicateHotkey(e,s){var r;if(s[c.duplicateWarnedFlag])return;const t=c.instancesByHotkey.get(e),a=null!==(r=null==t?void 0:t.size)&&void 0!==r?r:0;a<=1||(s[c.duplicateWarnedFlag]=!0,console.warn(`[limel-hotkey] Duplicate hotkey detected: "${e}" is configured ${a} times among enabled <limel-hotkey> instances. Only the first handler will run for each keypress.`))}updateRegistry(){const e=!this.disabled&&this.value?n(this.value):null;if(e===this.registeredNormalizedHotkey)return;if(this.unregister(),!e)return;let s=c.instancesByHotkey.get(e);s||(s=new Set,c.instancesByHotkey.set(e,s)),s.add(this),this.registeredNormalizedHotkey=e}unregister(){const e=this.registeredNormalizedHotkey;if(!e)return;const s=c.instancesByHotkey.get(e);null==s||s.delete(this),s&&0===s.size&&c.instancesByHotkey.delete(e),this.registeredNormalizedHotkey=null}static get watchers(){return{value:[{valueWatcher:0}],disabled:[{disabledWatcher:0}]}}};c.handledFlag="__limelHotkeyHandled",c.duplicateWarnedFlag="__limelHotkeyDuplicateWarned",c.instancesByHotkey=new Map,c.style='@charset "UTF-8";kbd{display:inline-block;font-family:ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Consolas, "DejaVu Sans Mono", monospace;font-weight:600;color:rgb(var(--contrast-1100));white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:normal;border-radius:0.125rem;border-style:solid;border-color:rgb(var(--contrast-500));border-width:0 1px 0.1875rem 1px;padding:0.0625rem 0.375rem;margin:0 0.25rem;background-color:rgb(var(--contrast-200));box-shadow:var(--button-shadow-normal), 0 0.625rem 0.375px -0.5rem rgb(var(--color-black), 0.02), 0 0.025rem 0.5rem 0 rgb(var(--contrast-100)) inset}kbd::first-letter{text-transform:uppercase}:host(limel-hotkey){display:flex;align-items:center;justify-content:center;gap:0.25rem}:host(limel-hotkey[disabled]:not([disabled=false])){opacity:0.5}kbd{margin:0;font-size:0.75rem;box-shadow:var(--button-shadow-pressed), 0 0.625rem 0.375px -0.5rem rgb(var(--color-black), 0.02), 0 0.025rem 0.5rem 0 rgb(var(--contrast-100)) inset}span{display:inline-block}span::first-letter{text-transform:uppercase}kbd.is-glyph span{transform:scale(1.2)}';export{c as limel_hotkey}