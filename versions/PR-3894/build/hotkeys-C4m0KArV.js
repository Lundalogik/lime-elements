const t=t=>{const n=(null!=t?t:"").trim();if(!n)return[];if("+"===n)return["+"];const r=[];let e="",o=0;for(;o<n.length;){const t=n[o];if("+"!==t){e+=t,o++;continue}if("+"===n[o+1]){const t=e.trim();t&&r.push(t),r.push("+"),e="",o+=2;continue}const l=e.trim();l&&r.push(l),e="",o++}const l=e.trim();return l&&r.push(l),r},n=t=>{const n=t.trim().toLowerCase();if(!n)return null;const r={cmd:"meta",command:"meta",win:"meta",windows:"meta",option:"alt",esc:"escape",return:"enter",del:"delete",backspace:"delete",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",spacebar:"space"};return r[n]?r[n]:(/^f\d{1,2}$/.test(n),n)},r=t=>{const r=n(t.key);if(!r)return null;if(["shift","alt","control","ctrl","meta"].includes(r))return null;const e=[];return t.meta&&e.push("meta"),t.ctrl&&e.push("ctrl"),t.alt&&e.push("alt"),t.shift&&e.push("shift"),e.push(r),e.join("+")},e=e=>{if(!e)return null;const o=t(e);if(0===o.length)return null;let l=!1,c=!1,s=!1,u=!1,i=null;for(const t of o){const r=n(t);r&&("alt"!==r?"ctrl"!==r&&"control"!==r?"meta"!==r?"shift"!==r?i=r:u=!0:s=!0:c=!0:l=!0)}return i?r({key:i,alt:l,ctrl:c,meta:s,shift:u}):null},o=t=>{const e=(t=>{const r=(t.code||"").trim();if(/^Key[A-Z]$/.test(r))return r.slice(3).toLowerCase();if(/^Digit\d$/.test(r))return r.slice(5);const e=t.key;return" "===e?"space":n(e)})(t);return e?r({key:e,alt:t.altKey,ctrl:t.ctrlKey,meta:t.metaKey,shift:"+"!==e&&t.shiftKey}):null},l=t=>{var n;const r="function"==typeof t.composedPath?t.composedPath():[];for(const t of r){if(!(t instanceof Element))continue;if(t.isContentEditable)return!0;const r=t.tagName;if("INPUT"===r||"TEXTAREA"===r||"SELECT"===r)return!0;if("textbox"===(null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"role")))return!0}return!1};export{o as h,l as i,e as n,t}