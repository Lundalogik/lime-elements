import{r as t,h as e}from"./index-6156b4fd.js";import{t as i}from"./translations-453e0db7.js";import{c as r}from"./random-string-812b1c35.js";const a='@charset "UTF-8";:host(limel-chart){--chart-axis-line-color:var(\n      --limel-chart-axis-line-color,\n      rgb(var(--contrast-900))\n  );box-sizing:border-box;isolation:isolate;display:flex;width:100%;height:100%;min-width:0;min-height:0;padding:var(--limel-chart-padding)}table{all:unset;border-collapse:collapse;border-spacing:0;empty-cells:show;position:relative;display:flex;width:100%;height:100%;min-width:0;min-height:0}table colgroup,table thead,table tbody,table tr,table th,table td{all:unset}table caption,table colgroup,table thead,table tfoot,table th,table td{position:absolute;width:0;height:0;margin:-1px;padding:0;border:0;overflow:hidden;clip:rect(0, 0, 0, 0);clip-path:inset(50%);white-space:nowrap}*,*:before,*:after{box-sizing:border-box}.chart{position:relative;flex-grow:1;width:100%;height:100%;min-height:0;min-width:0}.chart:has(.item:hover) .item,.chart:has(.item:focus-visible) .item{opacity:0.4}.item{transition:background-color 0.2s ease, filter 0.2s ease, opacity 0.4s ease;cursor:help}.item:focus-visible,.item:hover{opacity:1 !important}:host(limel-chart[type=bar]) .chart,:host(limel-chart[type=scatter]) .chart{display:flex;gap:0.5rem;background-color:var(--chart-background-color, transparent)}:host(limel-chart[type=bar]) .item,:host(limel-chart[type=scatter]) .item{mix-blend-mode:hard-light;display:flex;align-items:center;justify-content:center;position:relative;border-radius:var(--chart-item-border-radius, 0.125rem)}:host(limel-chart[type=bar]) .item:focus,:host(limel-chart[type=scatter]) .item:focus{outline:none}:host(limel-chart[type=bar]) .item:focus-visible,:host(limel-chart[type=scatter]) .item:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}:host(limel-chart[type=bar]) .item{background-color:var(--limel-chart-item-color)}:host(limel-chart[type=scatter]) .item:before,:host(limel-chart[type=scatter]) .item:after{content:"";position:absolute;margin:auto;width:0.5rem;height:0.5rem;border-radius:50%}:host(limel-chart[type=scatter]) .item::after{background-color:var(--limel-chart-item-color)}:host(limel-chart[type=scatter]) .item.has-start-value:before{background-color:var(--limel-chart-item-color)}:host(limel-chart[type=bar][orientation=landscape]),:host(limel-chart[type=scatter][orientation=landscape]){--limel-chart-padding:0.5rem 0.5rem 0.5rem 2rem}:host(limel-chart[type=bar][orientation=landscape]) .chart,:host(limel-chart[type=scatter][orientation=landscape]) .chart{flex-direction:row;align-items:flex-end;overflow:auto hidden;padding:0 0.125rem}:host(limel-chart[type=bar][orientation=landscape]) .item,:host(limel-chart[type=scatter][orientation=landscape]) .item{min-width:0.5rem;width:inherit;height:calc(var(--limel-chart-item-size) * 1%);bottom:calc(var(--limel-chart-item-offset) * 1%)}:host(limel-chart[type=bar][orientation=landscape]) .item.has-negative-value-only,:host(limel-chart[type=scatter][orientation=landscape]) .item.has-negative-value-only{height:calc(var(--limel-chart-item-size) * -1%);transform-origin:bottom;transform:rotateX(180deg)}:host(limel-chart[type=scatter][orientation=landscape]) .item.has-start-value,:host(limel-chart[type=scatter][orientation=landscape]) .item:hover,:host(limel-chart[type=scatter][orientation=landscape]) .item:focus-visible{background:linear-gradient(to bottom, rgb(var(--contrast-800), 0.4) 0%, rgb(var(--contrast-800), 0.4) 100%) center/1px 100% no-repeat}:host(limel-chart[type=scatter][orientation=landscape]) .item:before{inset:auto 0 0 0;transform:translateY(50%)}:host(limel-chart[type=scatter][orientation=landscape]) .item::after{inset:0 0 auto 0;transform:translateY(-50%)}:host(limel-chart[type=bar][orientation=portrait]),:host(limel-chart[type=scatter][orientation=portrait]){--limel-chart-padding:0.5rem 0.5rem 1rem 0.5rem}:host(limel-chart[type=bar][orientation=portrait]) .chart,:host(limel-chart[type=scatter][orientation=portrait]) .chart{flex-direction:column;overflow:hidden auto;padding:0.125rem 0}:host(limel-chart[type=bar][orientation=portrait]) .item,:host(limel-chart[type=scatter][orientation=portrait]) .item{min-height:0.5rem;height:inherit;width:calc(var(--limel-chart-item-size) * 1%);left:calc(var(--limel-chart-item-offset) * 1%)}:host(limel-chart[type=bar][orientation=portrait]) .item.has-negative-value-only,:host(limel-chart[type=scatter][orientation=portrait]) .item.has-negative-value-only{width:calc(var(--limel-chart-item-size) * -1%);transform-origin:left;transform:rotateY(180deg)}:host(limel-chart[type=scatter][orientation=portrait]) .item.has-start-value,:host(limel-chart[type=scatter][orientation=portrait]) .item:hover,:host(limel-chart[type=scatter][orientation=portrait]) .item:focus-visible{background:linear-gradient(to right, rgb(var(--contrast-800), 0.4) 0%, rgb(var(--contrast-800), 0.4) 100%) center/100% 1px no-repeat}:host(limel-chart[type=scatter][orientation=portrait]) .item:before{inset:0 auto 0 0;transform:translateX(-50%)}:host(limel-chart[type=scatter][orientation=portrait]) .item:after{inset:0 0 0 auto;transform:translateX(50%)}:host(limel-chart[type=pie]) table,:host(limel-chart[type=doughnut]) table{min-height:2rem;min-width:2rem}:host(limel-chart[type=pie]) .chart,:host(limel-chart[type=doughnut]) .chart{overflow:hidden;background-color:var(--chart-background-color, rgb(var(--contrast-200)));aspect-ratio:1;border-radius:50%}:host(limel-chart[type=pie]) .item,:host(limel-chart[type=doughnut]) .item{display:flex;width:100%;aspect-ratio:1;position:absolute;inset:0;background:conic-gradient(transparent 0 calc(var(--limel-chart-item-offset) * 1%), var(--limel-chart-item-color) calc(var(--limel-chart-item-offset) * 1%) calc(var(--limel-chart-item-offset) * 1% + var(--limel-chart-item-size) * 1%), transparent calc(var(--limel-chart-item-offset) * 1% + var(--limel-chart-item-size) * 1%))}:host(limel-chart[type=pie]) .item:focus,:host(limel-chart[type=pie]) .item:focus-visible,:host(limel-chart[type=doughnut]) .item:focus,:host(limel-chart[type=doughnut]) .item:focus-visible{outline:none}:host(limel-chart[type=pie]) .item,:host(limel-chart[type=doughnut]) .item{pointer-events:none}:host(limel-chart[type=doughnut]) .chart:after{content:"";position:absolute;inset:0;margin:auto;width:50%;height:50%;border-radius:50%;background-color:rgb(var(--contrast-100))}:host(limel-chart[type=ring]) table{min-height:2rem;min-width:2rem}:host(limel-chart[type=ring]) .chart{display:flex;justify-content:center;align-items:center;aspect-ratio:1;border-radius:50%}:host(limel-chart[type=ring]) .chart:after{content:"";width:calc(100% - var(--limel-chart-number-of-items) * 100% / (var(--limel-chart-number-of-items) + 1));background-color:var(--limel-chart-background-color, rgb(var(--contrast-200)))}:host(limel-chart[type=ring]) .chart:has(.item:hover) .item,:host(limel-chart[type=ring]) .chart:has(.item:focus-visible) .item{opacity:1;filter:grayscale(1)}:host(limel-chart[type=ring]) .chart:after,:host(limel-chart[type=ring]) .item{display:flex;aspect-ratio:1;border-radius:50%;position:absolute;inset:0;margin:auto;border:1px solid var(--limel-chart-background-color, rgb(var(--contrast-400)))}:host(limel-chart[type=ring]) .item{background:conic-gradient(var(--limel-chart-item-color) 0 calc(var(--limel-chart-item-offset) * 1% + var(--limel-chart-item-size) * 1%), var(--chart-background-color, rgb(var(--contrast-200))) calc(var(--limel-chart-item-offset) * 1% + var(--limel-chart-item-size) * 1%));width:calc(100% - var(--limel-chart-item-index) * 100% / (var(--limel-chart-number-of-items) + 1))}:host(limel-chart[type=ring]) .item:focus{outline:none}:host(limel-chart[type=ring]) .item:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}:host(limel-chart[type=ring]) .item:focus-visible,:host(limel-chart[type=ring]) .item:hover{filter:grayscale(0) !important}:host(limel-chart[type=ring]) .item:first-child{margin-left:-1px}:host(limel-chart[type=stacked-bar]) .chart{display:flex;border-radius:0.25rem;overflow:hidden;background-color:var(--chart-background-color, rgb(var(--contrast-800), 0.2))}:host(limel-chart[type=stacked-bar]) .item{display:flex;border-radius:var(--chart-item-border-radius, 0);background-color:var(--limel-chart-item-color)}:host(limel-chart[type=stacked-bar]) .item:focus{outline:none}:host(limel-chart[type=stacked-bar]) .item:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}:host(limel-chart[type=stacked-bar]) .item:last-of-type{box-shadow:none !important}:host(limel-chart[type=stacked-bar][orientation=landscape]) .chart{flex-direction:row}:host(limel-chart[type=stacked-bar][orientation=landscape]) .item{min-height:0.5rem;width:calc(var(--limel-chart-item-size) * 1%);box-shadow:-1px 0 0 0 var(--chart-stacked-item-divider-color, rgb(var(--color-white), 0.6)) inset}:host(limel-chart[type=stacked-bar][orientation=portrait]) .chart{flex-direction:column-reverse}:host(limel-chart[type=stacked-bar][orientation=portrait]) .item{min-width:0.5rem;height:calc(var(--limel-chart-item-size) * 1%);box-shadow:0 -1px 0 0 rgb(var(--color-white), 0.6) inset}.axises{position:absolute;display:flex;justify-content:space-between;min-height:100%;min-width:100%;height:100%;width:100%}.axis-line{transition:opacity 0.4s ease;position:relative;opacity:0.2;font-size:0.625rem;border-color:var(--limel-chart-axis-line-color)}.axis-line:hover{opacity:0.6;transition-duration:0.2s}.axis-line.zero-line{opacity:0.8}.axis-line span{position:absolute;text-align:right;padding-right:0.25rem;width:2rem;color:currentColor}:host(limel-chart[orientation=landscape]) .axises{flex-direction:column-reverse}:host(limel-chart[orientation=landscape]) .axis-line{border-bottom:1px solid}:host(limel-chart[orientation=landscape]) .axis-line span{bottom:0;left:-2rem;transform:translateY(50%)}:host(limel-chart[orientation=portrait]) .axises{flex-direction:row}:host(limel-chart[orientation=portrait]) .axis-line{border-left:1px solid}:host(limel-chart[orientation=portrait]) .axis-line span{bottom:-1rem;right:-0.25rem}';const o=100;const l=10;const s=class{constructor(e){t(this,e);this.cachedRange=null;this.language="en";this.accessibleLabel=undefined;this.accessibleItemsLabel=undefined;this.items=undefined;this.type="stacked-bar";this.orientation="landscape";this.maxValue=undefined;this.axisIncrement=l;this.legend=true}componentWillLoad(){this.recalculateRangeData()}render(){return e("table",{style:{"--limel-chart-number-of-items":this.items.length.toString()}},this.renderCaption(),this.renderTableHeader(),this.renderAxises(),e("tbody",{class:"chart"},this.renderItems()))}renderCaption(){if(!this.accessibleLabel){return}return e("caption",null,this.accessibleLabel)}renderTableHeader(){return e("thead",null,e("tr",null,e("th",{scope:"col"},this.accessibleItemsLabel),e("th",{scope:"col"},i.get("value",this.language))))}renderAxises(){if(this.type!=="bar"&&this.type!=="scatter"){return}const{minRange:t,maxRange:i}=this.rangeData;const r=[];const a=Math.floor(t/this.axisIncrement)*this.axisIncrement;const o=Math.ceil(i/this.axisIncrement)*this.axisIncrement;for(let t=a;t<=o;t+=this.axisIncrement){r.push(e("div",{class:{"axis-line":true,"zero-line":t===0},role:"presentation"},e("span",null,t)))}return e("div",{class:"axises",role:"presentation"},r)}renderItems(){if(!this.items||this.items.length===0){return}let t=0;return this.items.map(((i,a)=>{const o=r();const{size:l,offset:s}=this.calculateSizeAndOffset(i,t);if(this.type==="pie"||this.type==="doughnut"){t+=l}return e("tr",{style:this.getItemStyle(i,a,l,s),class:this.getItemClass(i),key:o,id:o,tabIndex:0},e("th",null,this.getItemText(i)),e("td",null,this.getFormattedValue(i)),this.renderTooltip(o,this.getItemText(i),i.value,l,i.startValue,i.prefix,i.suffix))}))}getItemStyle(t,e,i,r){return{"--limel-chart-item-color":t.color,"--limel-chart-item-offset":`${r}`,"--limel-chart-item-size":`${i}`,"--limel-chart-item-index":`${e}`}}getItemClass(t){return{item:true,"has-start-value":t.startValue!==undefined,"has-negative-value-only":t.value<0&&!t.startValue}}calculateSizeAndOffset(t,e){var i;const{minRange:r,totalRange:a}=this.rangeData;const l=(((i=t.startValue)!==null&&i!==void 0?i:0)-r)/a*o;const s=(t.value-r)/a*o;const n=s-l;let h=l;if(this.type==="pie"||this.type==="doughnut"){h=e}return{size:n,offset:h}}getFormattedValue({value:t,startValue:e,prefix:i="",suffix:r=""}){const a=`${i}${t}${r}`;const o=`${i}${e}${r} — ${i}${t}${r}`;return e!==undefined?o:a}getItemText(t){return t.text}renderTooltip(t,i,r,a,o,l="",s=""){const n=2;const h=this.getFormattedValue({value:r,startValue:o,prefix:l,suffix:s});const c={label:i,helperLabel:h,elementId:t};if(this.type!=="bar"&&this.type!=="scatter"){c.label=`${i} (${a.toFixed(n)}%)`}return e("limel-tooltip",Object.assign({},c,{openDirection:this.orientation==="portrait"?"right":"top"}))}calculateRange(){var t;if(this.cachedRange){return this.cachedRange}const e=Math.min(...[].concat(...this.items.map((t=>{var e;return[(e=t.startValue)!==null&&e!==void 0?e:0,t.value]}))));const i=Math.max(...[].concat(...this.items.map((t=>{var e;return[(e=t.startValue)!==null&&e!==void 0?e:0,t.value]}))));const r=this.items.reduce(((t,e)=>t+e.value),0);let a=(t=this.maxValue)!==null&&t!==void 0?t:i;if((this.type==="pie"||this.type==="doughnut")&&!this.maxValue){a=r}const o=Math.ceil(a/this.axisIncrement)*this.axisIncrement;const l=Math.floor(e/this.axisIncrement)*this.axisIncrement;const s=o-l;this.cachedRange={minRange:l,maxRange:o,totalRange:s};return this.cachedRange}handleChange(){this.cachedRange=null;this.recalculateRangeData()}recalculateRangeData(){this.rangeData=this.calculateRange()}static get watchers(){return{items:["handleChange"],axisIncrement:["handleChange"],maxValue:["handleChange"]}}};s.style=a;export{s as limel_chart};
//# sourceMappingURL=limel-chart.entry.js.map