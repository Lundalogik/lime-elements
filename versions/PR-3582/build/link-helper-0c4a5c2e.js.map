{"version":3,"names":["getHref","value","href","String","trim","isValid","prependProtocol","getTarget","url","isRelativeLink","input","hasKnownProtocol","hasRelativeProtocol","knownProtocols","some","knownProtocol","startsWith"],"sources":["./src/util/link-helper.ts"],"sourcesContent":["export function getHref(value: string) {\n    const href = value ? String(value.trim()) : '';\n    if (isValid(href)) {\n        return href;\n    }\n\n    return prependProtocol(href);\n}\n\nexport function getTarget(value: string) {\n    const url = getHref(value);\n    if (isRelativeLink(url)) {\n        return '_self';\n    }\n\n    return '_blank';\n}\n\nexport function prependProtocol(input: string) {\n    if (!input) {\n        return input;\n    }\n\n    return 'https://' + input;\n}\n\nfunction isValid(href: string) {\n    return (\n        hasKnownProtocol(href) ||\n        isRelativeLink(href) ||\n        hasRelativeProtocol(href)\n    );\n}\n\nexport function hasKnownProtocol(input: string) {\n    const knownProtocols = [\n        'ftp',\n        'ftps',\n        'https',\n        'http',\n\n        // `file` may or may not work, due to cross-origin restrictions and browser settings.\n        'file',\n\n        // m-files is a protocol used by the M-Files desktop app or something.\n        // It's not a web protocol, but it allows open M-Files links in their app.\n        'm-files',\n    ];\n\n    return knownProtocols.some((knownProtocol) => {\n        return input.startsWith(knownProtocol + '://');\n    });\n}\n\nfunction isRelativeLink(input: string) {\n    if (hasRelativeProtocol(input)) {\n        return false;\n    }\n\n    return input.startsWith('/') || input.startsWith('#');\n}\n\nfunction hasRelativeProtocol(input: string) {\n    return input.startsWith('//');\n}\n\n/**\n * Returns the appropriate `rel` attribute value for a link.\n *\n * If an explicit `rel` value is provided, it will be used.\n * Otherwise, when `target` is `_blank`, automatically returns\n * `\"noopener noreferrer\"` for improved security.\n *\n * @param target - The target attribute value (e.g., \"_blank\", \"_self\")\n * @param explicitRel - An explicitly provided rel attribute value\n * @returns The rel attribute value to use, or undefined if none needed\n */\nexport function getRel(target?: string, explicitRel?: string) {\n    if (explicitRel) {\n        return explicitRel;\n    }\n\n    if (target === '_blank') {\n        return 'noopener noreferrer';\n    }\n\n    return undefined;\n}\n"],"mappings":"SAAgBA,EAAQC,GACpB,MAAMC,EAAOD,EAAQE,OAAOF,EAAMG,QAAU,GAC5C,GAAIC,EAAQH,GAAO,CACf,OAAOA,C,CAGX,OAAOI,EAAgBJ,EAC3B,C,SAEgBK,EAAUN,GACtB,MAAMO,EAAMR,EAAQC,GACpB,GAAIQ,EAAeD,GAAM,CACrB,MAAO,O,CAGX,MAAO,QACX,C,SAEgBF,EAAgBI,GAC5B,IAAKA,EAAO,CACR,OAAOA,C,CAGX,MAAO,WAAaA,CACxB,CAEA,SAASL,EAAQH,GACb,OACIS,EAAiBT,IACjBO,EAAeP,IACfU,EAAoBV,EAE5B,C,SAEgBS,EAAiBD,GAC7B,MAAMG,EAAiB,CACnB,MACA,OACA,QACA,OAGA,OAIA,WAGJ,OAAOA,EAAeC,MAAMC,GACjBL,EAAMM,WAAWD,EAAgB,QAEhD,CAEA,SAASN,EAAeC,GACpB,GAAIE,EAAoBF,GAAQ,CAC5B,OAAO,K,CAGX,OAAOA,EAAMM,WAAW,MAAQN,EAAMM,WAAW,IACrD,CAEA,SAASJ,EAAoBF,GACzB,OAAOA,EAAMM,WAAW,KAC5B,Q"}