{"version":3,"file":"kompendium-route.js","sourceRoot":"","sources":["../../../src/components/router/kompendium-route.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAgB,MAAM,kBAAkB,CAAC;AACzE,OAAO,EAAE,0BAA0B,EAAE,MAAM,sBAAsB,CAAC;AAClE,OAAO,EAAE,oBAAoB,EAAE,MAAM,iBAAiB,CAAC;AAEvD;;;GAGG;AAKH,MAAM,OAAO,eAAe;IAmBxB;QAdQ,gBAAW,GAAW,GAAG,CAAC;QAe9B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC5D;IAED,iBAAiB;QACb,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC7D,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC5B,CAAC;IAED,oBAAoB;QAChB,MAAM,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACpE,CAAC;IAEO,gBAAgB;QACpB,IAAI,CAAC,WAAW,GAAG,WAAW,EAAE,CAAC;IACrC,CAAC;IAED,MAAM;QACF,+DAA+D;QAC/D,IAAI,0BAA0B,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YACxD,OAAO,IAAI,CAAC;QAChB,CAAC;QAED,8BAA8B;QAC9B,IAAI,KAA0B,CAAC;QAC/B,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;YACX,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QACnD,CAAC;aAAM,CAAC;YACJ,KAAK,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC,kBAAkB;QAC9C,CAAC;QAED,IAAI,CAAC,KAAK,EAAE,CAAC;YACT,OAAO,IAAI,CAAC;QAChB,CAAC;QAED,2BAA2B;QAC3B,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAO,IAAI,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC9C,CAAC;QAED,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,MAAM,KAAK,GAAG;gBACV,GAAG,IAAI,CAAC,cAAc;gBACtB,KAAK,EAAE,KAAK;aACf,CAAC;YAEF,4DAA4D;YAC5D,iEAAiE;YACjE,MAAM,GAAG,GAAG,oBAAoB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAE/C,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,EAAE,CAAC,CAAC;QACrD,CAAC;QAED,OAAO,eAAQ,CAAC;IACpB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACJ","sourcesContent":["import { Component, h, Prop, Element, State } from '@stencil/core';\nimport { getHashPath, matchRoute, MatchResults } from './route-matching';\nimport { hasPreviousMatchingSibling } from './route-switch-logic';\nimport { generateComponentKey } from './component-key';\n\n/**\n * Custom route component for Kompendium\n * Renders a component when the route matches\n */\n@Component({\n    tag: 'kompendium-route',\n    shadow: false,\n})\nexport class KompendiumRoute {\n    @Element()\n    private el: HTMLElement;\n\n    @State()\n    private currentPath: string = '/';\n\n    @Prop()\n    public url?: string;\n\n    @Prop()\n    public component?: string;\n\n    @Prop()\n    public componentProps?: Record<string, any>;\n\n    @Prop()\n    public routeRender?: (props: { match: MatchResults }) => any;\n\n    constructor() {\n        this.handleHashChange = this.handleHashChange.bind(this);\n    }\n\n    connectedCallback(): void {\n        window.addEventListener('hashchange', this.handleHashChange);\n        this.handleHashChange();\n    }\n\n    disconnectedCallback(): void {\n        window.removeEventListener('hashchange', this.handleHashChange);\n    }\n\n    private handleHashChange(): void {\n        this.currentPath = getHashPath();\n    }\n\n    render() {\n        // Check if a previous sibling route matches (first-match wins)\n        if (hasPreviousMatchingSibling(this.el, this.currentPath)) {\n            return null;\n        }\n\n        // Check if this route matches\n        let match: MatchResults | null;\n        if (this.url) {\n            match = matchRoute(this.currentPath, this.url);\n        } else {\n            match = { params: {} }; // Catch-all route\n        }\n\n        if (!match) {\n            return null;\n        }\n\n        // Render the matched route\n        if (this.routeRender) {\n            return this.routeRender({ match: match });\n        }\n\n        if (this.component) {\n            const props = {\n                ...this.componentProps,\n                match: match,\n            };\n\n            // Create element dynamically using h() with string tag name\n            // Use match params as key to force recreation when params change\n            const key = generateComponentKey(match.params);\n\n            return h(this.component, { key: key, ...props });\n        }\n\n        return <slot />;\n    }\n}\n"]}