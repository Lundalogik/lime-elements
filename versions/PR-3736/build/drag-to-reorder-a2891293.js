const n="is-being-dragged";const e="has-an-item-which-is-being-dragged";const i="is-elevated";const o=1e3;const r="vertical";function t(t){var d,u;if(!(t===null||t===void 0?void 0:t.container)){throw new Error("Error in `dragToReorder`: Required option `container` is missing.")}if(!t.itemSelector){throw new Error("Error in `dragToReorder`: Required option `itemSelector` is missing.")}if(!t.dragHandleSelector){throw new Error("Error in `dragToReorder`: Required option `dragHandleSelector` is missing.")}if(!t.onPreview){throw new Error("Error in `dragToReorder`: Required option `onPreview` is missing.")}if(!t.onFinalize){throw new Error("Error in `dragToReorder`: Required option `onFinalize` is missing.")}const c=t.draggingClass||n;const s=t.containerDraggingClass||e;const f=t.dropElevationClass||i;const l=(d=t.dropElevationDuration)!==null&&d!==void 0?d:o;const a=(u=t.orientation)!==null&&u!==void 0?u:r;const m=t.getItemId||(n=>n.dataset.reorderId||undefined);let v;let g;let p;let w;let E;const R=()=>[...t.container.querySelectorAll(t.itemSelector)];const h=n=>{var e,i;if(n.pointerType==="mouse"&&"button"in n&&n.button!==0){return}const o=n.target;if(!o){return}const r=o.closest(t.dragHandleSelector);if(!r){return}const d=r.closest(t.itemSelector);if(!d){return}const u=R();const l=u.indexOf(d);if(l===-1){return}n.preventDefault();if(w!==undefined){clearTimeout(w);w=undefined}if(E){E.classList.remove(f);E=undefined}v={pointerId:n.pointerId,handle:r,item:d,originalIndex:l,currentIndex:l,id:m(d)};(e=r.setPointerCapture)===null||e===void 0?void 0:e.call(r,n.pointerId);g=document.body.style.userSelect;document.body.style.userSelect="none";p=document.body.style.cursor;document.body.style.cursor="grabbing";d.classList.add(f,c);t.container.classList.add(s);(i=t.onStart)===null||i===void 0?void 0:i.call(t,{index:l,item:d,id:v.id});document.addEventListener("pointermove",x,{passive:false});document.addEventListener("pointerup",I);document.addEventListener("pointercancel",b)};const x=n=>{if(!v){return}n.preventDefault();const e=R();if(e.length===0){return}const i=a==="vertical"?n.clientY:n.clientX;let o=e.length-1;let r=0;for(const n of e){const e=n.getBoundingClientRect();const t=a==="vertical"?e.top+e.height/2:e.left+e.width/2;if(i<t){o=r;break}r+=1}if(o<0){o=0}if(o===v.currentIndex){return}t.onPreview({fromIndex:v.currentIndex,toIndex:o,item:v.item,id:v.id});v.currentIndex=o};const T=n=>{var e,i;if(!v){return}const o=v;v=undefined;(i=(e=o.handle).releasePointerCapture)===null||i===void 0?void 0:i.call(e,o.pointerId);o.item.classList.remove(c);t.container.classList.remove(s);document.body.style.userSelect=g!==null&&g!==void 0?g:"";g=undefined;document.body.style.cursor=p!==null&&p!==void 0?p:"";p=undefined;document.removeEventListener("pointermove",x);document.removeEventListener("pointerup",I);document.removeEventListener("pointercancel",b);t.onFinalize({fromIndex:o.originalIndex,toIndex:o.currentIndex,item:o.item,id:o.id,cancelled:n});if(w!==undefined){clearTimeout(w);w=undefined}if(n||l<=0){o.item.classList.remove(f);if(E===o.item){E=undefined}return}E=o.item;const r=o.item;w=window.setTimeout((()=>{r.classList.remove(f);if(E===r){E=undefined}w=undefined}),l)};const I=n=>{if(!v||n.pointerId!==v.pointerId){return}n.preventDefault();T(false)};const b=n=>{if(!v||n.pointerId!==v.pointerId){return}T(true)};t.container.addEventListener("pointerdown",h);const q=()=>{t.container.removeEventListener("pointerdown",h);if(v){T(true)}if(w!==undefined){clearTimeout(w);w=undefined}if(E){E.classList.remove(f);E=undefined}};return{destroy:q}}export{t as d};
//# sourceMappingURL=drag-to-reorder-a2891293.js.map