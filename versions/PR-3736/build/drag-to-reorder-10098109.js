const e="is-being-dragged";const n="has-an-item-which-is-being-dragged";const i="is-elevated";const o=1e3;const r="vertical";function t(t){var d,u;if(!(t===null||t===void 0?void 0:t.container)){throw new Error("Error in `dragToReorder`: Required option `container` is missing.")}if(!t.itemSelector){throw new Error("Error in `dragToReorder`: Required option `itemSelector` is missing.")}if(!t.dragHandleSelector){throw new Error("Error in `dragToReorder`: Required option `dragHandleSelector` is missing.")}if(!t.onPreview){throw new Error("Error in `dragToReorder`: Required option `onPreview` is missing.")}if(!t.onFinalize){throw new Error("Error in `dragToReorder`: Required option `onFinalize` is missing.")}const c=t.draggingClass||e;const s=t.containerDraggingClass||n;const f=t.dropElevationClass||i;const l=(d=t.dropElevationDuration)!==null&&d!==void 0?d:o;const a=(u=t.orientation)!==null&&u!==void 0?u:r;const m=t.getItemId||(e=>e.dataset.reorderId||undefined);let v;let g;let p;let w;let E;const T=()=>[...t.container.querySelectorAll(t.itemSelector)];const h=e=>{var n,i;if(e.pointerType==="mouse"&&"button"in e&&e.button!==0){return}const o=e.target;if(!o){return}const r=o.closest(t.dragHandleSelector);if(!(r instanceof HTMLElement)){return}const d=r.closest(t.itemSelector);if(!(d instanceof HTMLElement)){return}const u=T();const l=u.indexOf(d);if(l===-1){return}e.stopPropagation();e.preventDefault();if(w!==undefined){clearTimeout(w);w=undefined}if(E){E.classList.remove(f);E=undefined}v={pointerId:e.pointerId,handle:r,item:d,originalIndex:l,currentIndex:l,id:m(d)};(n=r.setPointerCapture)===null||n===void 0?void 0:n.call(r,e.pointerId);g=document.body.style.userSelect;document.body.style.userSelect="none";p=document.body.style.cursor;document.body.style.cursor="grabbing";d.classList.add(f,c);t.container.classList.add(s);(i=t.onStart)===null||i===void 0?void 0:i.call(t,{index:l,item:d,id:v.id});document.addEventListener("pointermove",R,{passive:false});document.addEventListener("pointerup",b);document.addEventListener("pointercancel",I)};const R=e=>{if(!v){return}e.preventDefault();const n=T();if(n.length===0){return}const i=a==="vertical"?e.clientY:e.clientX;let o=n.length-1;let r=0;for(const e of n){const n=e.getBoundingClientRect();const t=a==="vertical"?n.top+n.height/2:n.left+n.width/2;if(i<t){o=r;break}r+=1}if(o<0){o=0}if(o===v.currentIndex){return}t.onPreview({fromIndex:v.currentIndex,toIndex:o,item:v.item,id:v.id});v.currentIndex=o};const x=e=>{var n,i;if(!v){return}const o=v;v=undefined;(i=(n=o.handle).releasePointerCapture)===null||i===void 0?void 0:i.call(n,o.pointerId);o.item.classList.remove(c);t.container.classList.remove(s);document.body.style.userSelect=g!==null&&g!==void 0?g:"";g=undefined;document.body.style.cursor=p!==null&&p!==void 0?p:"";p=undefined;document.removeEventListener("pointermove",R);document.removeEventListener("pointerup",b);document.removeEventListener("pointercancel",I);t.onFinalize({fromIndex:o.originalIndex,toIndex:o.currentIndex,item:o.item,id:o.id,cancelled:e});if(w!==undefined){clearTimeout(w);w=undefined}if(e||l<=0){o.item.classList.remove(f);if(E===o.item){E=undefined}return}E=o.item;const r=o.item;w=globalThis.setTimeout((()=>{r.classList.remove(f);if(E===r){E=undefined}w=undefined}),l)};const b=e=>{if(!v||e.pointerId!==v.pointerId){return}e.preventDefault();x(false)};const I=e=>{if(!v||e.pointerId!==v.pointerId){return}x(true)};t.container.addEventListener("pointerdown",h);const q=()=>{t.container.removeEventListener("pointerdown",h);if(v){x(true)}if(w!==undefined){clearTimeout(w);w=undefined}if(E){E.classList.remove(f);E=undefined}};return{destroy:q}}export{t as d};
//# sourceMappingURL=drag-to-reorder-10098109.js.map