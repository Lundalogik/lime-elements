import{r as e,c as t,h as r,H as i}from"./index-2714248e.js";import{i as o}from"./files-3445b94a.js";import{g as s}from"./get-icon-props-e3e242a2.js";import{t as a}from"./translations-106228fb.js";import{c as n}from"./random-string-355331d3.js";import"./file-metadata-1dee6296.js";const l="@charset \"UTF-8\";:host{position:relative;display:inline-block;border-radius:var(--profile-picture-border-radius, 100vw);background-color:var(--profile-picture-background-color, rgb(var(--contrast-400)))}*{box-sizing:border-box}button{all:unset;display:block}button:focus{outline:none}button:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}button.avatar{overflow:hidden;border-radius:var(--profile-picture-border-radius, 100vw)}:host(:not([disabled]):not([disabled=true])) button.avatar{transition:color var(--limel-clickable-transition-speed, 0.4s) ease, background-color var(--limel-clickable-transition-speed, 0.4s) ease, box-shadow var(--limel-clickable-transform-speed, 0.4s) ease, transform var(--limel-clickable-transform-speed, 0.4s) var(--limel-clickable-transform-timing-function, ease);cursor:pointer;color:var(--limel-theme-on-surface-color);background-color:transparent}:host(:not([disabled]):not([disabled=true])) button.avatar:hover,:host(:not([disabled]):not([disabled=true])) button.avatar:focus,:host(:not([disabled]):not([disabled=true])) button.avatar:focus-visible{will-change:color, background-color, box-shadow, transform}:host(:not([disabled]):not([disabled=true])) button.avatar:hover{transform:translate3d(0, 0.01rem, 0);color:var(--limel-theme-on-surface-color);background-color:var(--lime-elevated-surface-background-color);box-shadow:var(--button-shadow-hovered)}:host(:not([disabled]):not([disabled=true])) button.avatar:active{--limel-clickable-transform-timing-function:cubic-bezier(\n      0.83,\n      -0.15,\n      0.49,\n      1.16\n  );transform:translate3d(0, 0.05rem, 0);box-shadow:var(--button-shadow-pressed)}:host(:not([disabled]):not([disabled=true])) button.avatar:hover,:host(:not([disabled]):not([disabled=true])) button.avatar:active{--limel-clickable-transition-speed:0.2s;--limel-clickable-transform-speed:0.16s}:host([invalid]:not([invalid=false])) button.avatar{box-shadow:var(--shadow-error-state)}button.remove{transition:color var(--limel-clickable-transition-speed, 0.4s) ease, background-color var(--limel-clickable-transition-speed, 0.4s) ease, box-shadow var(--limel-clickable-transform-speed, 0.4s) ease, transform var(--limel-clickable-transform-speed, 0.4s) var(--limel-clickable-transform-timing-function, ease);cursor:pointer;color:var(--limel-theme-on-surface-color);background-color:rgb(var(--contrast-900));cursor:pointer;height:1.25rem;width:1.25rem;border-radius:50%;background-repeat:no-repeat;background-position:center;background-size:0.75rem;background-image:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><defs/><path fill='rgb(255,255,255)' d='M7.219 5.781L5.78 7.22 14.563 16 5.78 24.781 7.22 26.22 16 17.437l8.781 8.782 1.438-1.438L17.437 16l8.782-8.781L24.78 5.78 16 14.563z'/></svg>\");position:absolute;top:0;left:0;opacity:0}button.remove:hover,button.remove:focus,button.remove:focus-visible{will-change:color, background-color, box-shadow, transform}button.remove:hover{transform:translate3d(0, 0.01rem, 0);color:rgb(var(--color-white));background-color:rgb(var(--color-red-default));box-shadow:var(--button-shadow-hovered)}button.remove:active{--limel-clickable-transform-timing-function:cubic-bezier(\n      0.83,\n      -0.15,\n      0.49,\n      1.16\n  );transform:translate3d(0, 0.05rem, 0);box-shadow:var(--button-shadow-pressed)}button.remove:hover,button.remove:active{--limel-clickable-transition-speed:0.2s;--limel-clickable-transform-speed:0.16s}:host(:hover) button.remove,:host(:focus) button.remove,:host(:focus-visible) button.remove,:host(:focus-within) button.remove,:host(:active) button.remove{animation:show 0.4s ease-in-out forwards}@keyframes show{0%{transform:scale(0.9);opacity:0}100%{transform:scale(1);opacity:1}}limel-icon{padding:max(1rem, 10%);color:var(--mdc-theme-text-secondary-on-background)}button.avatar,limel-icon,img{border-radius:var(--profile-picture-border-radius, 100vw);width:var(--profile-picture-size, 2rem);height:var(--profile-picture-size, 2rem)}img{object-fit:var(--limel-profile-picture-object-fit)}";const c=class{constructor(r){e(this,r);this.change=t(this,"change",7);this.filesRejected=t(this,"filesRejected",7);this.removeButtonId=n();this.handleNewFiles=e=>{var t;e.stopPropagation();if(this.disabled){return}const r=(t=e.detail)===null||t===void 0?void 0:t[0];if(!r){return}if(!o(r,this.accept)){this.filesRejected.emit([r]);return}this.revokeObjectUrl();if(!r.href&&r.fileContent instanceof File){this.objectUrl=URL.createObjectURL(r.fileContent)}this.change.emit(r)};this.handleRejectedFiles=e=>{e.stopPropagation();this.filesRejected.emit(e.detail)};this.handleClear=e=>{e.stopPropagation();this.value=undefined;this.change.emit(undefined)};this.getTranslation=e=>a.get(e,this.language);this.language="en";this.label=undefined;this.icon="user";this.helperText=undefined;this.disabled=false;this.readonly=false;this.required=false;this.invalid=false;this.value=undefined;this.fit="cover";this.accept="image/jpeg,image/png,image/heic,.jpg,.jpeg,.png,.heic";this.objectUrl=undefined}disconnectedCallback(){this.revokeObjectUrl()}handleValueChange(){this.revokeObjectUrl()}render(){const e={"has-value":this.hasValue};if(this.readonly){return r(i,{class:e},this.renderAvatar())}return r(i,{class:e},r("limel-file-dropzone",{disabled:this.disabled,accept:this.accept,onFilesSelected:this.handleNewFiles,onFilesRejected:this.handleRejectedFiles},r("limel-file-input",{accept:this.accept,disabled:this.disabled},this.renderBrowseButton())),this.renderClearButton())}get hasValue(){if(typeof this.value==="string"){return!!this.value}if(this.value&&(this.value.href||this.value.fileContent)){return true}return!!this.objectUrl}renderBrowseButton(){return r("button",{class:"avatar",disabled:this.disabled,type:"button","aria-label":this.label,"aria-required":this.required?true:undefined,"aria-invalid":this.invalid?true:undefined},this.renderAvatar())}renderAvatar(){const e=this.getImageSrc();if(e){return r("img",{src:e,alt:"",style:{"--limel-profile-picture-object-fit":this.fit},loading:"lazy"})}return this.renderIcon()}renderIcon(){var e,t;const i=s(this.icon);return r("limel-icon",{name:i,style:{color:`${(e=this.icon)===null||e===void 0?void 0:e.color}`,"background-color":`${(t=this.icon)===null||t===void 0?void 0:t.backgroundColor}`}})}renderClearButton(){if(!this.hasValue||this.disabled){return}return[r("button",{class:"remove",id:this.removeButtonId,onClick:this.handleClear}),r("limel-tooltip",{label:this.getTranslation("profile-picture.remove"),elementId:this.removeButtonId})]}getImageSrc(){if(!this.value){return this.objectUrl}if(typeof this.value==="string"){return this.value}if(this.value.href){return this.value.href}if(this.value.fileContent instanceof File){if(!this.objectUrl){this.objectUrl=URL.createObjectURL(this.value.fileContent)}return this.objectUrl}return undefined}revokeObjectUrl(){if(this.objectUrl){URL.revokeObjectURL(this.objectUrl);this.objectUrl=undefined}}static get watchers(){return{value:["handleValueChange"]}}};c.style=l;export{c as limel_profile_picture};
//# sourceMappingURL=limel-profile-picture.entry.js.map