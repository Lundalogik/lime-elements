{"version":3,"file":"kompendium-debug.entry.cjs.js","sources":["src/components/debug/debug.tsx"],"sourcesContent":["import { Component, h, Prop } from '@stencil/core';\nimport {\n    JsonDocs,\n    JsonDocsComponent,\n    JsonDocsTag,\n} from '@stencil/core/internal';\nimport { MatchResults } from '../router/router-utils';\nimport { PropsFactory } from '../playground/playground.types';\n\n@Component({\n    tag: 'kompendium-debug',\n    shadow: true,\n})\nexport class KompendiumDebug {\n    /**\n     * The generated documentation data\n     */\n    @Prop()\n    public docs: JsonDocs;\n\n    /**\n     * Component schemas\n     */\n    @Prop()\n    public schemas: Array<Record<string, any>>;\n\n    /**\n     * Matched route parameters\n     */\n    @Prop()\n    public match: MatchResults;\n\n    /**\n     * Factory for creating props for example components\n     * @returns {Record<string, unknown>} props\n     */\n    @Prop()\n    public examplePropsFactory?: PropsFactory = () => ({});\n\n    public render(): HTMLElement {\n        const tag = this.match.params.name;\n        const component = findComponent(tag, this.docs);\n\n        return (\n            <article class=\"component\">\n                <section class=\"docs debug\">\n                    {this.renderComponent(component)}\n                </section>\n            </article>\n        );\n    }\n\n    private renderComponent(component: JsonDocsComponent) {\n        const ExampleComponent = component.tag;\n        const ownerComponent = this.docs.components.find(isOwnerOf(component));\n        const schema = this.schemas.find((s) => s.$id === ownerComponent.tag);\n        const factory = this.examplePropsFactory;\n        const props = {\n            schema: schema,\n            ...factory(ExampleComponent),\n        };\n\n        return (\n            <div class=\"show-case\">\n                <div class=\"show-case_component\">\n                    <ExampleComponent {...props} />\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction findComponent(tag: string, docs: JsonDocs) {\n    return docs.components.find((doc) => doc.tag === tag);\n}\n\nconst isOwnerOf =\n    (example: JsonDocsComponent) => (component: JsonDocsComponent) => {\n        return !!component.docsTags\n            .filter(isTag('exampleComponent'))\n            .find(hasText(example.tag));\n    };\n\nconst isTag = (name: string) => (tag: JsonDocsTag) => {\n    return tag.name === name;\n};\n\nconst hasText = (name: string) => (tag: JsonDocsTag) => {\n    return tag.text === name;\n};\n"],"names":["h"],"mappings":";;;;MAaa,eAAe,GAAA,MAAA;AAJ5B,IAAA,WAAA,CAAA,OAAA,EAAA;;AAuBI;;;AAGG;QAEI,IAAA,CAAA,mBAAmB,GAAkB,OAAO,EAAE,CAAC;AAiCzD;IA/BU,MAAM,GAAA;QACT,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI;QAClC,MAAM,SAAS,GAAG,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC;AAE/C,QAAA,QACIA,OAAA,CAAA,SAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAS,KAAK,EAAC,WAAW,EAAA,EACtBA,OAAA,CAAA,SAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAS,KAAK,EAAC,YAAY,EAAA,EACtB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAC1B,CACJ;;AAIV,IAAA,eAAe,CAAC,SAA4B,EAAA;AAChD,QAAA,MAAM,gBAAgB,GAAG,SAAS,CAAC,GAAG;AACtC,QAAA,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACtE,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,cAAc,CAAC,GAAG,CAAC;AACrE,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,mBAAmB;AACxC,QAAA,MAAM,KAAK,GAAG;AACV,YAAA,MAAM,EAAE,MAAM;YACd,GAAG,OAAO,CAAC,gBAAgB,CAAC;SAC/B;AAED,QAAA,QACIA,OAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,WAAW,EAAA,EAClBA,OAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,qBAAqB,EAAA,EAC5BA,OAAA,CAAC,gBAAgB,EAAK,EAAA,GAAA,KAAK,GAAI,CAC7B,CACJ;;;AAKlB,SAAS,aAAa,CAAC,GAAW,EAAE,IAAc,EAAA;AAC9C,IAAA,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC;AACzD;AAEA,MAAM,SAAS,GACX,CAAC,OAA0B,KAAK,CAAC,SAA4B,KAAI;AAC7D,IAAA,OAAO,CAAC,CAAC,SAAS,CAAC;AACd,SAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC;SAChC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACnC,CAAC;AAEL,MAAM,KAAK,GAAG,CAAC,IAAY,KAAK,CAAC,GAAgB,KAAI;AACjD,IAAA,OAAO,GAAG,CAAC,IAAI,KAAK,IAAI;AAC5B,CAAC;AAED,MAAM,OAAO,GAAG,CAAC,IAAY,KAAK,CAAC,GAAgB,KAAI;AACnD,IAAA,OAAO,GAAG,CAAC,IAAI,KAAK,IAAI;AAC5B,CAAC;;;;"}