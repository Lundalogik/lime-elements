{"version":3,"file":"code.js","sourceRoot":"","sources":["../../../src/components/code/code.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,KAAK,MAAM,SAAS,CAAC;AAC5B,OAAO,iCAAiC,CAAC;AACzC,OAAO,kCAAkC,CAAC;AAC1C,OAAO,kCAAkC,CAAC;AAC1C,OAAO,iCAAiC,CAAC;AACzC,OAAO,wCAAwC,CAAC;AAChD,OAAO,0CAA0C,CAAC;AAClD,OAAO,8DAA8D,CAAC;AAEtE;;GAEG;AAMH,MAAM,OAAO,IAAI;IAgBN,gBAAgB;QACnB,UAAU,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,mBAAmB;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;IAChC,CAAC;IAEM,kBAAkB;QACrB,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;QACvE,KAAK,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;IACtC,CAAC;IAED,MAAM;QACF,MAAM,SAAS,GAAG,EAAE,CAAC;QACrB,SAAS,CAAC,YAAY,IAAI,CAAC,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC;QAE9C,OAAO,CACH,4DAAK,KAAK,EAAC,MAAM;YACb,8DAAQ;YACR,4DAAK,KAAK,EAAE,SAAS;gBACjB,+DAAO,IAAI,CAAC,IAAI,CAAQ,CACtB,CACJ,CACT,CAAC;IACN,CAAC;IAEO,QAAQ;QACZ,MAAM,IAAI,GACN,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAE/C,IAAI,CAAC,IAAI,EAAE,CAAC;YACR,OAAO;QACX,CAAC;QAED,OAAO,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;aAC3B,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC;aAC/B,IAAI,CAAC,EAAE,CAAC,CAAC;IAClB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACJ","sourcesContent":["import { Component, h, Prop, Element, State } from '@stencil/core';\nimport Prism from 'prismjs';\nimport 'prismjs/components/prism-jsx.js';\nimport 'prismjs/components/prism-scss.js';\nimport 'prismjs/components/prism-less.js';\nimport 'prismjs/components/prism-tsx.js';\nimport 'prismjs/components/prism-typescript.js';\nimport 'prismjs/plugins/toolbar/prism-toolbar.js';\nimport 'prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.js';\n\n/**\n * @exampleComponent kompendium-example-code\n */\n@Component({\n    tag: 'kompendium-code',\n    styleUrl: 'code.scss',\n    shadow: true,\n})\nexport class Code {\n    /**\n     * The language of the code\n     */\n    @Prop()\n    public language: string;\n\n    /**\n     * Source code\n     */\n    @State()\n    public code: string;\n\n    @Element()\n    private host: HTMLKompendiumCodeElement;\n\n    public componentDidLoad(): void {\n        setTimeout(() => {\n            this.code = this.findCode();\n        });\n    }\n\n    public componentWillRender(): void {\n        this.code = this.findCode();\n    }\n\n    public componentDidRender(): void {\n        const container = this.host.shadowRoot.querySelector('.root pre code');\n        Prism.highlightElement(container);\n    }\n\n    render(): HTMLElement {\n        const classList = {};\n        classList[`language-${this.language}`] = true;\n\n        return (\n            <div class=\"root\">\n                <slot />\n                <pre class={classList}>\n                    <code>{this.code}</code>\n                </pre>\n            </div>\n        );\n    }\n\n    private findCode() {\n        const slot: HTMLSlotElement =\n            this.host.shadowRoot.querySelector('slot');\n\n        if (!slot) {\n            return;\n        }\n\n        return [...slot.assignedNodes()]\n            .map((node) => node.textContent)\n            .join('');\n    }\n}\n"]}