{"version":3,"file":"component.js","sourceRoot":"","sources":["../../../src/components/component/component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, Element } from '@stencil/core';\nimport {\n    JsonDocs,\n    JsonDocsComponent,\n    JsonDocsTag,\n} from '@stencil/core/internal';\nimport { MatchResults } from '../router/route-matching';\nimport { PropertyList } from './templates/props';\nimport { EventList } from './templates/events';\nimport { MethodList } from './templates/methods';\nimport { SlotList } from './templates/slots';\nimport { StyleList } from './templates/style';\nimport { ExampleList } from './templates/examples';\nimport negate from 'lodash/negate';\nimport { PropsFactory } from '../playground/playground.types';\n\n@Component({\n    tag: 'kompendium-component',\n    shadow: true,\n    styleUrl: 'component.scss',\n})\nexport class KompendiumComponent {\n    /**\n     * The generated documentation data\n     */\n    @Prop()\n    public docs: JsonDocs;\n\n    /**\n     * Component schemas\n     */\n    @Prop()\n    public schemas: Array<Record<string, any>>;\n\n    /**\n     * Matched route parameters\n     */\n    @Prop()\n    public match: MatchResults;\n\n    /**\n     * Factory for creating props for example components\n     */\n    @Prop()\n    public examplePropsFactory: PropsFactory;\n\n    @Element()\n    private host: HTMLKompendiumComponentElement;\n\n    private scrollToOnNextUpdate: string = null;\n\n    constructor() {\n        this.handleRouteChange = this.handleRouteChange.bind(this);\n    }\n\n    protected connectedCallback(): void {\n        window.addEventListener('hashchange', this.handleRouteChange);\n    }\n\n    protected disconnectedCallback(): void {\n        window.removeEventListener('hashchange', this.handleRouteChange);\n    }\n\n    protected componentDidLoad(): void {\n        const route = this.getRoute();\n        this.scrollToElement(route);\n    }\n\n    protected componentDidUpdate(): void {\n        if (this.scrollToOnNextUpdate) {\n            this.scrollToElement(this.scrollToOnNextUpdate);\n            this.scrollToOnNextUpdate = null;\n        }\n    }\n\n    private handleRouteChange() {\n        const route = this.getRoute();\n        this.scrollToOnNextUpdate = route;\n    }\n\n    private scrollToElement(id: string) {\n        const element = this.host.shadowRoot.getElementById(id);\n        if (!element) {\n            return;\n        }\n\n        element.scrollIntoView();\n    }\n\n    public render(): HTMLElement {\n        const tag = this.match.params.name;\n        const component = findComponent(tag, this.docs);\n\n        return (\n            <article class=\"component\">\n                <section class=\"docs\">\n                    {this.renderDocs(tag, component)}\n                </section>\n            </article>\n        );\n    }\n\n    private renderDocs(tag: string, component: JsonDocsComponent) {\n        let title = tag.split('-').slice(1).join(' ');\n        title = title[0].toLocaleUpperCase() + title.slice(1);\n        const examples = findExamples(component, this.docs);\n        const tags = component.docsTags\n            .filter(negate(isTag('slot')))\n            .filter(negate(isTag('exampleComponent')));\n        const schema = this.schemas.find((s) => s.$id === tag);\n\n        return [\n            <h1 id={this.getId()}>{title}</h1>,\n            <kompendium-markdown text={component.docs} />,\n            <kompendium-taglist tags={tags} />,\n            <ExampleList\n                examples={examples}\n                id={this.getId('examples')}\n                schema={schema}\n                propsFactory={this.examplePropsFactory}\n            />,\n            <PropertyList\n                props={component.props}\n                id={this.getId('properties')}\n            />,\n            <EventList events={component.events} id={this.getId('events')} />,\n            <MethodList\n                methods={component.methods}\n                id={this.getId('methods')}\n            />,\n            <SlotList slots={component.slots} id={this.getId('slots')} />,\n            <StyleList styles={component.styles} id={this.getId('styles')} />,\n        ];\n    }\n\n    private getId(name?: string) {\n        const route = this.getRoute().split('/').slice(0, 3).join('/');\n\n        return [route, name].filter((item) => !!item).join('/') + '/';\n    }\n\n    private getRoute() {\n        return location.hash.substr(1);\n    }\n}\n\nfunction findExamples(component: JsonDocsComponent, docs: JsonDocs) {\n    return component.docsTags\n        .filter(isTag('exampleComponent'))\n        .map(findComponentByTag(docs));\n}\n\nfunction findComponent(tag: string, docs: JsonDocs) {\n    return docs.components.find((doc) => doc.tag === tag);\n}\n\nconst findComponentByTag = (docs: JsonDocs) => (tag: JsonDocsTag) => {\n    return docs.components.find((component) => component.tag === tag.text);\n};\n\nconst isTag = (name: string) => (tag: JsonDocsTag) => {\n    return tag.name === name;\n};\n"]}