{"version":3,"file":"markdown-code.js","sourceRoot":"","sources":["../../src/kompendium/markdown-code.ts"],"names":[],"mappings":"AAAA,OAAO,GAAG,MAAM,gBAAgB,CAAC;AAEjC,MAAM,UAAU,cAAc;IAC1B,OAAO,WAAW,CAAC;AACvB,CAAC;AAED,SAAS,WAAW,CAAC,IAAI;IACrB,OAAO,GAAG,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;AAClC,CAAC;AAED,SAAS,WAAW,CAAC,IAAI;IACrB,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;QAC1B,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM,EAAE,CAAC;QAC1B,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC9C,IAAI,CAAC,QAAQ,EAAE,CAAC;QACZ,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,OAAO;QACH,GAAG,IAAI;QACP,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,iBAAiB;QAC1B,UAAU,EAAE;YACR,QAAQ,EAAE,QAAQ;SACrB;QACD,QAAQ,EAAE,EAAE;KACf,CAAC;AACN,CAAC;AAED,SAAS,WAAW,CAAC,KAA+B;IAChD,IAAI,CAAC,KAAK,EAAE,CAAC;QACT,OAAO;IACX,CAAC;IAED,IAAI,CAAC,CAAC,WAAW,IAAI,KAAK,CAAC,EAAE,CAAC;QAC1B,OAAO;IACX,CAAC;IAED,MAAM,aAAa,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAChD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAC/B,CAAC;IACF,IAAI,CAAC,aAAa,EAAE,CAAC;QACjB,OAAO;IACX,CAAC;IAED,OAAO,aAAa,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AAClD,CAAC","sourcesContent":["import map from 'unist-util-map';\n\nexport function kompendiumCode(): (tree) => any {\n    return transformer;\n}\n\nfunction transformer(tree) {\n    return map(tree, mapCodeNode);\n}\n\nfunction mapCodeNode(node) {\n    if (node.type !== 'element') {\n        return node;\n    }\n\n    if (node.tagName !== 'code') {\n        return node;\n    }\n\n    const language = getLanguage(node.properties);\n    if (!language) {\n        return node;\n    }\n\n    return {\n        ...node,\n        type: 'element',\n        tagName: 'kompendium-code',\n        properties: {\n            language: language,\n        },\n        children: [],\n    };\n}\n\nfunction getLanguage(props: { className?: string[] }) {\n    if (!props) {\n        return;\n    }\n\n    if (!('className' in props)) {\n        return;\n    }\n\n    const languageClass = props.className.find((name) =>\n        name.startsWith('language-'),\n    );\n    if (!languageClass) {\n        return;\n    }\n\n    return languageClass.replace('language-', '');\n}\n"]}