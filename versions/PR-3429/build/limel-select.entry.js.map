{"version":3,"names":["strings","ARIA_HIDDEN","ROLE","cssClasses","HELPER_TEXT_VALIDATION_MSG","HELPER_TEXT_VALIDATION_MSG_PERSISTENT","MDCSelectHelperTextFoundation","_super","__extends","adapter","call","this","__assign","defaultAdapter","Object","defineProperty","get","enumerable","configurable","addClass","undefined","removeClass","hasClass","setAttr","getAttr","removeAttr","setContent","prototype","getId","isVisible","content","setValidation","isValidation","setValidationMsgPersistent","isPersistent","setValidity","selectIsValid","isValidationMsg","isPersistentValidationMsg","msgShouldDisplay","showToScreenReader","hide","MDCFoundation","MDCSelectHelperText","apply","arguments","attachTo","root","foundation","getDefaultFoundation","_this","className","classList","add","remove","contains","attr","getAttribute","value","setAttribute","removeAttribute","textContent","MDCComponent","SelectTemplate","props","hasValue","hasEmptyText","isMultiple","length","text","isValid","invalid","checkValid","required","disabled","readonly","helperText","h","class","SelectValue","assign","HelperText","SelectDropdown","anchorClassList","isOpen","labelClassList","onClick","open","onKeyPress","onTriggerPress","id","label","getSelectedIcon","getSelectedText","ShowIcon","viewBox","focusable","stroke","points","name","size","trim","native","NativeDropdown","MenuDropdown","items","createMenuItems","options","containerId","visible","inheritParentWidth","containerStyle","dropdownZIndex","onDismiss","close","style","display","width","type","multiple","onChange","onMenuChange","filter","option","map","renderOption","onNativeChange","onFocus","onBlur","selectedOption","key","selected","isSelected","some","o","selectIsRequired","menuOptionFilter","getMenuOptionFilter","separator","secondaryText","getIconName","icon","color","getIconColor","iconColor","emptyReadOnlyOption","isEmptyValue","join","triggerIconColorWarning","forEach","console","warn","selectCss","Select","constructor","hostRef","hasChanged","handleMenuChange","bind","handleNativeChange","handleMenuTriggerKeyPress","openMenu","closeMenu","portalId","createRandomString","connectedCallback","initialize","componentWillLoad","isMobileDevice","host","hasAttribute","componentDidLoad","getOptionsExcludingSeparators","element","shadowRoot","querySelector","mdcFloatingLabel","MDCFloatingLabel","mdcSelectHelperText","disconnectedCallback","destroy","componentDidUpdate","menuOpen","setMenuFocus","render","getComputedStyle","getPropertyValue","watchOpen","newValue","oldValue","setTimeout","list","document","firstItem","_a","focus","setTriggerFocus","trigger","event","stopPropagation","detail","selector","menuSurface","_b","scrollPosition","scrollTop","listItems","item","change","emit","requestAnimationFrame","listItem","emitFirstChangeEvent","isEnter","ENTER","keyCode","ENTER_KEY_CODE","isSpace","SPACE","SPACE_KEY_CODE","preventDefault","Array","optionElement","find"],"sources":["./node_modules/@material/select/helper-text/constants.js","./node_modules/@material/select/helper-text/foundation.js","./node_modules/@material/select/helper-text/component.js","./src/components/select/select.template.tsx","./src/components/select/select.scss?tag=limel-select&encapsulation=shadow","./src/components/select/select.tsx"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar strings = {\n    ARIA_HIDDEN: 'aria-hidden',\n    ROLE: 'role',\n};\nvar cssClasses = {\n    HELPER_TEXT_VALIDATION_MSG: 'mdc-select-helper-text--validation-msg',\n    HELPER_TEXT_VALIDATION_MSG_PERSISTENT: 'mdc-select-helper-text--validation-msg-persistent',\n};\nexport { strings, cssClasses };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, strings } from './constants';\nvar MDCSelectHelperTextFoundation = /** @class */ (function (_super) {\n    __extends(MDCSelectHelperTextFoundation, _super);\n    function MDCSelectHelperTextFoundation(adapter) {\n        return _super.call(this, __assign(__assign({}, MDCSelectHelperTextFoundation.defaultAdapter), adapter)) || this;\n    }\n    Object.defineProperty(MDCSelectHelperTextFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCSelectHelperTextFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCSelectHelperTextFoundation, \"defaultAdapter\", {\n        /**\n         * See {@link MDCSelectHelperTextAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                setAttr: function () { return undefined; },\n                getAttr: function () { return null; },\n                removeAttr: function () { return undefined; },\n                setContent: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @return The ID of the helper text, or null if none is set.\n     */\n    MDCSelectHelperTextFoundation.prototype.getId = function () {\n        return this.adapter.getAttr('id');\n    };\n    /**\n     * @return Whether the helper text is currently visible.\n     */\n    MDCSelectHelperTextFoundation.prototype.isVisible = function () {\n        return this.adapter.getAttr(strings.ARIA_HIDDEN) !== 'true';\n    };\n    /**\n     * Sets the content of the helper text field.\n     */\n    MDCSelectHelperTextFoundation.prototype.setContent = function (content) {\n        this.adapter.setContent(content);\n    };\n    /**\n     * Sets the helper text to act as a validation message.\n     * By default, validation messages are hidden when the select is valid and\n     * visible when the select is invalid.\n     *\n     * @param isValidation True to make the helper text act as an error validation\n     *     message.\n     */\n    MDCSelectHelperTextFoundation.prototype.setValidation = function (isValidation) {\n        if (isValidation) {\n            this.adapter.addClass(cssClasses.HELPER_TEXT_VALIDATION_MSG);\n        }\n        else {\n            this.adapter.removeClass(cssClasses.HELPER_TEXT_VALIDATION_MSG);\n        }\n    };\n    /**\n     * Sets the persistency of the validation helper text.\n     * This keeps the validation message visible even if the select is valid,\n     * though it will be displayed in the normal (grey) color.\n     */\n    MDCSelectHelperTextFoundation.prototype.setValidationMsgPersistent = function (isPersistent) {\n        if (isPersistent) {\n            this.adapter.addClass(cssClasses.HELPER_TEXT_VALIDATION_MSG_PERSISTENT);\n        }\n        else {\n            this.adapter.removeClass(cssClasses.HELPER_TEXT_VALIDATION_MSG_PERSISTENT);\n        }\n    };\n    /**\n     * When acting as a validation message, shows/hides the helper text and\n     * triggers alerts as necessary based on the select's validity.\n     */\n    MDCSelectHelperTextFoundation.prototype.setValidity = function (selectIsValid) {\n        var isValidationMsg = this.adapter.hasClass(cssClasses.HELPER_TEXT_VALIDATION_MSG);\n        if (!isValidationMsg) {\n            // Non-validating helper-text is always displayed and does not participate\n            // in validation logic.\n            return;\n        }\n        var isPersistentValidationMsg = this.adapter.hasClass(cssClasses.HELPER_TEXT_VALIDATION_MSG_PERSISTENT);\n        // Validating helper text is displayed if select is invalid, unless it is\n        // set as persistent, in which case it always displays.\n        var msgShouldDisplay = !selectIsValid || isPersistentValidationMsg;\n        if (msgShouldDisplay) {\n            this.showToScreenReader();\n            // In addition to displaying, also trigger an alert if the select\n            // has become invalid.\n            if (!selectIsValid) {\n                this.adapter.setAttr(strings.ROLE, 'alert');\n            }\n            else {\n                this.adapter.removeAttr(strings.ROLE);\n            }\n            return;\n        }\n        // Hide everything.\n        this.adapter.removeAttr(strings.ROLE);\n        this.hide();\n    };\n    /**\n     * Makes the helper text visible to screen readers.\n     */\n    MDCSelectHelperTextFoundation.prototype.showToScreenReader = function () {\n        this.adapter.removeAttr(strings.ARIA_HIDDEN);\n    };\n    /**\n     * Hides the help text from screen readers.\n     */\n    MDCSelectHelperTextFoundation.prototype.hide = function () {\n        this.adapter.setAttr(strings.ARIA_HIDDEN, 'true');\n    };\n    return MDCSelectHelperTextFoundation;\n}(MDCFoundation));\nexport { MDCSelectHelperTextFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCSelectHelperTextFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { MDCSelectHelperTextFoundation } from './foundation';\nvar MDCSelectHelperText = /** @class */ (function (_super) {\n    __extends(MDCSelectHelperText, _super);\n    function MDCSelectHelperText() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCSelectHelperText.attachTo = function (root) {\n        return new MDCSelectHelperText(root);\n    };\n    Object.defineProperty(MDCSelectHelperText.prototype, \"foundationForSelect\", {\n        // Provided for access by MDCSelect component\n        get: function () {\n            return this.foundation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MDCSelectHelperText.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClass: function (className) { return _this.root.classList.add(className); },\n            removeClass: function (className) { return _this.root.classList.remove(className); },\n            hasClass: function (className) { return _this.root.classList.contains(className); },\n            getAttr: function (attr) { return _this.root.getAttribute(attr); },\n            setAttr: function (attr, value) { return _this.root.setAttribute(attr, value); },\n            removeAttr: function (attr) { return _this.root.removeAttribute(attr); },\n            setContent: function (content) {\n                _this.root.textContent = content;\n            },\n        };\n        // tslint:enable:object-literal-sort-keys\n        return new MDCSelectHelperTextFoundation(adapter);\n    };\n    return MDCSelectHelperText;\n}(MDCComponent));\nexport { MDCSelectHelperText };\n//# sourceMappingURL=component.js.map","import { ListItem, ListSeparator } from '../list/list-item.types';\nimport { Option } from '../select/option.types';\nimport { FunctionalComponent, h } from '@stencil/core';\nimport { isMultiple } from '../../util/multiple';\nimport { getIconColor, getIconName } from '../icon/get-icon-props';\n\ninterface SelectTemplateProps {\n    disabled?: boolean;\n    readonly?: boolean;\n    required?: boolean;\n    invalid?: boolean;\n    options: Array<Option | ListSeparator>;\n    value: Option | Option[];\n    label?: string;\n    helperText?: string;\n    multiple?: boolean;\n    native: boolean;\n\n    onNativeChange: (event: Event) => void;\n\n    id: string;\n    onMenuChange: (event: CustomEvent<ListItem | ListItem[]>) => void;\n    onTriggerPress: (event: KeyboardEvent) => void;\n    isOpen: boolean;\n    open: () => void;\n    close: () => void;\n    checkValid: boolean;\n\n    dropdownZIndex: string;\n}\n\nexport const SelectTemplate: FunctionalComponent<SelectTemplateProps> = (\n    props,\n) => {\n    const value = props.value;\n    let hasValue = !!props.value;\n    let hasEmptyText = true;\n    if (isMultiple(value)) {\n        hasValue = value.length > 0;\n    } else if (hasValue) {\n        hasValue = !!value.value;\n        hasEmptyText = value.text === '';\n    }\n\n    let isValid = !props.invalid;\n    if (props.checkValid && props.required && !hasValue) {\n        isValid = false;\n    }\n\n    const classList = {\n        'limel-select': true,\n        'mdc-select': true,\n        'mdc-select--outlined': true,\n        'mdc-select--disabled': props.disabled,\n        'limel-select--readonly': props.readonly,\n        'limel-select--required': props.required,\n        'limel-select--invalid': !isValid,\n        'limel-select--empty': !hasValue,\n        'limel-select--with-helper-text': typeof props.helperText === 'string',\n    };\n\n    return (\n        <div class={classList}>\n            <SelectValue\n                {...props}\n                hasValue={hasValue}\n                isValid={isValid}\n                hasEmptyText={hasEmptyText}\n            />\n            <HelperText text={props.helperText} isValid={!props.invalid} />\n            <SelectDropdown {...props} />\n        </div>\n    );\n};\n\nconst SelectValue: FunctionalComponent<\n    SelectTemplateProps & {\n        hasValue: boolean;\n        isValid: boolean;\n        hasEmptyText: boolean;\n    }\n> = (props) => {\n    const anchorClassList = {\n        'mdc-select__anchor': true,\n        'limel-select-trigger': true,\n        'limel-select--focused': props.isOpen,\n    };\n    const labelClassList = {\n        'mdc-floating-label': true,\n        'mdc-floating-label--float-above':\n            !props.hasEmptyText ||\n            props.isOpen ||\n            props.readonly ||\n            props.hasValue,\n        'mdc-floating-label--active': props.isOpen,\n    };\n\n    return (\n        <button\n            class={anchorClassList}\n            onClick={props.open}\n            onKeyPress={props.onTriggerPress}\n            aria-haspopup=\"listbox\"\n            aria-expanded={props.isOpen}\n            aria-controls={props.id}\n            aria-labelledby=\"s-label s-selected-text\"\n            aria-required={props.required}\n            disabled={props.disabled || props.readonly}\n        >\n            <span id=\"s-label\" class={labelClassList}>\n                {props.label}\n            </span>\n            <span class=\"mdc-select__selected-text-container limel-select__selected-option\">\n                {getSelectedIcon(props.value)}\n                <span\n                    id=\"s-selected-text\"\n                    class=\"mdc-select__selected-text limel-select__selected-option__text\"\n                >\n                    {getSelectedText(props.value, props.readonly)}\n                </span>\n            </span>\n            <ShowIcon {...props} isValid={props.isValid} />\n            <span class=\"mdc-select__dropdown-icon\">\n                <svg\n                    class=\"mdc-select__dropdown-icon-graphic\"\n                    viewBox=\"7 10 10 5\"\n                    focusable=\"false\"\n                >\n                    <polygon\n                        stroke=\"none\"\n                        fill-rule=\"evenodd\"\n                        points=\"7 10 12 15 17 10\"\n                    ></polygon>\n                </svg>\n            </span>\n        </button>\n    );\n};\n\nconst ShowIcon: FunctionalComponent<\n    SelectTemplateProps & {\n        isValid: boolean;\n    }\n> = (props) => {\n    if (props.isValid) {\n        return;\n    }\n\n    return (\n        <limel-icon name=\"high_importance\" size=\"medium\" class=\"invalid-icon\" />\n    );\n};\n\nconst HelperText: FunctionalComponent<{ text: string; isValid: boolean }> = (\n    props,\n) => {\n    if (typeof props.text !== 'string') {\n        return;\n    }\n\n    return (\n        <limel-helper-line\n            helperText={props.text.trim()}\n            invalid={!props.isValid}\n        />\n    );\n};\n\nconst SelectDropdown: FunctionalComponent<SelectTemplateProps> = (props) => {\n    if (props.native) {\n        return <NativeDropdown {...props} />;\n    }\n\n    return <MenuDropdown {...props} />;\n};\n\nconst MenuDropdown: FunctionalComponent<SelectTemplateProps> = (props) => {\n    const items = createMenuItems(props.options, props.value, props.required);\n\n    return (\n        <limel-portal\n            containerId={props.id}\n            visible={props.isOpen}\n            inheritParentWidth={true}\n            containerStyle={{ 'z-index': props.dropdownZIndex }}\n        >\n            <limel-menu-surface\n                open={props.isOpen}\n                onDismiss={props.close}\n                style={{\n                    '--mdc-menu-min-width': '100%',\n                    'max-height': 'inherit',\n                    display: 'flex',\n                    'min-width': '100%',\n                    width: 'fit-content',\n                }}\n            >\n                <limel-list\n                    items={items}\n                    type={props.multiple ? 'checkbox' : 'selectable'}\n                    onChange={props.onMenuChange}\n                />\n            </limel-menu-surface>\n        </limel-portal>\n    );\n};\n\nconst NativeDropdown: FunctionalComponent<SelectTemplateProps> = (props) => {\n    const options = props.options\n        .filter((option): option is Option => !('separator' in option))\n        .map(renderOption(props.value));\n\n    return (\n        <select\n            required={props.required}\n            aria-disabled={props.disabled}\n            aria-required={props.required}\n            onChange={props.onNativeChange}\n            onFocus={props.open}\n            onBlur={props.close}\n            class=\"limel-select__native-control\"\n            disabled={props.disabled}\n            multiple={props.multiple}\n        >\n            {options}\n        </select>\n    );\n};\n\nconst renderOption = (selectedOption: Option | Option[]) => {\n    return (option: Option) => {\n        const { value, disabled, text } = option;\n\n        return (\n            <option\n                key={value}\n                value={value}\n                selected={isSelected(option, selectedOption)}\n                disabled={disabled}\n            >\n                {text}\n            </option>\n        );\n    };\n};\n\nfunction isSelected(option: Option, value: Option | Option[]): boolean {\n    if (!value) {\n        return false;\n    }\n\n    if (isMultiple(value)) {\n        return value.some((o) => option.value === o.value);\n    }\n\n    return option.value === value.value;\n}\n\nfunction createMenuItems(\n    options: Array<Option | ListSeparator>,\n    value: Option | Option[],\n    selectIsRequired = false,\n): Array<ListItem<Option> | ListSeparator> {\n    const menuOptionFilter = getMenuOptionFilter(selectIsRequired);\n\n    return options.filter(menuOptionFilter).map((option) => {\n        if ('separator' in option) {\n            return {\n                text: option.text,\n                separator: true,\n            };\n        }\n\n        const selected = isSelected(option, value);\n        const { text, secondaryText, disabled } = option;\n        const name = getIconName(option.icon);\n        const color = getIconColor(option.icon, option.iconColor);\n\n        if (!name) {\n            return {\n                text: text,\n                secondaryText: secondaryText,\n                selected: selected,\n                disabled: disabled,\n                value: option,\n            };\n        }\n\n        return {\n            text: text,\n            secondaryText: secondaryText,\n            selected: selected,\n            disabled: disabled,\n            value: option,\n            icon: {\n                name: name,\n                color: color,\n            },\n        };\n    });\n}\n\nfunction getMenuOptionFilter(selectIsRequired: boolean) {\n    return (option: Option | ListSeparator) => {\n        if (!selectIsRequired) {\n            // If the select component is NOT required, we keep all options.\n            return true;\n        }\n\n        if (option.text) {\n            // If the select component IS required, we keep only options\n            // that are not \"empty\". We only check the text property, because\n            // some systems use an \"empty option\" that will have a value for\n            // the `value` property, to signify \"no option selected\". Such\n            // an option should be treated as \"empty\".\n            return true;\n        }\n\n        if ('separator' in option) {\n            return true;\n        }\n    };\n}\n\nfunction getSelectedText(value: Option | Option[], readonly: boolean): string {\n    const emptyReadOnlyOption = <span class=\"readonly-option\">â€“</span>;\n\n    const isEmptyValue = !value || (isMultiple(value) && !value.length);\n    if (isEmptyValue) {\n        return readonly ? emptyReadOnlyOption : '';\n    }\n\n    if (isMultiple(value)) {\n        return value.map((option) => option.text).join(', ');\n    }\n\n    if (readonly && (value.value === 'empty' || value.text === '')) {\n        return emptyReadOnlyOption;\n    }\n\n    return value.text;\n}\n\nfunction getSelectedIcon(value: any) {\n    if (!value?.icon) {\n        return '';\n    }\n\n    const name = getIconName(value.icon);\n    const color = getIconColor(value.icon, value.iconColor);\n    const style: any = {};\n    if (color) {\n        style.color = color;\n    }\n\n    return (\n        <limel-icon\n            class=\"limel-select__selected-option__icon\"\n            name={name}\n            size=\"medium\"\n            style={style}\n        />\n    );\n}\n\nexport function triggerIconColorWarning(options: Option[]) {\n    options.forEach((option) => {\n        if (option.iconColor) {\n            /* eslint-disable-next-line no-console */\n            console.warn(\n                \"The `iconColor` prop is deprecated now! Use the new `Icon` interface and instead of `iconColor: 'color-name'` write `icon {name: 'icon-name', color: 'color-name'}`.\",\n            );\n        }\n    });\n}\n","@use '../../style/functions';\n@use '../../style/internal/shared_input-select-picker';\n@use '../../style/mixins';\n\n@use '@material/select/styles';\n@use '@material/floating-label';\n@use '@material/floating-label/mdc-floating-label';\n\n// Note! The `--dropdown-z-index` property is used from `select.tsx`.\n/**\n * @prop --dropdown-z-index: z-index of the dropdown menu.\n */\n\n:host {\n    display: block;\n    position: relative;\n}\n\n:host([hidden]) {\n    display: none;\n}\n\n.mdc-select--outlined .mdc-floating-label {\n    left: functions.pxToRem(16);\n}\n\n.mdc-select__anchor,\n.mdc-floating-label,\n.mdc-select__selected-text {\n    // As long as this component is depended on MDC,\n    // we need to force it to be font-agnostic.\n    // When MDC-dependency is removed, this block can also be removed.\n    // However, on removal of MDC-dependency, we should also make sure to check\n    // other font-related styles that might be set by MDC,\n    // such as `letter-spacing` or `font-size`.\n    font-family: inherit;\n}\n\n.mdc-select__dropdown-icon-graphic {\n    transition: transform 0.2s ease;\n}\n\n.limel-select__selected-option {\n    display: flex;\n    align-items: center;\n\n    box-sizing: border-box;\n    outline: none;\n\n    align-self: center;\n    min-width: 0; // makes it truncate and prevents the select to grow wider than its container\n    padding: 0 0.25rem 0 1rem;\n}\n\n.limel-select__selected-option__icon {\n    margin-right: functions.pxToRem(8);\n    margin-left: functions.pxToRem(-8);\n    flex-shrink: 0;\n}\n\n.limel-select__selected-option__text {\n    .mdc-select:not(.mdc-select--disabled) & {\n        @include shared_input-select-picker.looks-like-input-label;\n    }\n    @include mixins.truncate-text;\n}\n\n.limel-select {\n    flex-wrap: wrap;\n    width: 100%;\n\n    &:not(.limel-select--readonly) {\n        .limel-select-trigger {\n            background-color: shared_input-select-picker.$background-color-focused;\n        }\n    }\n\n    .mdc-select__anchor {\n        height: functions.pxToRem(36);\n        padding-left: functions.pxToRem(0);\n    }\n    .limel-select-trigger {\n        border: none;\n        height: shared_input-select-picker.$height-of-mdc-text-field;\n        display: inline-flex;\n        align-items: center;\n\n        border-radius: functions.pxToRem(5);\n\n        .mdc-floating-label {\n            color: shared_input-select-picker.$label-color;\n            width: calc(\n                100% - #{functions.pxToRem(16)}\n            ); //This forces the label to truncate when container is too little.\n            &.mdc-floating-label--float-above {\n                font-size: shared_input-select-picker.$cropped-label-hack--font-size;\n                transform: translateY(functions.pxToRem(-27)) scale(0.75);\n            }\n        }\n    }\n\n    .limel-select-trigger,\n    .limel-select__selected-option {\n        width: 100%;\n    }\n\n    .mdc-select__dropdown-icon {\n        margin-right: 0.25rem;\n        margin-left: 0.25rem;\n    }\n\n    &.mdc-select--disabled:not(.limel-select--readonly) {\n        .limel-select-trigger {\n            @include shared_input-select-picker.looks-disabled;\n            box-shadow: var(--button-shadow-normal);\n        }\n        .mdc-select__dropdown-icon {\n            svg {\n                fill: rgb(var(--contrast-800));\n            }\n        }\n    }\n\n    &:not(.mdc-select--disabled) {\n        .mdc-select__dropdown-icon {\n            svg {\n                fill: rgb(var(--contrast-1000));\n            }\n        }\n\n        .limel-select-trigger {\n            @include mixins.is-elevated-clickable;\n            @include mixins.visualize-keyboard-focus;\n\n            &.limel-select--focused {\n                background-color: shared_input-select-picker.$background-color-focused;\n\n                .mdc-floating-label {\n                    color: var(--mdc-theme-primary);\n                }\n\n                .mdc-select__dropdown-icon {\n                    svg {\n                        fill: var(--mdc-theme-primary);\n                    }\n                }\n\n                .mdc-select__dropdown-icon-graphic {\n                    transform: rotate(-180deg);\n                }\n            }\n\n            &[aria-expanded]:not([aria-expanded='false']),\n            &[aria-expanded='true'] {\n                box-shadow: var(--button-shadow-inset-pressed);\n            }\n        }\n    }\n\n    .readonly-option {\n        position: absolute;\n        top: 1.145rem;\n    }\n\n    &.limel-select--required {\n        .mdc-floating-label::after {\n            content: '*';\n        }\n    }\n\n    &.limel-select--invalid {\n        .limel-select__selected-option__text,\n        .invalid-icon {\n            color: var(--lime-error-text-color);\n        }\n        .mdc-floating-label:not(.mdc-floating-label--float-above) {\n            max-width: calc(\n                100% - #{functions.pxToRem(64)}\n            ); // leaves space for the invalid-icon\n        }\n    }\n}\n\n.invalid-icon {\n    flex-shrink: 0;\n}\n\nselect.limel-select__native-control {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    border: 0;\n}\n\n@import './partial-styles/_readonly';\n@import './partial-styles/_helper-text';\n","import { ListItem, ListSeparator } from '../list/list-item.types';\nimport { Option } from '../select/option.types';\nimport { MDCFloatingLabel } from '@material/floating-label';\nimport { MDCSelectHelperText } from '@material/select/helper-text';\nimport {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Prop,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { isMobileDevice } from '../../util/device';\nimport {\n    ENTER,\n    ENTER_KEY_CODE,\n    SPACE,\n    SPACE_KEY_CODE,\n} from '../../util/keycodes';\nimport { isMultiple } from '../../util/multiple';\nimport { createRandomString } from '../../util/random-string';\nimport { SelectTemplate, triggerIconColorWarning } from './select.template';\n\n/**\n * @exampleComponent limel-example-select\n * @exampleComponent limel-example-select-with-icons\n * @exampleComponent limel-example-select-with-separators\n * @exampleComponent limel-example-select-with-secondary-text\n * @exampleComponent limel-example-select-multiple\n * @exampleComponent limel-example-select-with-empty-option\n * @exampleComponent limel-example-select-preselected\n * @exampleComponent limel-example-select-change-options\n * @exampleComponent limel-example-select-dialog\n */\n@Component({\n    tag: 'limel-select',\n    shadow: true,\n    styleUrl: 'select.scss',\n})\nexport class Select {\n    /**\n     * Set to `true` to make the field disabled.\n     * and visually shows that the `select` component is editable but disabled.\n     * This tells the users that if certain requirements are met,\n     * the component may become interactable.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Set to `true` to make the field read-only.\n     * This visualizes the component slightly differently.\n     * But shows no visual sign indicating that the component is disabled\n     * or can ever become interactable.\n     */\n    @Prop({ reflect: true })\n    public readonly = false;\n\n    /**\n     * Set to `true` to indicate that the current value of the select is\n     * invalid.\n     */\n    @Prop({ reflect: true })\n    public invalid: boolean;\n\n    /**\n     * True if the control requires a value.\n     */\n    @Prop({ reflect: true })\n    public required = false;\n\n    /**\n     * Text to display next to the select.\n     */\n    @Prop({ reflect: true })\n    public label: string;\n\n    /**\n     * Optional helper text to display below the input field when it has focus.\n     */\n    @Prop({ reflect: true })\n    public helperText: string;\n\n    /**\n     * Currently selected value or values.\n     * If `multiple` is `true`, this must be an array. Otherwise it must be a\n     * single value.\n     */\n    @Prop()\n    public value: Option | Option[];\n\n    /**\n     * List of options.\n     */\n    @Prop()\n    public options: Array<Option | ListSeparator> = [];\n\n    /**\n     * Set to `true` to allow multiple values to be selected.\n     */\n    @Prop()\n    public multiple: boolean = false;\n\n    /**\n     * Emitted when the value is changed.\n     */\n    @Event()\n    private change: EventEmitter<Option | Option[]>;\n\n    @Element()\n    private host: HTMLLimelSelectElement;\n\n    @State()\n    private menuOpen: boolean = false;\n\n    private hasChanged: boolean = false;\n    private checkValid: boolean = false;\n    private mdcSelectHelperText: MDCSelectHelperText;\n    private mdcFloatingLabel: MDCFloatingLabel;\n    private isMobileDevice: boolean;\n    private portalId: string;\n\n    constructor() {\n        this.handleMenuChange = this.handleMenuChange.bind(this);\n        this.handleNativeChange = this.handleNativeChange.bind(this);\n        this.handleMenuTriggerKeyPress =\n            this.handleMenuTriggerKeyPress.bind(this);\n        this.openMenu = this.openMenu.bind(this);\n        this.closeMenu = this.closeMenu.bind(this);\n\n        this.portalId = createRandomString();\n    }\n\n    public connectedCallback() {\n        this.initialize();\n    }\n\n    public componentWillLoad() {\n        this.isMobileDevice = isMobileDevice();\n\n        // It should not be possible to render the native select for consumers, but we still want to make it testable.\n        // We can set this attribute in tests to force rendering of the native select\n        if (this.host.hasAttribute('data-native')) {\n            this.isMobileDevice = true;\n        }\n    }\n\n    public componentDidLoad() {\n        this.initialize();\n        triggerIconColorWarning(this.getOptionsExcludingSeparators());\n    }\n\n    private initialize() {\n        let element: HTMLElement;\n        element = this.host.shadowRoot.querySelector('.mdc-floating-label');\n        if (!element) {\n            return;\n        }\n\n        this.mdcFloatingLabel = new MDCFloatingLabel(element);\n\n        element = this.host.shadowRoot.querySelector('.mdc-select-helper-text');\n        if (element) {\n            this.mdcSelectHelperText = new MDCSelectHelperText(element);\n        }\n    }\n\n    public disconnectedCallback() {\n        if (this.mdcFloatingLabel) {\n            this.mdcFloatingLabel.destroy();\n        }\n\n        if (this.mdcSelectHelperText) {\n            this.mdcSelectHelperText.destroy();\n        }\n    }\n\n    public componentDidUpdate() {\n        if (this.menuOpen) {\n            this.setMenuFocus();\n        }\n    }\n\n    public render() {\n        const dropdownZIndex = getComputedStyle(this.host).getPropertyValue(\n            '--dropdown-z-index',\n        );\n\n        return (\n            <SelectTemplate\n                id={this.portalId}\n                disabled={this.disabled || this.readonly}\n                readonly={this.readonly}\n                required={this.required}\n                invalid={this.invalid}\n                label={this.label}\n                helperText={this.helperText}\n                value={this.value}\n                options={this.options}\n                onMenuChange={this.handleMenuChange}\n                onNativeChange={this.handleNativeChange}\n                onTriggerPress={this.handleMenuTriggerKeyPress}\n                multiple={this.multiple}\n                isOpen={this.menuOpen}\n                open={this.openMenu}\n                close={this.closeMenu}\n                checkValid={this.checkValid}\n                native={this.isMobileDevice}\n                dropdownZIndex={dropdownZIndex}\n            />\n        );\n    }\n\n    @Watch('menuOpen')\n    protected watchOpen(newValue: boolean, oldValue: boolean) {\n        if (this.checkValid) {\n            return;\n        }\n\n        // Menu was closed for the first time\n        if (!newValue && oldValue) {\n            this.checkValid = true;\n        }\n    }\n\n    private setMenuFocus() {\n        if (this.isMobileDevice) {\n            return;\n        }\n\n        setTimeout(() => {\n            const list: HTMLElement = document.querySelector(\n                `#${this.portalId} limel-menu-surface limel-list`,\n            );\n            const firstItem: HTMLElement =\n                list?.shadowRoot?.querySelector('[tabindex]');\n\n            if (firstItem) {\n                firstItem.focus();\n            }\n        });\n    }\n\n    private setTriggerFocus() {\n        const trigger: HTMLElement = this.host.shadowRoot.querySelector(\n            '.limel-select-trigger',\n        );\n        trigger.focus();\n    }\n\n    private handleMenuChange(\n        event: CustomEvent<Array<ListItem<Option>> | ListItem<Option>>,\n    ) {\n        event.stopPropagation();\n\n        if (isMultiple(event.detail)) {\n            const selector = `#${this.portalId} limel-menu-surface`;\n            const menuSurface = document\n                .querySelector(selector)\n                ?.shadowRoot?.querySelector('.mdc-menu-surface');\n            const scrollPosition = menuSurface?.scrollTop || 0;\n\n            const listItems: ListItem[] = event.detail;\n            const options: Option[] = listItems.map((item) => item.value);\n            this.change.emit(options);\n\n            // Using a single requestAnimationFrame or setTimeout doesn't\n            // work. Using two nested `requestAnimationFrame` worked most of\n            // the time, but not always. Using `setTimeout` inside the\n            // `requestAnimationFrame` seems to work consistently. /Ads\n            requestAnimationFrame(() => {\n                setTimeout(() => {\n                    menuSurface.scrollTop = scrollPosition;\n                });\n            });\n\n            return;\n        }\n\n        if (!event.detail.selected) {\n            return;\n        }\n\n        const listItem: ListItem = event.detail;\n        const option: Option = listItem.value;\n        if (option.disabled) {\n            return;\n        }\n\n        this.change.emit(option);\n        this.menuOpen = false;\n        this.setTriggerFocus();\n    }\n\n    private openMenu() {\n        if (this.emitFirstChangeEvent()) {\n            this.hasChanged = true;\n            this.change.emit(this.getOptionsExcludingSeparators()[0]);\n        }\n\n        this.menuOpen = true;\n    }\n\n    private emitFirstChangeEvent() {\n        return !this.hasChanged && this.isMobileDevice && !this.value;\n    }\n\n    private closeMenu() {\n        this.menuOpen = false;\n        this.setTriggerFocus();\n    }\n\n    private handleMenuTriggerKeyPress(event: KeyboardEvent) {\n        const isEnter = event.key === ENTER || event.keyCode === ENTER_KEY_CODE;\n        const isSpace = event.key === SPACE || event.keyCode === SPACE_KEY_CODE;\n\n        if (!this.menuOpen && (isSpace || isEnter)) {\n            event.stopPropagation();\n            event.preventDefault();\n            this.menuOpen = true;\n        }\n    }\n\n    private handleNativeChange(event: Event) {\n        event.stopPropagation();\n\n        const element: HTMLSelectElement = this.host.shadowRoot.querySelector(\n            'select.limel-select__native-control',\n        );\n        const options = Array.apply(null, element.options) // eslint-disable-line prefer-spread\n            .filter((optionElement: HTMLOptionElement) => {\n                return !!optionElement.selected;\n            })\n            .map((optionElement: HTMLOptionElement) => {\n                return this.getOptionsExcludingSeparators().find(\n                    (o) => o.value === optionElement.value,\n                );\n            });\n\n        if (this.multiple) {\n            this.change.emit(options);\n\n            return;\n        }\n\n        this.change.emit(options[0]);\n        this.menuOpen = false;\n    }\n\n    private getOptionsExcludingSeparators(): Option[] {\n        return this.options.filter(\n            (option): option is Option => !('separator' in option),\n        );\n    }\n}\n"],"mappings":"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"}