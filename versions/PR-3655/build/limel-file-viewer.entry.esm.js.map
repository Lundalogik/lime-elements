{"version":3,"file":"limel-file-viewer.entry.esm.js","sources":["src/components/file-viewer/extension-mapping.tsx","src/components/file-viewer/fullscreen.ts","src/components/file-viewer/file-viewer.scss?tag=limel-file-viewer&encapsulation=shadow","src/components/file-viewer/file-viewer.tsx"],"sourcesContent":["/**\n *\n * @param fileName\n * @param url\n */\nexport function detectExtension(fileName, url): any {\n    const pathLike = fileName || url;\n    if (!pathLike) {\n        return 'unknown';\n    }\n\n    const extension = pathLike.split('.').pop().toLowerCase();\n    const extensionsToTypes = {\n        pdf: 'pdf',\n        jpg: 'image',\n        jpeg: 'image',\n        heic: 'image',\n        bmp: 'image',\n        png: 'image',\n        gif: 'image',\n        svg: 'image',\n        svgz: 'image',\n        ep: 'image',\n        eps: 'image',\n        avi: 'video',\n        flv: 'video',\n        h264: 'video',\n        mov: 'video',\n        mp4: 'video',\n        mwv: 'video',\n        mkv: 'video',\n        mp3: 'audio',\n        wav: 'audio',\n        wma: 'audio',\n        ogg: 'audio',\n        txt: 'text',\n        json: 'text',\n        html: 'text',\n        xml: 'text',\n        // Word\n        doc: 'office',\n        docx: 'office',\n        odt: 'office',\n        dot: 'office',\n        dotx: 'office',\n        docm: 'office', // not supported\n        dotm: 'office', // not yet tested\n        // Presentation\n        pot: 'office', // not tested\n        ppt: 'office',\n        pptx: 'office',\n        odp: 'office',\n        potx: 'office', // not supported\n        potm: 'office', // not supported\n        pps: 'office',\n        ppsx: 'office',\n        ppsm: 'office', // not supported\n        pptm: 'office', // not supported\n        ppam: 'office', // not tested\n        pages: 'office', // not supported (Apple)\n        // Spreadsheet\n        xls: 'office',\n        xlsx: 'office',\n        xlsm: 'office',\n        xlsb: 'office',\n        ods: 'office',\n        csv: 'office', // not supported\n        numbers: 'office', // not supported (Apple)\n    };\n\n    return extensionsToTypes[extension] || 'unknown';\n}\n","export class Fullscreen {\n    private enter: () => void;\n    private exit: () => void;\n\n    constructor(element: any) {\n        this.enter =\n            element.requestFullscreen ||\n            element.msRequestFullscreen ||\n            element.mozRequestFullScreen ||\n            element.webkitRequestFullscreen;\n        this.enter = this.enter.bind(element);\n        const doc: any = window.document;\n        this.exit =\n            doc.exitFullscreen ||\n            doc.msExitFullscreen ||\n            doc.mozCancelFullScreen ||\n            doc.webkitExitFullscreen;\n    }\n\n    public requestFullscreen = () => {\n        if (this.enter) {\n            this.enter();\n        }\n    };\n\n    public exitFullscreen = () => {\n        if (this.exit) {\n            this.exit.bind(window.document)();\n        }\n    };\n\n    public toggle = () => {\n        const doc: any = window.document;\n        const isFullscreen =\n            doc.fullscreenElement ||\n            doc.mozFullScreenElement ||\n            doc.webkitFullscreenElement ||\n            doc.msFullscreenElement;\n\n        if (isFullscreen) {\n            this.exitFullscreen();\n        } else {\n            this.requestFullscreen();\n        }\n    };\n\n    public isSupported(): boolean {\n        return !!this.requestFullscreen;\n    }\n}\n","@use '../../style/internal/shared_input-select-picker';\n@use '../../style/mixins';\n\n$size-of-buttons: 2rem;\n\n:host {\n    isolation: isolate;\n    position: relative;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n}\n\n* {\n    box-sizing: border-box;\n}\n\nimg,\nvideo,\naudio,\nobject,\niframe {\n    max-height: 100%;\n    max-width: 100%;\n    box-sizing: border-box;\n}\n\niframe {\n    border: none;\n    width: 100%;\n    height: 100%;\n    min-height: 20rem; // makes sure to get minimum comfortable space for viewing office files, and Microsoft Office viewers toolbars\n}\n\nimg {\n    min-width: 7rem;\n    object-fit: contain; // increases or decreases the size of the image to fill the box whilst preserving its aspect-ratio.\n}\n\nvideo {\n    width: 100%;\n    height: auto;\n}\n\naudio {\n    width: 100%;\n}\n\nobject {\n    width: 100%;\n    height: 100%;\n}\n\nobject[type='application/pdf'] {\n    min-height: 20rem;\n    // makes sure to get browsers' native controls for the PDF\n}\n\nobject[type='text/plain'] {\n    border-radius: 0.25rem;\n    padding-right: $size-of-buttons;\n\n    overflow-y: auto;\n}\n\n@mixin plain-text-in-fullscreen {\n    background-color: rgb(var(--color-gray-darker));\n\n    object[type='text/plain'] {\n        max-width: 50rem;\n        max-height: calc(100% - 2rem);\n    }\n}\n\n:host(:fullscreen) {\n    @include plain-text-in-fullscreen;\n}\n:host(:-webkit-full-screen) {\n    // this is repetition of the previous block,\n    // but needed for Safari to work.\n    // Cannot write SCSS rules for `:host` using commas for some reason.\n    // e.g.: `:host(:fullscreen), :host(:-webkit-full-screen)`.\n    // So you have to repeat it sadly.\n    @include plain-text-in-fullscreen;\n}\n\n@import './partial-styles/ui-controls.scss';\n","import {\n    Component,\n    Element,\n    h,\n    Prop,\n    State,\n    Event,\n    EventEmitter,\n    Watch,\n} from '@stencil/core';\nimport { Languages } from '../date-picker/date.types';\nimport { ListItem } from '../list-item/list-item.types';\nimport translate from '../../global/translations';\nimport { detectExtension } from './extension-mapping';\nimport { Fullscreen } from './fullscreen';\nimport { FileType, OfficeViewer } from './file-viewer.types';\nimport { LimelMenuCustomEvent } from '../../components';\n\n/**\n * This is a smart component that automatically detects\n * the most common file types such as image, audio, video, and text,\n * and properly displays them in the browser.\n * The component is also capable to render the most common office files.\n *\n * :::note\n * Image files will always be contained in their containers, which means\n * they automatically increase or decrease in size to fill their containing box\n * whilst preserving their aspect-ratio.\n *\n * Text and PDF files will also always respect the width and height of the\n * container in which the `limel-file-viewer` is loaded.\n * :::\n *\n * For some file types such as text and images, the component will display a\n * download button and a button to open the file in a new browser tab.\n * This will allow users to preview the file in a fullscreen mode with the\n * browser and take advantage of for example native zooming and panning\n * functionalities.\n *\n * @exampleComponent limel-example-file-viewer-basic\n * @exampleComponent limel-example-file-viewer-office\n * @exampleComponent limel-example-file-viewer-filename\n * @exampleComponent limel-example-file-viewer-inbuilt-actions\n * @exampleComponent limel-example-file-viewer-custom-actions\n * @exampleComponent limel-example-file-viewer-with-picker\n *\n * @beta\n */\n\n@Component({\n    tag: 'limel-file-viewer',\n    shadow: true,\n    styleUrl: 'file-viewer.scss',\n})\nexport class FileViewer {\n    /**\n     * Link to the file\n     */\n    @Prop({ reflect: true })\n    public url: string;\n\n    /**\n     * The name of the file that must also contains its extension.\n     * This overrides the filename that the `url` ends with.\n     * Useful when the `url` does not contain the filename.\n     * When specified, the `filename` will be used as filename of\n     * the downloaded file.\n     */\n    @Prop({ reflect: true })\n    public filename?: string;\n\n    /**\n     * An optional alternative text, mainly for assistive technologies and screen readers.\n     * It is used for only image files, as an `alt` attribute.\n     * Should optimally hold a description of the image,\n     * which is also displayed on the page if the image can't be loaded for some reason.\n     */\n    @Prop({ reflect: true })\n    public alt?: string;\n\n    /**\n     * Displays a button that allows the user to view the file\n     * in fullscreen mode.\n     * Not displayed for office files!\n     */\n    @Prop({ reflect: true })\n    public allowFullscreen?: boolean = false;\n\n    /**\n     * Displays a button that allows the user to open the file\n     * in a new browser tab.\n     * Not displayed for office files!\n     */\n    @Prop({ reflect: true })\n    public allowOpenInNewTab?: boolean = false;\n\n    /**\n     * Displays a button that allows the user to download the file.\n     * Note that due to the browser's security policies,\n     * the file should be hosted on the same domain\n     * for the download button to work properly.\n     * Not displayed for office files!\n     */\n    @Prop({ reflect: true })\n    public allowDownload?: boolean = false;\n\n    /**\n     * Defines the localization for translations.\n     */\n    @Prop()\n    public language: Languages = 'en';\n\n    /**\n     * Defines the third-party viewer that should be used to render\n     * the content of office files, such as word processing documents,\n     * presentations, or spreadsheets.\n     */\n    @Prop({ reflect: true })\n    public officeViewer: OfficeViewer = 'microsoft-office';\n\n    /**\n     * An array of custom actions that can be displayed\n     * as an action menu on the file which is being displayed.\n     */\n    @Prop()\n    public actions: ListItem[];\n\n    /**\n     * Emitted when a custom action is selected from the action menu.\n     */\n    @Event()\n    public action: EventEmitter<ListItem>;\n\n    @Element()\n    public HostElement: HTMLLimelFileViewerElement;\n\n    private fullscreen: Fullscreen;\n\n    @State()\n    private isFullscreen: boolean = false;\n\n    @State()\n    private fileType: FileType;\n\n    /**\n     * True while the file is being loaded.\n     */\n    @State()\n    private loading: boolean = true;\n\n    @State()\n    private fileUrl: string = '';\n\n    constructor() {\n        this.fullscreen = new Fullscreen(this.HostElement);\n    }\n\n    public async componentWillLoad() {\n        this.fileType = detectExtension(this.filename, this.url);\n        await this.createURL(this.fileType);\n    }\n\n    public render() {\n        if (!this.isOfficeFileAccessibleViaURL) {\n            return this.renderNoFileSupportMessage();\n        }\n\n        if (this.loading) {\n            return <limel-spinner size=\"x-small\" limeBranded={false} />;\n        }\n\n        return this.renderFileViewer();\n    }\n\n    @Watch('url')\n    protected async watchUrl(newUrl: string, oldUrl: string) {\n        if (newUrl === oldUrl) {\n            return;\n        }\n\n        this.loading = true;\n        this.fileType = detectExtension(this.filename, this.fileUrl);\n        await this.createURL(this.fileType);\n    }\n\n    private renderFileViewer() {\n        const fileViewerFunctions = {\n            pdf: this.renderPdf,\n            image: this.renderImage,\n            video: this.renderVideo,\n            audio: this.renderAudio,\n            text: this.renderText,\n            office: this.renderOffice,\n        };\n        const fileViewerFunction =\n            fileViewerFunctions[this.fileType] ||\n            this.renderNoFileSupportMessage;\n\n        return fileViewerFunction();\n    }\n\n    private renderPdf = () => {\n        return [\n            <div class=\"action-menu-for-pdf-files\">\n                {this.renderActionMenu()}\n            </div>,\n            <iframe src={this.sanitizeUrl(this.fileUrl)} loading=\"lazy\" />,\n        ];\n    };\n\n    private renderImage = () => {\n        return [\n            this.renderButtons(),\n            <img\n                src={this.sanitizeUrl(this.fileUrl)}\n                alt={this.alt}\n                loading=\"lazy\"\n            />,\n        ];\n    };\n\n    private renderVideo = () => {\n        return (\n            <video controls>\n                <source src={this.sanitizeUrl(this.fileUrl)} />\n            </video>\n        );\n    };\n\n    private renderAudio = () => {\n        return (\n            <audio controls>\n                <source src={this.sanitizeUrl(this.fileUrl)} />\n            </audio>\n        );\n    };\n\n    private renderText = () => {\n        const fallbackContent = [this.renderNoFileSupportMessage()];\n\n        return [\n            this.renderButtons(),\n            <object data={this.sanitizeUrl(this.fileUrl)} type=\"text/plain\">\n                {fallbackContent}\n            </object>,\n        ];\n    };\n\n    private renderOffice = () => {\n        return [\n            <div class=\"action-menu-for-office-files\">\n                {this.renderActionMenu()}\n            </div>,\n            <iframe\n                src={\n                    this.getOfficeViewerUrl() +\n                    encodeURIComponent(this.sanitizeUrl(this.fileUrl)) +\n                    '&embedded=true'\n                }\n                loading=\"lazy\"\n            />,\n        ];\n    };\n\n    private isOfficeFileAccessibleViaURL = () => {\n        return (\n            this.fileType === 'office' &&\n            !(\n                this.fileUrl.startsWith('http://') ||\n                this.fileUrl.startsWith('https://')\n            )\n        );\n    };\n\n    private getOfficeViewerUrl = () => {\n        const officeViewers = {\n            'microsoft-office':\n                'https://view.officeapps.live.com/op/embed.aspx?src=',\n            'google-drive': 'https://docs.google.com/gview?url=',\n        };\n\n        return officeViewers[this.officeViewer];\n    };\n\n    private renderNoFileSupportMessage = () => {\n        return (\n            <div class=\"no-support\" role=\"alert\">\n                <h1>⚠️</h1>\n                <p>\n                    {this.getTranslation(\n                        'file-viewer.message.unsupported-filetype'\n                    )}\n                </p>\n                <p style={{ textAlign: 'center', margin: '0 auto' }}>\n                    {this.getTranslation(\n                        'file-viewer.message.try-other-options'\n                    )}\n                </p>\n                {this.renderDownloadButton()}\n            </div>\n        );\n    };\n\n    private renderButtons = () => {\n        return (\n            <div class=\"buttons\">\n                {this.renderActionMenu()}\n                {this.renderToggleFullscreenButton()}\n                {this.renderDownloadButton()}\n                {this.renderOpenInNewTabButton()}\n            </div>\n        );\n    };\n\n    private renderToggleFullscreenButton = () => {\n        if (!this.allowFullscreen || !this.fullscreen.isSupported()) {\n            return;\n        }\n\n        const icon = this.isFullscreen ? 'multiply' : 'fit_to_width';\n\n        const label = this.isFullscreen\n            ? this.getTranslation('file-viewer.exit-fullscreen')\n            : this.getTranslation('file-viewer.open-in-fullscreen');\n\n        return [\n            <button\n                class=\"button--toggle-fullscreen\"\n                id=\"tooltip-toggle-fullscreen\"\n                role=\"button\"\n                onClick={this.handleToggleFullscreen}\n            >\n                <limel-icon name={icon} />\n                <limel-tooltip\n                    label={label}\n                    elementId=\"tooltip-toggle-fullscreen\"\n                    openDirection=\"left\"\n                />\n            </button>,\n        ];\n    };\n\n    private renderDownloadButton = () => {\n        if (!this.allowDownload || this.isFullscreen) {\n            return;\n        }\n\n        return (\n            <a\n                class=\"button--download\"\n                id=\"tooltip-download\"\n                role=\"button\"\n                download={this.filename ?? ''}\n                href={this.sanitizeUrl(this.fileUrl)}\n                target=\"_blank\"\n            >\n                <limel-icon name=\"download_2\" />\n                <limel-tooltip\n                    label={this.getTranslation('file-viewer.download')}\n                    elementId=\"tooltip-download\"\n                    openDirection=\"left\"\n                />\n            </a>\n        );\n    };\n\n    private renderOpenInNewTabButton = () => {\n        if (!this.allowOpenInNewTab || this.isFullscreen) {\n            return;\n        }\n\n        return (\n            <a\n                class=\"button--new-tab\"\n                id=\"tooltip-new-tab\"\n                role=\"button\"\n                href={this.sanitizeUrl(this.fileUrl)}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n            >\n                <limel-icon name=\"external_link\" />\n                <limel-tooltip\n                    label={this.getTranslation('file-viewer.open-in-new-tab')}\n                    elementId=\"tooltip-new-tab\"\n                    openDirection=\"left\"\n                />\n            </a>\n        );\n    };\n\n    private renderActionMenu = () => {\n        if (!this.actions || this.isFullscreen) {\n            return;\n        }\n\n        return (\n            <limel-menu\n                class=\"action-menu\"\n                items={this.actions}\n                onSelect={this.emitOnAction}\n                open-direction=\"left\"\n            >\n                <button\n                    class=\"button--action\"\n                    id=\"tooltip-more\"\n                    role=\"button\"\n                    slot=\"trigger\"\n                >\n                    <limel-icon name=\"menu_2\" />\n                    <limel-tooltip\n                        label={this.getTranslation('file-viewer.more-actions')}\n                        elementId=\"tooltip-more\"\n                        openDirection=\"left\"\n                    />\n                </button>\n            </limel-menu>\n        );\n    };\n\n    private createURL = async (fileType: string) => {\n        if (['pdf'].includes(fileType)) {\n            const response = await fetch(this.url);\n            const blob = await response.blob();\n\n            this.fileUrl = URL.createObjectURL(blob);\n        } else {\n            this.fileUrl = this.url;\n        }\n\n        this.loading = false;\n    };\n\n    private handleToggleFullscreen = () => {\n        if (this.fullscreen.isSupported()) {\n            this.fullscreen.toggle();\n            this.isFullscreen = !this.isFullscreen;\n        }\n    };\n\n    private emitOnAction = (event: LimelMenuCustomEvent<ListItem>) => {\n        event.stopPropagation();\n        this.action.emit(event.detail);\n    };\n\n    private sanitizeUrl(url: string): string {\n        try {\n            const u = new URL(url, window.location.href);\n            const allowed = ['http:', 'https:', 'blob:'];\n            return allowed.includes(u.protocol) ? u.href : '';\n        } catch {\n            return '';\n        }\n    }\n\n    private getTranslation(key: string) {\n        return translate.get(key, this.language);\n    }\n}\n"],"names":[],"mappings":"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"}