{"version":3,"file":"link-helper-5KsJICvh.js","sources":["src/util/link-helper.ts"],"sourcesContent":["/**\n *\n * @param value\n */\nexport function getHref(value: string) {\n    const href = value ? String(value.trim()) : '';\n    if (isValid(href)) {\n        return href;\n    }\n\n    return prependProtocol(href);\n}\n\n/**\n *\n * @param value\n */\nexport function getTarget(value: string) {\n    const url = getHref(value);\n    if (isRelativeLink(url)) {\n        return '_self';\n    }\n\n    return '_blank';\n}\n\n/**\n *\n * @param input\n */\nexport function prependProtocol(input: string) {\n    if (!input) {\n        return input;\n    }\n\n    return 'https://' + input;\n}\n\nfunction isValid(href: string) {\n    return (\n        hasKnownProtocol(href) ||\n        isRelativeLink(href) ||\n        hasRelativeProtocol(href)\n    );\n}\n\n/**\n *\n * @param input\n */\nexport function hasKnownProtocol(input: string) {\n    const knownProtocols = [\n        'ftp',\n        'ftps',\n        'https',\n        'http',\n\n        // `file` may or may not work, due to cross-origin restrictions and browser settings.\n        'file',\n\n        // m-files is a protocol used by the M-Files desktop app or something.\n        // It's not a web protocol, but it allows open M-Files links in their app.\n        'm-files',\n    ];\n\n    return knownProtocols.some((knownProtocol) => {\n        return input.startsWith(knownProtocol + '://');\n    });\n}\n\nfunction isRelativeLink(input: string) {\n    if (hasRelativeProtocol(input)) {\n        return false;\n    }\n\n    return input.startsWith('/') || input.startsWith('#');\n}\n\nfunction hasRelativeProtocol(input: string) {\n    return input.startsWith('//');\n}\n\n/**\n * Returns the appropriate `rel` attribute value for a link.\n *\n * If an explicit `rel` value is provided, it will be used.\n * Otherwise, when `target` is `_blank`, automatically returns\n * `\"noopener noreferrer\"` for improved security.\n *\n * @param target - The target attribute value (e.g., \"_blank\", \"_self\")\n * @param explicitRel - An explicitly provided rel attribute value\n * @returns The rel attribute value to use, or undefined if none needed\n */\nexport function getRel(target?: string | null, explicitRel?: string | null) {\n    if (explicitRel !== undefined) {\n        return explicitRel.trim() || undefined;\n    }\n\n    if (target?.trim().toLowerCase() === '_blank') {\n        return 'noopener noreferrer';\n    }\n}\n"],"names":[],"mappings":"AAAA;;;AAGG;AACG,SAAU,OAAO,CAAC,KAAa,EAAA;AACjC,IAAA,MAAM,IAAI,GAAG,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,GAAG,EAAE;AAC9C,IAAA,IAAI,OAAO,CAAC,IAAI,CAAC,EAAE;AACf,QAAA,OAAO,IAAI;;AAGf,IAAA,OAAO,eAAe,CAAC,IAAI,CAAC;AAChC;AAEA;;;AAGG;AACG,SAAU,SAAS,CAAC,KAAa,EAAA;AACnC,IAAA,MAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC;AAC1B,IAAA,IAAI,cAAc,CAAC,GAAG,CAAC,EAAE;AACrB,QAAA,OAAO,OAAO;;AAGlB,IAAA,OAAO,QAAQ;AACnB;AAEA;;;AAGG;AACG,SAAU,eAAe,CAAC,KAAa,EAAA;IACzC,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,KAAK;;IAGhB,OAAO,UAAU,GAAG,KAAK;AAC7B;AAEA,SAAS,OAAO,CAAC,IAAY,EAAA;AACzB,IAAA,QACI,gBAAgB,CAAC,IAAI,CAAC;QACtB,cAAc,CAAC,IAAI,CAAC;AACpB,QAAA,mBAAmB,CAAC,IAAI,CAAC;AAEjC;AAEA;;;AAGG;AACG,SAAU,gBAAgB,CAAC,KAAa,EAAA;AAC1C,IAAA,MAAM,cAAc,GAAG;QACnB,KAAK;QACL,MAAM;QACN,OAAO;QACP,MAAM;;QAGN,MAAM;;;QAIN,SAAS;KACZ;AAED,IAAA,OAAO,cAAc,CAAC,IAAI,CAAC,CAAC,aAAa,KAAI;QACzC,OAAO,KAAK,CAAC,UAAU,CAAC,aAAa,GAAG,KAAK,CAAC;AAClD,KAAC,CAAC;AACN;AAEA,SAAS,cAAc,CAAC,KAAa,EAAA;AACjC,IAAA,IAAI,mBAAmB,CAAC,KAAK,CAAC,EAAE;AAC5B,QAAA,OAAO,KAAK;;AAGhB,IAAA,OAAO,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC;AACzD;AAEA,SAAS,mBAAmB,CAAC,KAAa,EAAA;AACtC,IAAA,OAAO,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC;AACjC;AAEA;;;;;;;;;;AAUG;AACa,SAAA,MAAM,CAAC,MAAsB,EAAE,WAA2B,EAAA;AACtE,IAAA,IAAI,WAAW,KAAK,SAAS,EAAE;AAC3B,QAAA,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,SAAS;;AAG1C,IAAA,IAAI,CAAA,MAAM,KAAN,IAAA,IAAA,MAAM,uBAAN,MAAM,CAAE,IAAI,EAAA,CAAG,WAAW,EAAE,MAAK,QAAQ,EAAE;AAC3C,QAAA,OAAO,qBAAqB;;AAEpC;;;;"}