{"version":3,"file":"limel-example-table-remote.entry.esm.js","sources":["src/components/table/examples/table.scss?tag=limel-example-table-remote&encapsulation=shadow","src/components/table/examples/table-remote.tsx"],"sourcesContent":[":host {\n    display: block;\n}\n\nlimel-table {\n    height: 300px;\n}\n","import { Component, h, State } from '@stencil/core';\nimport { Column, TableParams, ColumnSorter } from '@limetech/lime-elements';\nimport { data, Bird } from './birds';\nimport { capitalize } from 'lodash-es';\n\nconst NETWORK_DELAY = 500;\ntype BirdRow = Bird & { id: string };\n\n/**\n * Remote sorting and pagination\n *\n * @sourceFile birds.ts\n */\n@Component({\n    tag: 'limel-example-table-remote',\n    styleUrl: 'table.scss',\n    shadow: true,\n})\nexport class TableExampleRemote {\n    private columns: Array<Column<Bird>> = [];\n\n    @State()\n    private currentData: BirdRow[] = [];\n\n    private allData: Bird[] = data;\n\n    private pageSize = 10;\n\n    private currentPage: number;\n\n    public componentWillLoad() {\n        this.columns = [\n            { title: 'Name', field: 'name' },\n            { title: 'Binominal name', field: 'binominalName' },\n            {\n                title: 'Wingspan',\n                field: 'wingspan',\n                formatter: this.addUnit('cm'),\n            },\n            { title: 'Nest type', field: 'nest', formatter: capitalize },\n            {\n                title: 'Eggs per clutch',\n                horizontalAlign: 'right',\n                field: 'eggs',\n                aggregator: this.calculateAverage,\n            },\n            { title: 'Origin', field: 'origin' },\n        ];\n    }\n\n    private addUnit = (unit: string) => (value: any) => {\n        return `${value} ${unit}`;\n    };\n\n    private handleLoad = (event: CustomEvent<TableParams>) => {\n        console.log('Loading new data', event.detail);\n        const sorter = event.detail.sorters[0];\n\n        this.currentPage = event.detail.page;\n        if (sorter) {\n            this.allData = [...data].sort(this.compareBy(sorter));\n        }\n\n        this.loadData();\n    };\n\n    /**\n     * This will only handle how to compare strings. This means the two number\n     * columns in the example will not be sorted in the correct way\n     * @param sorter\n     */\n    private compareBy = (sorter: ColumnSorter) => (a: Bird, b: Bird) => {\n        const column = sorter.column;\n        const fieldA = a[column.field];\n        const fieldB = b[column.field];\n\n        if (sorter.direction === 'ASC') {\n            return String(fieldA).localeCompare(String(fieldB));\n        }\n\n        return String(fieldB).localeCompare(String(fieldA));\n    };\n\n    /**\n     * Calculate the average value for a column for all the available data\n     *\n     * `values` and `rowsData` are not needed in this example since they only\n     * contain the values for the data that is currently loaded in the table\n     * @param column\n     * @param values\n     * @param rowsData\n     */\n    private calculateAverage(column: Column, values: any[], rowsData: Bird[]) {\n        console.log(values, rowsData);\n\n        const total = data.reduce((sum: number, value: Bird) => {\n            return sum + value[column.field];\n        }, 0);\n\n        return total / data.length;\n    }\n\n    /**\n     * Simulate some network delay, like loading data from a server\n     */\n    private loadData() {\n        setTimeout(() => {\n            const start = (this.currentPage - 1) * this.pageSize;\n            const end = start + this.pageSize;\n\n            this.currentData = this.allData\n                .slice(start, end)\n                .map((item, index) => ({\n                    ...item,\n                    // Provide a stable id to keep scroll position and selection\n                    // intact while the remote dataset refreshes.\n                    id: `${item.binominalName}-${start + index}`,\n                }));\n        }, NETWORK_DELAY);\n    }\n\n    public render() {\n        return (\n            <limel-table\n                mode=\"remote\"\n                data={this.currentData}\n                columns={this.columns}\n                pageSize={this.pageSize}\n                totalRows={data.length}\n                onLoad={this.handleLoad}\n            />\n        );\n    }\n}\n"],"names":[],"mappings":"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"}