import{r as e,h as t,H as s}from"./index-BWUkXc2p.js";const i=class{constructor(t){e(this,t);this.value="Copy an image file and paste it here.";this.uploadImageFails=false;this.metadata={links:[],images:[]};this.handleFailedThumbnailChange=e=>{this.uploadImageFails=e.detail};this.handleChange=e=>{this.value=e.detail};this.handleImagePasted=async e=>{const t=e.detail;t.insertThumbnail();const s=await this.uploadImage(t.fileInfo);if(s){t.insertImage(s)}else{t.insertFailedThumbnail()}};this.uploadImage=async e=>{try{const e=await new Promise(((e,t)=>{setTimeout((()=>{if(this.uploadImageFails){t("Server error")}else{e("https://cdn.lime-crm.com/mail-addin-logo.png")}}),2e3)}));return e}catch(t){console.error(`Failed to upload image ${e.filename}: ${t}`)}};this.handleMetadataChange=e=>{const t=this.getRemovedImages(this.metadata,e.detail);for(const e of t){if(e.state==="success"){this.removeImage(e)}}this.metadata=e.detail}}render(){return t(s,{key:"5bd8527663b4d2e62b0c29fc456cc06cc5828d16"},t("limel-text-editor",{key:"2ee4a9e9a4844d5293b31ace728d2c9a32c1f180",value:this.value,onChange:this.handleChange,onImagePasted:this.handleImagePasted,onMetadataChange:this.handleMetadataChange}),t("limel-checkbox",{key:"26227240fc85dec5326f16c6a7563e967bd728ea",label:"Upload image fails - insert failed thumbnail",onChange:this.handleFailedThumbnailChange}),t("limel-example-value",{key:"09c009c8c98dc67fb5c3611793632da0c318b6ed",label:"Value",value:this.value}))}getRemovedImages(e,t){const s=new Set(t.images.map((e=>e.fileInfoId)));return e.images.filter((e=>!s.has(e.fileInfoId)))}removeImage(e){console.log(`Image removed: ${e.fileInfoId}`)}};export{i as limel_example_text_editor_with_inline_images_file_storage};
//# sourceMappingURL=limel-example-text-editor-with-inline-images-file-storage.entry.js.map