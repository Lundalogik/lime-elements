import{r as e,h as t,H as a}from"./index-BWUkXc2p.js";const s=class{constructor(t){e(this,t);this.value="Copy an image file and paste it here.";this.uploadImageFails=false;this.metadata={links:[],images:[]};this.handleFailedThumbnailChange=e=>{this.uploadImageFails=e.detail};this.handleChange=e=>{this.value=e.detail};this.handleImagePasted=async e=>{const t=e.detail;t.insertThumbnail();const a=await this.uploadImage(t.fileInfo);if(a){t.insertImage(a)}else{t.insertFailedThumbnail()}};this.uploadImage=async e=>{try{const e=await new Promise(((e,t)=>{setTimeout((()=>{if(this.uploadImageFails){t("Server error")}else{e("https://cdn.lime-crm.com/mail-addin-logo.png")}}),2e3)}));return e}catch(t){console.error(`Failed to upload image ${e.filename}: ${t}`)}};this.handleMetadataChange=e=>{const t=this.getRemovedImages(this.metadata,e.detail);for(const e of t){if(e.state==="success"){this.removeImage(e)}}this.metadata=e.detail}}render(){return t(a,{key:"31abd89432ff85a965e8f8b402729fba4631ea08"},t("limel-text-editor",{key:"a175601297bed3b1bd9901af2249f060698be8e5",value:this.value,onChange:this.handleChange,onImagePasted:this.handleImagePasted,onMetadataChange:this.handleMetadataChange}),t("limel-checkbox",{key:"d38f2efcb51af34b915527435f616ad00a97c8ea",label:"Upload image fails - insert failed thumbnail",onChange:this.handleFailedThumbnailChange}),t("limel-example-value",{key:"eccbe0106c9491816f5c951a6d9ce9ac116be072",label:"Value",value:this.value}))}getRemovedImages(e,t){const a=new Set(t.images.map((e=>e.fileInfoId)));return e.images.filter((e=>!a.has(e.fileInfoId)))}removeImage(e){console.log(`Image removed: ${e.fileInfoId}`)}};export{s as limel_example_text_editor_with_inline_images_file_storage};
//# sourceMappingURL=limel-example-text-editor-with-inline-images-file-storage.entry.js.map