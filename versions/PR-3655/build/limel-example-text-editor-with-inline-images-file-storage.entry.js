import{r as e,h as t,H as s}from"./index-BWUkXc2p.js";const i=class{constructor(t){e(this,t);this.value="Copy an image file and paste it here.";this.uploadImageFails=false;this.metadata={links:[],images:[]};this.handleFailedThumbnailChange=e=>{this.uploadImageFails=e.detail};this.handleChange=e=>{this.value=e.detail};this.handleImagePasted=async e=>{const t=e.detail;t.insertThumbnail();const s=await this.uploadImage(t.fileInfo);if(s){t.insertImage(s)}else{t.insertFailedThumbnail()}};this.uploadImage=async e=>{try{const e=await new Promise(((e,t)=>{setTimeout((()=>{if(this.uploadImageFails){t("Server error")}else{e("https://cdn.lime-crm.com/mail-addin-logo.png")}}),2e3)}));return e}catch(t){console.error(`Failed to upload image ${e.filename}: ${t}`)}};this.handleMetadataChange=e=>{const t=this.getRemovedImages(this.metadata,e.detail);for(const e of t){if(e.state==="success"){this.removeImage(e)}}this.metadata=e.detail}}render(){return t(s,{key:"8cde5a533d558311c71fc3c8a14b1734f5280411"},t("limel-text-editor",{key:"e4d63e273adc73d80556fa01c12c2c3ef2528885",value:this.value,onChange:this.handleChange,onImagePasted:this.handleImagePasted,onMetadataChange:this.handleMetadataChange}),t("limel-checkbox",{key:"279b55079d6949489bed4b90ce6bde81aeba397c",label:"Upload image fails - insert failed thumbnail",onChange:this.handleFailedThumbnailChange}),t("limel-example-value",{key:"615488b7958c1dc11a48eee33514786acb7a71de",label:"Value",value:this.value}))}getRemovedImages(e,t){const s=new Set(t.images.map((e=>e.fileInfoId)));return e.images.filter((e=>!s.has(e.fileInfoId)))}removeImage(e){console.log(`Image removed: ${e.fileInfoId}`)}};export{i as limel_example_text_editor_with_inline_images_file_storage};
//# sourceMappingURL=limel-example-text-editor-with-inline-images-file-storage.entry.js.map