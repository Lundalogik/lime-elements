{"version":3,"file":"files-CkgibGPZ.js","sources":["src/util/files.ts"],"sourcesContent":["import { FileInfo } from '../global/shared-types/file.types';\nimport {\n    getFileBackgroundColor,\n    getFileColor,\n    getFileExtensionTitle,\n    getFileIcon,\n} from './file-metadata';\n\n/**\n *\n * @param file\n */\nexport function createFileInfo(file: File): FileInfo {\n    const limeFile: FileInfo = {\n        id: crypto.randomUUID(),\n        filename: file.name,\n        contentType: file.type,\n        size: file.size,\n        fileContent: file,\n    };\n    limeFile.icon = {\n        name: getFileIcon(limeFile),\n        title: getFileExtensionTitle(limeFile),\n        color: getFileColor(limeFile),\n        backgroundColor: getFileBackgroundColor(limeFile),\n    };\n\n    return limeFile;\n}\n\n/**\n *\n * @param file\n * @param accept\n */\nexport function isTypeAccepted(file: FileInfo, accept?: string): boolean {\n    if (accept === undefined || accept === '*') {\n        return true;\n    }\n\n    const acceptList = accept.split(',').map((raw) => raw.trim());\n\n    return acceptList.some((acceptedType: string) => {\n        if (acceptedType === file.contentType) {\n            return true;\n        }\n\n        if (acceptedType.endsWith('/*')) {\n            const baseType = acceptedType.split('/')[0];\n\n            return file.contentType.startsWith(`${baseType}/`);\n        }\n\n        if (acceptedType.startsWith('.')) {\n            const fileType = acceptedType.split('.')[1];\n\n            return file.contentType.endsWith(`/${fileType}`);\n        }\n    });\n}\n"],"names":[],"mappings":";;AAQA;;;AAGG;AACG,SAAU,cAAc,CAAC,IAAU,EAAA;AACrC,IAAA,MAAM,QAAQ,GAAa;AACvB,QAAA,EAAE,EAAE,MAAM,CAAC,UAAU,EAAE;QACvB,QAAQ,EAAE,IAAI,CAAC,IAAI;QACnB,WAAW,EAAE,IAAI,CAAC,IAAI;QACtB,IAAI,EAAE,IAAI,CAAC,IAAI;AACf,QAAA,WAAW,EAAE,IAAI;KACpB;IACD,QAAQ,CAAC,IAAI,GAAG;AACZ,QAAA,IAAI,EAAE,WAAW,CAAC,QAAQ,CAAC;AAC3B,QAAA,KAAK,EAAE,qBAAqB,CAAC,QAAQ,CAAC;AACtC,QAAA,KAAK,EAAE,YAAY,CAAC,QAAQ,CAAC;AAC7B,QAAA,eAAe,EAAE,sBAAsB,CAAC,QAAQ,CAAC;KACpD;AAED,IAAA,OAAO,QAAQ;AACnB;AAEA;;;;AAIG;AACa,SAAA,cAAc,CAAC,IAAc,EAAE,MAAe,EAAA;IAC1D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,GAAG,EAAE;AACxC,QAAA,OAAO,IAAI;;IAGf,MAAM,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;AAE7D,IAAA,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC,YAAoB,KAAI;AAC5C,QAAA,IAAI,YAAY,KAAK,IAAI,CAAC,WAAW,EAAE;AACnC,YAAA,OAAO,IAAI;;AAGf,QAAA,IAAI,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YAC7B,MAAM,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAE3C,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAG,EAAA,QAAQ,CAAG,CAAA,CAAA,CAAC;;AAGtD,QAAA,IAAI,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;YAC9B,MAAM,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAE3C,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAI,CAAA,EAAA,QAAQ,CAAE,CAAA,CAAC;;AAExD,KAAC,CAAC;AACN;;;;"}