{"version":3,"file":"limel-example-drag-handle-horizontal.entry.esm.js","sources":["src/components/drag-handle/examples/drag-handle-horizontal.scss?tag=limel-example-drag-handle-horizontal&encapsulation=shadow","src/components/drag-handle/examples/drag-handle-horizontal.tsx"],"sourcesContent":["@use '../../../style/mixins.scss';\n\n:host {\n    display: block;\n}\n\ndiv {\n    max-width: 100%;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 1rem;\n}\n\nlimel-drag-handle {\n    margin-left: auto;\n}\n\nlimel-card {\n    @include mixins.is-draggable-item(\n        $border-radius-while-being-dragged: 0.95rem\n    );\n}\n","import { Component, h, Host, State } from '@stencil/core';\nimport Sortable, { SortableEvent } from 'sortablejs';\n\ninterface KittenCard {\n    id: string;\n    image: {\n        src: string;\n        alt: string;\n    };\n    subheading: string;\n}\n\nconst DRAG_HANDLE_SELECTOR = '[data-drag-handle]';\nconst DRAGGABLE_ITEM_SELECTOR = 'limel-card.kitten-card';\nconst DEFAULT_DRAGGING_CLASS = 'is-being-dragged';\nconst DEFAULT_CONTAINER_CLASS = 'has-an-item-which-is-being-dragged';\nconst DEFAULT_DROP_ELEVATION_CLASS = 'is-elevated';\nconst DROP_ELEVATION_DURATION = 1000;\n/**\n * Horizontal drag handle\n * This example shows how to use the drag handle component\n * together with SortableJS to enable horizontal drag-and-drop ordering.\n */\n@Component({\n    shadow: true,\n    tag: 'limel-example-drag-handle-horizontal',\n    styleUrl: 'drag-handle-horizontal.scss',\n})\nexport class DragHandleHorizontalExample {\n    @State()\n    private kittens: KittenCard[] = [\n        {\n            id: 'kitten-1',\n            image: {\n                src: 'https://images.unsplash.com/photo-1621238224334-20222c044b84?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@paracetamol',\n            },\n            subheading: \"@paracetamol's kitten\",\n        },\n        {\n            id: 'kitten-2',\n            image: {\n                src: 'https://images.unsplash.com/photo-1558674378-e4334d4fecc2?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@bliss1002',\n            },\n            subheading: \"@bliss1002's kitten\",\n        },\n        {\n            id: 'kitten-3',\n            image: {\n                src: 'https://images.unsplash.com/photo-1692962063951-0b5c81887f3d?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@kmly',\n            },\n            subheading: \"@kmly's kitten\",\n        },\n    ];\n\n    private container?: HTMLDivElement;\n    private sortable?: Sortable;\n    private dropElevationTimeout?: ReturnType<typeof setTimeout>;\n    private dropElevationTarget?: HTMLElement;\n\n    public render() {\n        return (\n            <Host>\n                <h4>Drag & sort these kittens</h4>\n                <p>More cute â†’ Less cute</p>\n                <div class=\"kitten-list\" ref={this.setContainer}>\n                    {this.kittens.map((kitten) => (\n                        <limel-card\n                            class=\"kitten-card\"\n                            key={kitten.id}\n                            clickable={true}\n                            image={kitten.image}\n                            subheading={kitten.subheading}\n                            onClick={this.handleClick}\n                            data-reorder-id={kitten.id}\n                        >\n                            <limel-drag-handle\n                                dragDirection=\"horizontal\"\n                                slot=\"component\"\n                            />\n                        </limel-card>\n                    ))}\n                </div>\n            </Host>\n        );\n    }\n\n    private readonly handleClick = (event: MouseEvent) => {\n        console.log('Card clicked', event.currentTarget);\n    };\n\n    private readonly setContainer = (element?: HTMLDivElement) => {\n        if (this.container === element) {\n            return;\n        }\n\n        this.teardownSortable();\n        this.container = element ?? undefined;\n        this.setupSortable();\n    };\n\n    private setupSortable() {\n        if (!this.container) {\n            return;\n        }\n\n        if (this.sortable) {\n            this.sortable.option('handle', DRAG_HANDLE_SELECTOR);\n            this.sortable.option('draggable', DRAGGABLE_ITEM_SELECTOR);\n            this.sortable.option('disabled', false);\n            return;\n        }\n\n        this.sortable = Sortable.create(this.container, {\n            animation: 150,\n            direction: 'horizontal',\n            handle: DRAG_HANDLE_SELECTOR,\n            draggable: DRAGGABLE_ITEM_SELECTOR,\n            chosenClass: DEFAULT_DRAGGING_CLASS,\n            onStart: this.handleSortStart,\n            onEnd: this.handleSortEnd,\n        });\n    }\n\n    private teardownSortable() {\n        if (this.sortable) {\n            this.sortable.destroy();\n            this.sortable = undefined;\n        }\n\n        this.clearDropElevationTimer();\n\n        if (this.dropElevationTarget) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n            this.dropElevationTarget = undefined;\n        }\n\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n    }\n\n    private readonly handleSortStart = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.add(DEFAULT_CONTAINER_CLASS);\n        }\n\n        if (event.item instanceof HTMLElement) {\n            this.applyDropElevation(event.item);\n        }\n    };\n\n    private readonly handleSortEnd = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n\n        const { oldIndex, newIndex } = event;\n\n        if (event.item instanceof HTMLElement) {\n            this.dropElevationTarget = event.item;\n        }\n\n        if (\n            typeof oldIndex !== 'number' ||\n            typeof newIndex !== 'number' ||\n            oldIndex === newIndex\n        ) {\n            this.scheduleDropElevationRemoval();\n            return;\n        }\n\n        this.kittens = this.moveKitten(this.kittens, oldIndex, newIndex);\n        this.scheduleDropElevationRemoval();\n    };\n\n    private applyDropElevation(item: HTMLElement) {\n        if (this.dropElevationTarget && this.dropElevationTarget !== item) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n        }\n\n        this.clearDropElevationTimer();\n        item.classList.add(DEFAULT_DROP_ELEVATION_CLASS);\n        this.dropElevationTarget = item;\n    }\n\n    private scheduleDropElevationRemoval() {\n        if (!this.dropElevationTarget) {\n            return;\n        }\n\n        const target = this.dropElevationTarget;\n        this.clearDropElevationTimer();\n        this.dropElevationTimeout = globalThis.setTimeout(() => {\n            target.classList.remove(DEFAULT_DROP_ELEVATION_CLASS);\n            if (this.dropElevationTarget === target) {\n                this.dropElevationTarget = undefined;\n            }\n            this.dropElevationTimeout = undefined;\n        }, DROP_ELEVATION_DURATION);\n    }\n\n    private clearDropElevationTimer() {\n        if (this.dropElevationTimeout !== undefined) {\n            clearTimeout(this.dropElevationTimeout);\n            this.dropElevationTimeout = undefined;\n        }\n    }\n\n    private moveKitten(\n        list: KittenCard[],\n        fromIndex: number,\n        toIndex: number\n    ): KittenCard[] {\n        if (fromIndex === toIndex) {\n            return list;\n        }\n\n        const updated = [...list];\n        const [moved] = updated.splice(fromIndex, 1);\n\n        if (!moved) {\n            return list;\n        }\n\n        updated.splice(toIndex, 0, moved);\n        return updated;\n    }\n\n    public disconnectedCallback() {\n        this.teardownSortable();\n    }\n}\n"],"names":[],"mappings":"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"}