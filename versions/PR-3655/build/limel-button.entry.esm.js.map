{"version":3,"file":"limel-button.entry.esm.js","sources":["src/components/button/button.scss?tag=limel-button&encapsulation=shadow","src/components/button/button.tsx"],"sourcesContent":["@use '../../style/functions';\n@use '../../style/mixins';\n\n:host {\n    display: inline-block;\n}\n\n:host([hidden]) {\n    display: none;\n}\n\n@include mixins.visualize-aria-expanded('button');\n\nbutton.mdc-button {\n    // As long as this component is depended on MDC,\n    // we need to force it to be font-agnostic.\n    // When MDC-dependency is removed, this block can also be removed.\n    // However, on removal of MDC-dependency, we should also make sure to check\n    // other font-related styles that might be set by MDC,\n    // such as `letter-spacing` or `font-size`.\n    font-family: inherit;\n}\n\nbutton {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.125rem;\n\n    border: none;\n    border-radius: 0.4rem;\n    padding: {\n        top: 0;\n        right: var(--button-padding-right, 0.5rem);\n        bottom: 0;\n        left: var(--button-padding-left, 0.5rem);\n    }\n\n    min-height: 2.25rem;\n    width: 100%;\n\n    &:disabled {\n        cursor: not-allowed;\n\n        &.outlined {\n            border-color: rgba(var(--contrast-1700), 0.2);\n        }\n    }\n\n    &:not(:disabled) {\n        @include mixins.is-elevated-clickable();\n        @include mixins.visualize-keyboard-focus;\n    }\n\n    :host(limel-button[primary]) & {\n        &:not(:disabled) {\n            color: var(\n                --lime-on-primary-color,\n                var(--limel-theme-on-primary-color)\n            );\n            background-color: var(\n                --lime-primary-color,\n                var(--limel-theme-primary-color)\n            );\n        }\n        &:disabled {\n            background-color: rgba(var(--contrast-1700), 0.15);\n        }\n    }\n\n    :host(limel-button:not([primary])) & {\n        &:not(:disabled) {\n            color: var(--lime-primary-color, var(--limel-theme-primary-color));\n        }\n        &:disabled {\n            color: rgba(var(--contrast-1600), 0.37);\n            background-color: rgba(var(--contrast-1600), 0.1);\n        }\n    }\n}\n\n.label {\n    font-size: var(--limel-theme-default-font-size);\n    font-weight: 600;\n    letter-spacing: functions.pxToRem(0.5);\n    padding: 0 0.25rem;\n}\n\nlimel-spinner {\n    position: absolute;\n}\n\nlimel-icon {\n    width: 1.25rem;\n    flex-shrink: 0;\n    vertical-align: top;\n}\n\nsvg {\n    height: functions.pxToRem(30);\n    opacity: 0;\n    pointer-events: none;\n    position: absolute;\n    width: functions.pxToRem(30);\n\n    line {\n        stroke: rgb(var(--contrast-600));\n        stroke-width: 2;\n    }\n}\n\nlimel-icon,\n.label,\nlimel-spinner,\nsvg {\n    transition: opacity 300ms ease-in-out;\n}\n\n.loading {\n    limel-icon,\n    .label {\n        opacity: 0;\n    }\n    limel-spinner {\n        opacity: 1;\n    }\n}\n\n.just-loaded,\n.just-failed {\n    limel-icon,\n    .label {\n        opacity: 0;\n    }\n    svg {\n        opacity: 1;\n    }\n}\n\n.just-failed {\n    background-color: var(--limel-theme-error-color) !important;\n    animation: shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;\n}\n\n.outlined {\n    border: 1px solid;\n    border-color: var(--lime-primary-color, var(--limel-theme-primary-color));\n}\n\n@keyframes shake {\n    10%,\n    90% {\n        transform: translate3d(#{functions.pxToRem(-1)}, 0, 0);\n    }\n\n    20%,\n    80% {\n        transform: translate3d(#{functions.pxToRem(2)}, 0, 0);\n    }\n\n    30%,\n    50%,\n    70% {\n        transform: translate3d(#{functions.pxToRem(-3)}, 0, 0);\n    }\n\n    40%,\n    60% {\n        transform: translate3d(#{functions.pxToRem(3)}, 0, 0);\n    }\n}\n\n@import './partial-styles/_has-reduced-presence';\n","import { Component, h, Prop, State, Watch, Element, Host } from '@stencil/core';\nimport {\n    makeEnterClickable,\n    removeEnterClickable,\n} from '../../util/make-enter-clickable';\nimport { Icon } from '../../global/shared-types/icon.types';\nimport { getIconName, getIconTitle } from '../icon/get-icon-props';\n\n/**\n * @exampleComponent limel-example-button-basic\n * @exampleComponent limel-example-button-primary\n * @exampleComponent limel-example-button-outlined\n * @exampleComponent limel-example-button-disabled\n * @exampleComponent limel-example-button-icon\n * @exampleComponent limel-example-button-loading\n * @exampleComponent limel-example-button-click-success\n * @exampleComponent limel-example-button-click-fail\n * @exampleComponent limel-example-button-reduce-presence\n * @exampleComponent limel-example-button-colors\n * @exampleComponent limel-example-button-composite\n */\n@Component({\n    tag: 'limel-button',\n    shadow: { delegatesFocus: true },\n    styleUrl: 'button.scss',\n})\nexport class Button {\n    /**\n     * The text to show on the button.\n     */\n    @Prop({ reflect: true })\n    public label: string;\n\n    /**\n     * Set to `true` to make the button primary.\n     */\n    @Prop({ reflect: true })\n    public primary = false;\n\n    /**\n     * Set to `true` to make the button outlined.\n     */\n    @Prop({ reflect: true })\n    public outlined = false;\n\n    /**\n     * Set icon for the button\n     */\n    @Prop({ reflect: true })\n    public icon: string | Icon;\n\n    /**\n     * Set to `true` to disable the button.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Set to `true` to put the button in the `loading` state.\n     * This also disables the button.\n     */\n    @Prop({ reflect: true })\n    public loading = false;\n\n    /**\n     * Set to `true` to indicate failure instead of success when the button is\n     * no longer in the `loading` state.\n     */\n    @Prop({ reflect: true })\n    public loadingFailed = false;\n\n    @State()\n    private justLoaded = false;\n\n    @Element()\n    private host: HTMLElement;\n\n    private justLoadedTimeout?: number;\n\n    public componentWillLoad() {\n        makeEnterClickable(this.host);\n    }\n\n    public disconnectedCallback() {\n        removeEnterClickable(this.host);\n    }\n\n    public render() {\n        return (\n            <Host onClick={this.filterClickWhenDisabled}>\n                <button\n                    class={{\n                        loading: this.loading,\n                        'just-loaded': this.justLoaded && !this.loadingFailed,\n                        'just-failed': this.justLoaded && this.loadingFailed,\n                        outlined: this.outlined,\n                    }}\n                    disabled={this.disabled || this.loading}\n                    aria-busy={this.loading ? 'true' : 'false'}\n                    aria-live=\"polite\"\n                >\n                    {this.renderIcon(this.icon)}\n                    {this.renderLabel()}\n                    {this.renderSpinner()}\n                    <svg viewBox=\"0 0 30 30\">{this.renderLoadingIcons()}</svg>\n                </button>\n            </Host>\n        );\n    }\n\n    @Watch('loading')\n    protected loadingWatcher(newValue: boolean, oldValue: boolean) {\n        const hasFinishedLoading = this.hasFinishedLoading(newValue, oldValue);\n        if (hasFinishedLoading) {\n            this.handleLoadingFinished();\n        } else if (newValue) {\n            this.handleLoadingStarted();\n        }\n    }\n\n    private hasFinishedLoading(newValue: boolean, oldValue: boolean) {\n        return oldValue && !newValue;\n    }\n\n    private handleLoadingFinished() {\n        this.justLoaded = true;\n        const TIMEOUT = 2000;\n        this.justLoadedTimeout = window.setTimeout(() => {\n            this.justLoaded = false;\n        }, TIMEOUT);\n    }\n\n    private handleLoadingStarted() {\n        this.justLoaded = false;\n        window.clearTimeout(this.justLoadedTimeout);\n    }\n\n    private renderLoadingIcons() {\n        if (this.loadingFailed) {\n            return [\n                <line x1=\"9\" y1=\"9\" x2=\"21\" y2=\"21\" />,\n                <line x1=\"21\" y1=\"9\" x2=\"9\" y2=\"21\" />,\n            ];\n        }\n\n        return [\n            <line x1=\"8\" y1=\"14\" x2=\"15\" y2=\"20\" />,\n            <line x1=\"23\" y1=\"9\" x2=\"14\" y2=\"20\" />,\n        ];\n    }\n\n    private renderIcon(icon?: string | Icon) {\n        const iconName = getIconName(icon);\n        if (!iconName) {\n            return;\n        }\n\n        const title = getIconTitle(icon);\n\n        if (!this.label && !title) {\n            const WARNING_MESSAGE =\n                '⚠️ Accessibility warning: `limel-button` has no `label` and its `icon` has no `title`. ' +\n                'This creates an inaccessible button for screen reader users. ' +\n                'Please add either a `label`, a `title` to the `icon`, or use a `limel-tooltip`. ' +\n                'See https://lundalogik.github.io/lime-elements/versions/latest/#/component/limel-button/ ' +\n                'for more information.';\n\n            console.warn(WARNING_MESSAGE);\n        }\n\n        let iconColor: string | undefined;\n\n        if (typeof icon === 'object') {\n            iconColor = icon.color;\n        }\n\n        const iconProps = {\n            role: 'presentation',\n            name: iconName,\n            'aria-label': title,\n            'aria-hidden': title ? null : 'true', // Use null instead of 'false' to remove attribute\n            style: {\n                color: iconColor,\n            },\n        };\n\n        return <limel-icon {...iconProps} />;\n    }\n\n    private renderLabel() {\n        if (!this.label) {\n            return;\n        }\n\n        return <span class=\"label\">{this.label}</span>;\n    }\n\n    private renderSpinner() {\n        if (!this.loading) {\n            return;\n        }\n\n        return <limel-spinner limeBranded={false} />;\n    }\n\n    private filterClickWhenDisabled = (e) => {\n        if (this.disabled) {\n            e.preventDefault();\n        }\n    };\n}\n"],"names":[],"mappings":"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"}