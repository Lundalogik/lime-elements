{"version":3,"names":["dragHandleHorizontalCss","DRAG_HANDLE_SELECTOR","DRAGGABLE_ITEM_SELECTOR","DEFAULT_DRAGGING_CLASS","DEFAULT_CONTAINER_CLASS","DEFAULT_DROP_ELEVATION_CLASS","DROP_ELEVATION_DURATION","DragHandleHorizontalExample","constructor","hostRef","this","kittens","id","image","src","alt","subheading","handleClick","event","console","log","currentTarget","setContainer","element","container","teardownSortable","undefined","setupSortable","handleSortStart","classList","add","item","HTMLElement","applyDropElevation","handleSortEnd","remove","oldIndex","newIndex","dropElevationTarget","scheduleDropElevationRemoval","moveKitten","render","h","Host","key","class","ref","map","kitten","clickable","onClick","dragDirection","slot","sortable","option","Sortable","create","animation","direction","handle","draggable","chosenClass","onStart","onEnd","destroy","clearDropElevationTimer","target","dropElevationTimeout","globalThis","setTimeout","clearTimeout","list","fromIndex","toIndex","updated","moved","splice","disconnectedCallback"],"sources":["src/components/drag-handle/examples/drag-handle-horizontal.scss?tag=limel-example-drag-handle-horizontal&encapsulation=shadow","src/components/drag-handle/examples/drag-handle-horizontal.tsx"],"sourcesContent":["@use '../../../style/mixins.scss';\n\n:host {\n    display: block;\n}\n\ndiv {\n    max-width: 100%;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 1rem;\n}\n\nlimel-drag-handle {\n    margin-left: auto;\n}\n\nlimel-card {\n    @include mixins.is-draggable-item(\n        $border-radius-while-being-dragged: 0.95rem\n    );\n}\n","import { Component, h, Host, State } from '@stencil/core';\nimport Sortable, { SortableEvent } from 'sortablejs';\n\ninterface KittenCard {\n    id: string;\n    image: {\n        src: string;\n        alt: string;\n    };\n    subheading: string;\n}\n\nconst DRAG_HANDLE_SELECTOR = '[data-drag-handle]';\nconst DRAGGABLE_ITEM_SELECTOR = 'limel-card.kitten-card';\nconst DEFAULT_DRAGGING_CLASS = 'is-being-dragged';\nconst DEFAULT_CONTAINER_CLASS = 'has-an-item-which-is-being-dragged';\nconst DEFAULT_DROP_ELEVATION_CLASS = 'is-elevated';\nconst DROP_ELEVATION_DURATION = 1000;\n/**\n * Horizontal drag handle\n * This example shows how to use the drag handle component\n * together with SortableJS to enable horizontal drag-and-drop ordering.\n */\n@Component({\n    shadow: true,\n    tag: 'limel-example-drag-handle-horizontal',\n    styleUrl: 'drag-handle-horizontal.scss',\n})\nexport class DragHandleHorizontalExample {\n    @State()\n    private kittens: KittenCard[] = [\n        {\n            id: 'kitten-1',\n            image: {\n                src: 'https://images.unsplash.com/photo-1621238224334-20222c044b84?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@paracetamol',\n            },\n            subheading: \"@paracetamol's kitten\",\n        },\n        {\n            id: 'kitten-2',\n            image: {\n                src: 'https://images.unsplash.com/photo-1558674378-e4334d4fecc2?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@bliss1002',\n            },\n            subheading: \"@bliss1002's kitten\",\n        },\n        {\n            id: 'kitten-3',\n            image: {\n                src: 'https://images.unsplash.com/photo-1692962063951-0b5c81887f3d?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@kmly',\n            },\n            subheading: \"@kmly's kitten\",\n        },\n    ];\n\n    private container?: HTMLDivElement;\n    private sortable?: Sortable;\n    private dropElevationTimeout?: ReturnType<typeof setTimeout>;\n    private dropElevationTarget?: HTMLElement;\n\n    public render() {\n        return (\n            <Host>\n                <h4>Drag & sort these kittens</h4>\n                <p>More cute â†’ Less cute</p>\n                <div class=\"kitten-list\" ref={this.setContainer}>\n                    {this.kittens.map((kitten) => (\n                        <limel-card\n                            class=\"kitten-card\"\n                            key={kitten.id}\n                            clickable={true}\n                            image={kitten.image}\n                            subheading={kitten.subheading}\n                            onClick={this.handleClick}\n                            data-reorder-id={kitten.id}\n                        >\n                            <limel-drag-handle\n                                dragDirection=\"horizontal\"\n                                slot=\"component\"\n                            />\n                        </limel-card>\n                    ))}\n                </div>\n            </Host>\n        );\n    }\n\n    private readonly handleClick = (event: MouseEvent) => {\n        console.log('Card clicked', event.currentTarget);\n    };\n\n    private readonly setContainer = (element?: HTMLDivElement) => {\n        if (this.container === element) {\n            return;\n        }\n\n        this.teardownSortable();\n        this.container = element ?? undefined;\n        this.setupSortable();\n    };\n\n    private setupSortable() {\n        if (!this.container) {\n            return;\n        }\n\n        if (this.sortable) {\n            this.sortable.option('handle', DRAG_HANDLE_SELECTOR);\n            this.sortable.option('draggable', DRAGGABLE_ITEM_SELECTOR);\n            this.sortable.option('disabled', false);\n            return;\n        }\n\n        this.sortable = Sortable.create(this.container, {\n            animation: 150,\n            direction: 'horizontal',\n            handle: DRAG_HANDLE_SELECTOR,\n            draggable: DRAGGABLE_ITEM_SELECTOR,\n            chosenClass: DEFAULT_DRAGGING_CLASS,\n            onStart: this.handleSortStart,\n            onEnd: this.handleSortEnd,\n        });\n    }\n\n    private teardownSortable() {\n        if (this.sortable) {\n            this.sortable.destroy();\n            this.sortable = undefined;\n        }\n\n        this.clearDropElevationTimer();\n\n        if (this.dropElevationTarget) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n            this.dropElevationTarget = undefined;\n        }\n\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n    }\n\n    private readonly handleSortStart = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.add(DEFAULT_CONTAINER_CLASS);\n        }\n\n        if (event.item instanceof HTMLElement) {\n            this.applyDropElevation(event.item);\n        }\n    };\n\n    private readonly handleSortEnd = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n\n        const { oldIndex, newIndex } = event;\n\n        if (event.item instanceof HTMLElement) {\n            this.dropElevationTarget = event.item;\n        }\n\n        if (\n            typeof oldIndex !== 'number' ||\n            typeof newIndex !== 'number' ||\n            oldIndex === newIndex\n        ) {\n            this.scheduleDropElevationRemoval();\n            return;\n        }\n\n        this.kittens = this.moveKitten(this.kittens, oldIndex, newIndex);\n        this.scheduleDropElevationRemoval();\n    };\n\n    private applyDropElevation(item: HTMLElement) {\n        if (this.dropElevationTarget && this.dropElevationTarget !== item) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n        }\n\n        this.clearDropElevationTimer();\n        item.classList.add(DEFAULT_DROP_ELEVATION_CLASS);\n        this.dropElevationTarget = item;\n    }\n\n    private scheduleDropElevationRemoval() {\n        if (!this.dropElevationTarget) {\n            return;\n        }\n\n        const target = this.dropElevationTarget;\n        this.clearDropElevationTimer();\n        this.dropElevationTimeout = globalThis.setTimeout(() => {\n            target.classList.remove(DEFAULT_DROP_ELEVATION_CLASS);\n            if (this.dropElevationTarget === target) {\n                this.dropElevationTarget = undefined;\n            }\n            this.dropElevationTimeout = undefined;\n        }, DROP_ELEVATION_DURATION);\n    }\n\n    private clearDropElevationTimer() {\n        if (this.dropElevationTimeout !== undefined) {\n            clearTimeout(this.dropElevationTimeout);\n            this.dropElevationTimeout = undefined;\n        }\n    }\n\n    private moveKitten(\n        list: KittenCard[],\n        fromIndex: number,\n        toIndex: number\n    ): KittenCard[] {\n        if (fromIndex === toIndex) {\n            return list;\n        }\n\n        const updated = [...list];\n        const [moved] = updated.splice(fromIndex, 1);\n\n        if (!moved) {\n            return list;\n        }\n\n        updated.splice(toIndex, 0, moved);\n        return updated;\n    }\n\n    public disconnectedCallback() {\n        this.teardownSortable();\n    }\n}\n"],"mappings":"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","ignoreList":[]}