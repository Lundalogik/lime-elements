{"version":3,"file":"limel-profile-picture.entry.esm.js","sources":["src/components/profile-picture/profile-picture.scss?tag=limel-profile-picture&encapsulation=shadow","src/components/profile-picture/profile-picture.tsx"],"sourcesContent":["@use '../../style/mixins';\n\n/**\n* @prop --profile-picture-border-radius: Border radius of the profile picture. Defaults to `100vw` to render a circular shape.\n*/\n\n:host(limel-profile-picture) {\n    position: relative;\n\n    display: inline-flex;\n    min-width: 1.5rem;\n    min-height: 1.5rem;\n\n    border-radius: var(--profile-picture-border-radius, 100vw);\n    background-color: rgb(var(--contrast-400));\n}\n\n* {\n    box-sizing: border-box;\n}\n\nlimel-file-dropzone,\nlimel-file-input,\nbutton.avatar {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n}\n\nbutton {\n    all: unset;\n    display: block;\n    @include mixins.visualize-keyboard-focus();\n\n    &.avatar {\n        overflow: hidden;\n        border-radius: var(--profile-picture-border-radius, 100vw);\n\n        :host(:not([disabled]):not([disabled='true'])) & {\n            @include mixins.is-flat-clickable();\n        }\n\n        :host([invalid]:not([invalid='false'])) & {\n            box-shadow: var(--shadow-error-state);\n        }\n    }\n\n    &.remove {\n        @include mixins.clear-all-button();\n        position: absolute;\n        top: 0;\n        left: 0;\n        opacity: 0;\n\n        :host(:hover) &,\n        :host(:focus) &,\n        :host(:focus-visible) &,\n        :host(:focus-within) &,\n        :host(:active) & {\n            animation: show 0.4s ease-in-out forwards;\n        }\n    }\n}\n\n@keyframes show {\n    0% {\n        transform: scale(0.9);\n        opacity: 0;\n    }\n    100% {\n        transform: scale(1);\n        opacity: 1;\n    }\n}\n\nbutton.avatar,\nimg,\nlimel-icon {\n    border-radius: var(--profile-picture-border-radius, 100vw);\n}\n\nlimel-icon {\n    width: calc(100% - 1rem);\n    min-width: 1rem;\n    max-width: 4rem;\n    color: var(--limel-theme-text-secondary-on-background-color);\n    margin: auto;\n}\n\nimg {\n    object-fit: var(--limel-profile-picture-object-fit);\n    width: 100%;\n    height: 100%;\n\n    :host(.has-image-error) & {\n        border: 1px dashed rgb(var(--contrast-600));\n        background: url(\"data:image/svg+xml;charset=utf-8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' style='fill-rule:evenodd;'><path fill='rgba(186,186,192,0.16)' d='M0 0h4v4H0zM4 4h4v4H4z'/></svg>\");\n        background-size: 0.5rem;\n    }\n}\n\nlimel-spinner {\n    position: absolute;\n    inset: 0;\n    margin: auto;\n}\n\nlimel-popover {\n    position: absolute;\n    inset: auto 0 0 auto;\n    display: block;\n    width: 2.25rem;\n    height: 2.25rem;\n}\n","import {\n    Component,\n    Event,\n    EventEmitter,\n    h,\n    Host,\n    Prop,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { FileInfo } from '../../global/shared-types/file.types';\nimport { isTypeAccepted } from '../../util/files';\nimport { Icon } from '../../global/shared-types/icon.types';\nimport { getIconName } from '../icon/get-icon-props';\nimport translate from '../../global/translations';\nimport { Languages } from '../date-picker/date.types';\nimport { createRandomString } from '../../util/random-string';\nimport { resizeImage, ResizeOptions } from '../../util/image-resize';\n\n/**\n * This component displays a profile picture, while allowing the user\n * to change it via a file input or drag-and-drop.\n *\n * It supports client-side image resizing and conversion,\n * as well as a simple lazy-loading mechanism.\n *\n * @exampleComponent limel-example-profile-picture-basic\n * @exampleComponent limel-example-profile-picture-helper-text\n * @exampleComponent limel-example-profile-picture-icon\n * @exampleComponent limel-example-profile-picture-with-value\n * @exampleComponent limel-example-profile-picture-loading\n * @exampleComponent limel-example-profile-picture-image-fit\n * @exampleComponent limel-example-profile-picture-composite\n * @exampleComponent limel-example-profile-picture-resize-contain\n * @exampleComponent limel-example-profile-picture-resize-cover\n * @exampleComponent limel-example-profile-picture-resize-fallback\n * @exampleComponent limel-example-profile-picture-styling\n * @beta\n */\n@Component({\n    tag: 'limel-profile-picture',\n    shadow: true,\n    styleUrl: 'profile-picture.scss',\n})\nexport class ProfilePicture {\n    /**\n     * Defines the language for translations.\n     * Will translate the translatable strings on the components.\n     */\n    @Prop({ reflect: true })\n    public language: Languages = 'en';\n\n    /**\n     * Accessible label for the the browse button.\n     */\n    @Prop({ reflect: true })\n    public label: string;\n\n    /**\n     * Placeholder icon of the component, displayed when no image is present.\n     */\n    @Prop()\n    public icon: string | Icon = 'user';\n\n    /**\n     * Helper text shown as a tooltip on hover or focus.\n     */\n    @Prop()\n    public helperText?: string;\n\n    /**\n     * Disables user interaction.\n     * Prevents uploading new pictures or removing existing ones.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Readonly prevents changing the value but allows interaction like focus.\n     */\n    @Prop({ reflect: true })\n    public readonly = false;\n\n    /**\n     * Marks the control as required.\n     */\n    @Prop({ reflect: true })\n    public required = false;\n\n    /**\n     * Marks the control as invalid.\n     */\n    @Prop({ reflect: true })\n    public invalid = false;\n\n    /**\n     * Set to `true` to put the component in the `loading` state,\n     * and render an indeterminate progress indicator inside.\n     * This does _not_ disable the interactivity of the component!\n     */\n    @Prop({ reflect: true })\n    public loading = false;\n\n    /**\n     * Current image to display. Either a URL string or a `FileInfo` with an href.\n     */\n    @Prop()\n    public value?: string | FileInfo;\n\n    /**\n     * How the image should fit within the container.\n     * - `cover` will fill the container and crop excess parts.\n     * - `contain` will scale the image to fit within the container without cropping.\n     */\n    @Prop({ reflect: true })\n    public imageFit: 'cover' | 'contain' = 'cover';\n\n    /**\n     * A comma-separated list of accepted file types.\n     */\n    @Prop({ reflect: true })\n    public accept: string =\n        'image/jpeg,image/png,image/heic,.jpg,.jpeg,.png,.heic';\n\n    /**\n     * Optional client-side resize before emitting the file.\n     * If provided, the selected image will be resized on the client device.\n     * :::note\n     * HEIC may not decode in all browsers; when decoding fails, the original\n     * file will be emitted. See the examples for more info.\n     * :::\n     */\n    @Prop()\n    public resize?: ResizeOptions;\n\n    /**\n     * Emitted when the picture changes (first FileInfo only).\n     */\n    @Event()\n    public change: EventEmitter<FileInfo | undefined>;\n\n    /**\n     * Emitted when a file is rejected by accept filter.\n     */\n    @Event()\n    public filesRejected: EventEmitter<FileInfo[]>;\n\n    @State()\n    private objectUrl?: string;\n\n    @State()\n    private imageError = false;\n\n    @State()\n    private isErrorMessagePopoverOpen = false;\n\n    private removeButtonId = createRandomString();\n    private browseButtonId = createRandomString();\n\n    public disconnectedCallback() {\n        this.revokeObjectUrl();\n    }\n\n    @Watch('value')\n    protected handleValueChange() {\n        // Clear previously created object URL when value changes\n        this.revokeObjectUrl();\n        this.imageError = false;\n\n        // If a new File without href is provided, create an object URL for preview\n        const currentValue = this.value;\n        if (\n            currentValue &&\n            typeof currentValue !== 'string' &&\n            !currentValue.href &&\n            currentValue.fileContent instanceof File\n        ) {\n            this.objectUrl = URL.createObjectURL(currentValue.fileContent);\n        }\n    }\n\n    public render() {\n        const hostClassNames = {\n            'has-image-error': this.imageError,\n        };\n\n        if (this.readonly) {\n            return <Host class={hostClassNames}>{this.renderAvatar()}</Host>;\n        }\n\n        return (\n            <Host class={hostClassNames}>\n                <limel-file-dropzone\n                    disabled={this.disabled}\n                    accept={this.accept}\n                    onFilesSelected={this.handleNewFiles}\n                    onFilesRejected={this.handleRejectedFiles}\n                >\n                    <limel-file-input\n                        accept={this.accept}\n                        disabled={this.disabled}\n                        aria-required={this.required ? 'true' : undefined}\n                        aria-invalid={this.invalid ? 'true' : undefined}\n                    >\n                        {this.renderBrowseButton()}\n                    </limel-file-input>\n                </limel-file-dropzone>\n                {this.renderClearButton()}\n                {this.renderSpinner()}\n                {this.renderErrorMessage()}\n                {this.renderHelperText()}\n            </Host>\n        );\n    }\n\n    private get hasValue(): boolean {\n        if (typeof this.value === 'string') {\n            return !!this.value;\n        }\n\n        if (this.value && (this.value.href || this.value.fileContent)) {\n            return true;\n        }\n\n        return !!this.objectUrl;\n    }\n\n    private renderBrowseButton() {\n        return (\n            <button\n                id={this.browseButtonId}\n                type=\"button\"\n                class=\"avatar\"\n                disabled={this.disabled}\n                aria-label={this.label}\n                aria-busy={this.loading ? 'true' : 'false'}\n                aria-live=\"polite\"\n            >\n                {this.renderAvatar()}\n            </button>\n        );\n    }\n\n    private renderAvatar() {\n        const src = this.getImageSrc();\n\n        if (src) {\n            return (\n                <img\n                    src={src}\n                    alt=\"\"\n                    style={{\n                        '--limel-profile-picture-object-fit': this.imageFit,\n                    }}\n                    loading=\"lazy\"\n                    onError={this.onImageError}\n                />\n            );\n        }\n\n        return this.renderIcon();\n    }\n\n    private renderIcon() {\n        const icon = getIconName(this.icon);\n\n        return (\n            <limel-icon\n                name={icon}\n                style={{\n                    color: `${(this.icon as Icon)?.color}`,\n                    'background-color': `${\n                        (this.icon as Icon)?.backgroundColor\n                    }`,\n                }}\n            />\n        );\n    }\n\n    private renderClearButton() {\n        if (!this.hasValue || this.disabled) {\n            return;\n        }\n\n        return [\n            <button\n                class=\"remove\"\n                type=\"button\"\n                id={this.removeButtonId}\n                onClick={this.handleClear}\n            />,\n            <limel-tooltip\n                label={this.getTranslation('profile-picture.remove')}\n                elementId={this.removeButtonId}\n            />,\n        ];\n    }\n\n    private renderSpinner() {\n        if (!this.loading) {\n            return;\n        }\n\n        return <limel-spinner />;\n    }\n\n    private renderHelperText = () => {\n        if (!this.helperText) {\n            return;\n        }\n\n        return (\n            <limel-tooltip\n                elementId={this.browseButtonId}\n                label={this.helperText}\n            />\n        );\n    };\n\n    // Collects derived flags used for deciding whether to show the unsupported preview message\n    private getUnsupportedPreviewContext() {\n        const currentValue = this.value;\n        const hasNoSrc = !this.getImageSrc();\n        const hasLocalFile = !!(\n            currentValue &&\n            typeof currentValue !== 'string' &&\n            currentValue.fileContent instanceof File &&\n            !currentValue.href\n        );\n        const isResizeConfigured = !!this.resize;\n\n        return { hasNoSrc, hasLocalFile, isResizeConfigured };\n    }\n\n    private shouldShowErrorMessage(): boolean {\n        const { hasNoSrc, hasLocalFile, isResizeConfigured } =\n            this.getUnsupportedPreviewContext();\n\n        return (\n            (hasNoSrc || this.imageError) && hasLocalFile && isResizeConfigured\n        );\n    }\n\n    // Shows a non-intrusive note when there is a File without href and no object URL, which\n    // can happen if the browser failed to decode the source (e.g., HEIC in Chromium).\n    private renderErrorMessage() {\n        if (!this.shouldShowErrorMessage()) {\n            return;\n        }\n\n        const errorIcon = {\n            name: 'error',\n            color: 'rgb(var(--color-orange-dark))',\n        };\n        const errorMessageStyles = {\n            maxWidth: '20rem',\n            borderRadius: '0.75rem',\n        };\n        return (\n            <limel-popover\n                open={this.isErrorMessagePopoverOpen}\n                onClick={this.openPopover}\n                onClose={this.onPopoverClose}\n            >\n                <limel-icon-button\n                    slot=\"trigger\"\n                    elevated={true}\n                    icon={errorIcon}\n                    aria-live=\"polite\"\n                    label={this.getTranslation(\n                        'profile-picture.unsupported-preview.title'\n                    )}\n                />\n                <limel-callout\n                    type=\"warning\"\n                    style={errorMessageStyles}\n                    heading={this.getTranslation(\n                        'profile-picture.unsupported-preview.title'\n                    )}\n                >\n                    {this.getTranslation(\n                        'profile-picture.unsupported-preview.description'\n                    )}\n                </limel-callout>\n            </limel-popover>\n        );\n    }\n\n    private handleNewFiles = async (event: CustomEvent<FileInfo[]>) => {\n        event.stopPropagation();\n        if (this.disabled) {\n            return;\n        }\n\n        const file = event.detail?.[0];\n        if (!file) {\n            return;\n        }\n\n        if (!isTypeAccepted(file, this.accept)) {\n            this.filesRejected.emit([file]);\n            return;\n        }\n\n        this.revokeObjectUrl();\n        this.imageError = false;\n\n        let out = file;\n\n        // Optional client-side resize\n        if (this.resize && file.fileContent instanceof File) {\n            try {\n                const processed = await resizeImage(file.fileContent, {\n                    ...this.resize,\n                    fit: this.resize.fit ?? this.imageFit,\n                });\n                out = {\n                    ...file,\n                    filename: processed.name,\n                    size: processed.size,\n                    contentType: processed.type,\n                    fileContent: processed,\n                };\n            } catch {\n                // Fall back to original file if resize fails\n                out = file;\n            }\n        }\n        // Create an object URL for immediate preview if no href present\n        if (!out.href && out.fileContent instanceof File) {\n            this.objectUrl = URL.createObjectURL(out.fileContent);\n        }\n        this.change.emit(out);\n    };\n\n    private handleRejectedFiles = (event: CustomEvent<FileInfo[]>) => {\n        event.stopPropagation();\n        this.filesRejected.emit(event.detail);\n    };\n\n    private getImageSrc(): string | undefined {\n        if (!this.value) {\n            return this.objectUrl; // Could be set from last selection before parent consumes\n        }\n\n        if (typeof this.value === 'string') {\n            return this.value;\n        }\n\n        if (this.value.href) {\n            return this.value.href;\n        }\n\n        if (this.value.fileContent instanceof File) {\n            return this.objectUrl;\n        }\n\n        return undefined;\n    }\n\n    private revokeObjectUrl() {\n        if (this.objectUrl) {\n            URL.revokeObjectURL(this.objectUrl);\n            this.objectUrl = undefined;\n        }\n    }\n\n    private handleClear = (event: Event) => {\n        event.stopPropagation();\n        this.revokeObjectUrl();\n        this.imageError = false;\n        this.change.emit(undefined);\n    };\n\n    private onImageError = () => {\n        this.imageError = true;\n    };\n\n    private openPopover = (event: MouseEvent) => {\n        event.stopPropagation();\n        this.isErrorMessagePopoverOpen = true;\n    };\n\n    private onPopoverClose = (event: CustomEvent) => {\n        event.stopPropagation();\n        this.isErrorMessagePopoverOpen = false;\n    };\n\n    private getTranslation = (key: string) => {\n        return translate.get(key, this.language);\n    };\n}\n"],"names":[],"mappings":"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"}