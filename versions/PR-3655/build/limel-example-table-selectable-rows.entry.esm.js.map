{"version":3,"file":"limel-example-table-selectable-rows.entry.esm.js","sources":["src/components/table/examples/table-selectable-rows.scss?tag=limel-example-table-selectable-rows&encapsulation=shadow","src/components/table/examples/table-selectable-rows.tsx"],"sourcesContent":["@use './table.scss';\n","import {\n    Column,\n    ColumnAggregate,\n    LimelTableCustomEvent,\n} from '@limetech/lime-elements';\nimport { Component, h, State } from '@stencil/core';\nimport { persons, Person } from './persons';\n\n/**\n * Selectable rows with updating aggregates\n *\n * @sourceFile persons.ts\n */\n@Component({\n    tag: 'limel-example-table-selectable-rows',\n    styleUrl: 'table-selectable-rows.scss',\n    shadow: true,\n})\nexport class TableExampleSelectableRows {\n    @State()\n    private activeRow: Person;\n    @State()\n    private selection: Person[];\n    @State()\n    private aggregates: ColumnAggregate[];\n\n    private tableData: Person[] = persons;\n    private defaultSelection = [persons[0], persons[2]];\n\n    private columns: Column[] = [\n        {\n            title: 'Name',\n            field: 'name',\n        },\n        {\n            title: 'Age',\n            field: 'age',\n            horizontalAlign: 'right',\n        },\n        { title: 'Kind', field: 'kind' },\n        {\n            title: 'Height',\n            field: 'height',\n            horizontalAlign: 'right',\n        },\n        { title: 'Stamina', field: 'stamina' },\n        { title: 'Place of Birth', field: 'placeOfBirth' },\n        { title: 'Sign', field: 'sign' },\n        { title: 'Date of Birth', field: 'dateOfBirth' },\n        { title: 'Role', field: 'role' },\n    ];\n\n    private eventPrinter: HTMLLimelExampleEventPrinterElement;\n\n    constructor() {\n        this.selection = [...this.defaultSelection];\n        this.updateAggregates();\n    }\n\n    public render() {\n        return [\n            <limel-table\n                data={this.tableData}\n                activeRow={this.activeRow}\n                selectable={true}\n                selection={this.selection}\n                aggregates={this.aggregates}\n                columns={this.columns}\n                onActivate={this.onActivateRow}\n                onSelect={this.onSelect}\n                onSelectAll={this.onSelectAll}\n                pageSize={5}\n                mode=\"local\"\n                totalRows={persons.length}\n                movableColumns={true}\n                class=\"has-interactive-rows\"\n            />,\n            <limel-example-controls\n                style={{ '--example-controls-max-columns-width': '10rem' }}\n            >\n                <limel-button label=\"Select all\" onClick={this.selectAll} />\n                <limel-button\n                    label=\"Clear selection\"\n                    onClick={this.clearSelection}\n                />\n                <limel-button label=\"Reset\" onClick={this.resetSelection} />\n            </limel-example-controls>,\n            <limel-example-value label=\"Active row\" value={this.activeRow} />,\n            <limel-example-value\n                label={`Selected rows: (${this.selection?.length || 0})`}\n                value={this.selection}\n            />,\n            <limel-example-event-printer\n                ref={(el) => (this.eventPrinter = el)}\n            />,\n        ];\n    }\n\n    private onActivateRow = (event: LimelTableCustomEvent<Person>) => {\n        this.activeRow = event.detail;\n        this.eventPrinter.writeEvent(event);\n    };\n\n    private onSelect = (event: LimelTableCustomEvent<Person[]>) => {\n        this.selection = event.detail;\n        this.updateAggregates();\n        this.eventPrinter.writeEvent(event);\n    };\n\n    private onSelectAll = (event: CustomEvent<boolean>) => {\n        this.eventPrinter.writeEvent(event);\n    };\n\n    private selectAll = () => {\n        this.selection = [...this.tableData];\n        this.updateAggregates();\n    };\n\n    private clearSelection = () => {\n        this.selection = [];\n        this.updateAggregates();\n    };\n\n    private resetSelection = () => {\n        this.selection = [...this.defaultSelection];\n        this.updateAggregates();\n    };\n\n    private updateAggregates = () => {\n        this.aggregates = [\n            this.getNameAggregate(),\n            this.getHeightAggregate(),\n            this.getAgeAggregate(),\n            this.getStaminaAggregate(),\n        ];\n    };\n\n    private getNameAggregate = () => {\n        const selected = this.selection.length;\n        const count = this.tableData.length;\n        const value = selected ? `Selected: ${selected}` : `Count: ${count}`;\n\n        return {\n            field: 'name',\n            value: value,\n        };\n    };\n\n    private getStaminaAggregate = () => {\n        const items =\n            this.selection.length > 0 ? this.selection : this.tableData;\n        const stamina = items.map((d) => Number.parseInt(d.stamina, 10));\n        const minStamina = Math.min(...stamina);\n        const maxStamina = Math.max(...stamina);\n        let value = `${minStamina}%`;\n        if (minStamina !== maxStamina) {\n            value = `${minStamina}% - ${maxStamina}%`;\n        }\n\n        return {\n            field: 'stamina',\n            value: value,\n        };\n    };\n\n    private sumProperty = (\n        items: Person[],\n        valueProvider: (person: Person) => number\n    ) => {\n        return items.reduce((s, person) => s + valueProvider(person), 0);\n    };\n\n    private getAgeAggregate = () => {\n        const items =\n            this.selection.length > 0 ? this.selection : this.tableData;\n        const sum = this.sumProperty(items, (p) => p.age);\n        const avg = sum / items.length || 0;\n\n        return {\n            field: 'age',\n            value: `Avg: ${Math.round(avg * 100) / 100}`,\n        };\n    };\n\n    private getHeightAggregate = () => {\n        const items =\n            this.selection.length > 0 ? this.selection : this.tableData;\n        const sum = this.sumProperty(items, (p) => p.height);\n\n        return {\n            field: 'height',\n            value: `${sum} cm`,\n        };\n    };\n}\n"],"names":[],"mappings":"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"}