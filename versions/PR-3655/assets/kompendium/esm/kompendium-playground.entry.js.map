{"version":3,"file":"kompendium-playground.entry.js","sources":["src/components/playground/playground.scss?tag=kompendium-playground&encapsulation=shadow","src/components/playground/playground.tsx"],"sourcesContent":["@use '../../style/functions.scss';\n@use '../../style/variables.scss';\n@use '../../style/mixins.scss';\n\n$tab-active-outer-edge-curve-size: functions.pxToRem(10);\n\n:host {\n    display: block;\n}\n\n.tab-panel {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.tab-bar {\n    display: flex;\n    padding: functions.pxToRem(3) functions.pxToRem(16) 0 functions.pxToRem(16);\n    overflow-y: auto;\n\n    .tab {\n        span {\n            @include mixins.truncate-text;\n            display: inline-block;\n            width: 100%;\n            padding: functions.pxToRem(2) 0;\n        }\n        transition: background-color 0.2s ease;\n        cursor: pointer;\n\n        position: relative;\n        display: inline-block;\n        padding: functions.pxToRem(8) functions.pxToRem(16);\n        text-align: center;\n        line-height: functions.pxToRem(15);\n        color: rgb(var(--kompendium-contrast-1000));\n        font-size: functions.pxToRem(16);\n        border-radius: functions.pxToRem(8) functions.pxToRem(8) 0 0;\n        margin: 0 functions.pxToRem(2);\n        min-width: functions.pxToRem(\n            60\n        ); // needs to be here for titles to truncate\n\n        &:before,\n        &:after {\n            transition: background-color 0.2s ease;\n\n            content: '';\n            display: block;\n            width: $tab-active-outer-edge-curve-size;\n            height: $tab-active-outer-edge-curve-size;\n            position: absolute;\n            bottom: 0;\n            -webkit-mask-image: url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2' clip-rule='evenodd' viewBox='0 0 50 50'><defs/><path d='M0 0c0 27.594 22.406 50 50 50H0V0z'/></svg>\"); //For chrome and Safari the browser prefix is needed. (last checked Apr 2020)\n            mask-image: url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2' clip-rule='evenodd' viewBox='0 0 50 50'><defs/><path d='M0 0c0 27.594 22.406 50 50 50H0V0z'/></svg>\");\n\n            background: transparent;\n        }\n\n        &:before {\n            left: -$tab-active-outer-edge-curve-size;\n            transform: rotateY(180deg);\n        }\n        &:after {\n            right: -$tab-active-outer-edge-curve-size;\n        }\n\n        &:hover {\n            background-color: rgb(var(--kompendium-contrast-100));\n\n            &:before,\n            &:after {\n                background-color: rgb(var(--kompendium-contrast-100));\n            }\n        }\n\n        &.active {\n            z-index: 1;\n            color: rgb(var(--kompendium-contrast-1100));\n            background: rgb(var(--kompendium-color-code-background));\n\n            &:before,\n            &:after {\n                background: rgb(var(--kompendium-color-code-background));\n            }\n        }\n    }\n}\n\n.tab-items {\n    display: flex;\n    max-height: functions.pxToRem(500);\n\n    .tab-item {\n        width: 100%;\n        display: none;\n\n        &.active {\n            display: flex;\n        }\n\n        // &:nth-child(1) {\n        //   flex-direction: column;\n        // }\n    }\n}\n\nkompendium-code {\n    display: block;\n\n    &:before,\n    &:after {\n        content: '';\n        z-index: 1;\n        display: block;\n        position: absolute;\n        left: 0;\n        right: 0;\n        border-radius: functions.pxToRem(9);\n        pointer-events: none;\n    }\n\n    &:before {\n        top: functions.pxToRem(39);\n        height: functions.pxToRem(24);\n        background-image: linear-gradient(\n            rgb(var(--kompendium-color-code-background)),\n            rgba(var(--kompendium-color-code-background), 0)\n        );\n    }\n    &:after {\n        bottom: 0;\n        height: functions.pxToRem(32);\n        background-image: linear-gradient(\n            rgba(var(--kompendium-color-code-background), 0),\n            rgb(var(--kompendium-color-code-background))\n        );\n    }\n}\n\nsection.example {\n    transition: border-color 0.3s ease 0.05s;\n    padding-bottom: functions.pxToRem(40);\n    margin-bottom: functions.pxToRem(40);\n    border-bottom: 1px solid rgb(var(--kompendium-contrast-500));\n\n    .result,\n    .code {\n        box-sizing: border-box;\n        display: inline-block;\n        vertical-align: top;\n        width: 50%;\n    }\n\n    .result {\n        padding-right: functions.pxToRem(40);\n\n        kompendium-markdown {\n            margin-bottom: functions.pxToRem(32);\n        }\n    }\n\n    .code {\n        position: sticky;\n        top: 0;\n    }\n}\n\n@media (max-width: variables.$break-point-small) {\n    section.example {\n        .result,\n        .code {\n            width: 100%;\n            padding-right: 0;\n            margin-bottom: functions.pxToRem(80);\n        }\n\n        .code {\n            position: relative;\n            margin-bottom: functions.pxToRem(40);\n        }\n    }\n}\n\n.show-case_description {\n    padding: functions.pxToRem(12);\n}\n\n.show-case_component {\n    font-family: var(--kompendium-example-font-family, inherit);\n    font-size: var(--kompendium-example-font-size, inherit);\n    line-height: var(--kompendium-example-line-height, inherit);\n    color: var(--kompendium-example-color, inherit);\n\n    padding: functions.pxToRem(20);\n    border-radius: functions.pxToRem(14);\n    background-color: rgb(var(--kompendium-contrast-100));\n    border: 1px solid rgb(var(--kompendium-contrast-300));\n    box-shadow: var(--shadow-showcase);\n}\n\n.debug {\n    display: flex;\n    justify-content: flex-end;\n\n    a.debug-link {\n        @include mixins.is-flat-clickable();\n        transition:\n            background-color 0.2s ease,\n            box-shadow 0.2s ease,\n            transform 0.1s ease-out,\n            opacity 0.2s ease;\n\n        width: functions.pxToRem(28);\n        height: functions.pxToRem(28);\n        font-size: 0;\n        margin: functions.pxToRem(-52) functions.pxToRem(-16) 0 0;\n        border-radius: 50%;\n\n        color: rgb(var(--kompendium-contrast-1200));\n\n        opacity: 0.6;\n\n        &:hover {\n            opacity: 1;\n            background-color: rgb(var(--kompendium-contrast-100));\n        }\n    }\n}\n","import { Component, h, Host, Prop, State } from '@stencil/core';\nimport { JsonDocsComponent } from '@stencil/core/internal';\nimport { JsonDocsSource } from '../../kompendium/source';\nimport { Theme, THEME_EVENT_NAME } from '../darkmode-switch/types';\nimport { PropsFactory } from './playground.types';\n\n@Component({\n    tag: 'kompendium-playground',\n    styleUrl: 'playground.scss',\n    shadow: true,\n})\nexport class Playground {\n    /**\n     * The component to display\n     */\n    @Prop()\n    public component: JsonDocsComponent;\n\n    /**\n     * Schema for the component\n     */\n    @Prop()\n    public schema: Record<string, any>;\n\n    /**\n     * Factory for creating props for example components\n     * @returns {Record<string, unknown>} props\n     */\n    @Prop()\n    public propsFactory?: PropsFactory = () => ({});\n\n    @State()\n    private activeTab: string;\n\n    @State()\n    private theme: Theme;\n\n    constructor() {\n        this.renderTab = this.renderTab.bind(this);\n        this.renderItem = this.renderItem.bind(this);\n    }\n\n    public connectedCallback() {\n        this.theme = document.querySelector('html').dataset.theme as Theme;\n        document.addEventListener(THEME_EVENT_NAME, this.themeListener);\n    }\n\n    public disconnectedCallback() {\n        document.removeEventListener(THEME_EVENT_NAME, this.themeListener);\n    }\n\n    public render(): HTMLElement {\n        if (!this.component) {\n            return;\n        }\n\n        const sources: JsonDocsSource[] = (this.component as any).sources || [];\n\n        return (\n            <Host data-theme={this.theme}>\n                <section class=\"example\">\n                    <div class=\"result\">{this.renderResult()}</div>\n\n                    <aside class=\"code\">\n                        <nav class=\"tab-bar\">{this.renderTabs(sources)}</nav>\n                        <div class=\"tab-items\">{this.renderItems(sources)}</div>\n                    </aside>\n                </section>\n            </Host>\n        );\n    }\n\n    private renderTabs(sources: JsonDocsSource[]) {\n        return sources.map(this.renderTab);\n    }\n\n    private renderTab(source: JsonDocsSource, index: number) {\n        const classList = {\n            tab: true,\n            active: this.isTabActive(source, index),\n        };\n\n        return (\n            <a class={classList} onClick={this.activateTab(source.filename)}>\n                <span>{source.filename}</span>\n            </a>\n        );\n    }\n\n    private renderItems(sources: JsonDocsSource[]) {\n        return sources.map(this.renderItem);\n    }\n\n    private renderResult() {\n        const ExampleComponent = this.component.tag;\n        const text = '##### ' + this.component.docs;\n        const factory = this.propsFactory;\n        const props = {\n            schema: this.schema,\n            ...factory(ExampleComponent),\n        };\n\n        return (\n            <div class=\"show-case\">\n                <div class=\"show-case_description\">\n                    <kompendium-markdown text={text} />\n                </div>\n                <div class=\"show-case_component\">\n                    {this.renderDebugButton(this.component.tag)}\n                    <ExampleComponent {...props} />\n                </div>\n            </div>\n        );\n    }\n\n    private renderItem(source: JsonDocsSource, index: number) {\n        const classList = {\n            'tab-item': true,\n            active: this.isTabActive(source, index),\n        };\n        const code = source.source.replace(/\\/\\*\\*.+?\\*\\//gms, '');\n        const key = [this.component.tag, source.filename].join('/');\n\n        return (\n            <kompendium-code class={classList} language={source.type} key={key}>\n                {code}\n            </kompendium-code>\n        );\n    }\n\n    private renderDebugButton(tag: string) {\n        if (!['localhost', '127.0.0.1'].includes(location.hostname)) {\n            return;\n        }\n\n        const href = `#/debug/${tag}`;\n\n        return (\n            <div class=\"debug\">\n                <a class=\"debug-link\" href={href} title=\"Debug\">\n                    <svg\n                        viewBox=\"0 0 400 400\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill-rule=\"evenodd\"\n                        clip-rule=\"evenodd\"\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-miterlimit=\"1.5\"\n                    >\n                        <path fill=\"none\" d=\"M0 0h400v400H0z\" />\n                        <path\n                            d=\"M194.97 254.84h77.555\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            stroke-opacity=\".6\"\n                            stroke-width=\"20\"\n                        />\n                        <path\n                            d=\"M127.474 145.16l54.84 54.84M182.315 200l-54.84 54.84\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            stroke-width=\"20\"\n                        />\n                    </svg>\n                </a>\n            </div>\n        );\n    }\n\n    private activateTab = (id: string) => () => {\n        this.activeTab = id;\n    };\n\n    private isTabActive(source: JsonDocsSource, index: number): boolean {\n        let isActive = this.activeTab === source.filename;\n        if (!isActive) {\n            isActive = index === 0 && !this.activeTab;\n        }\n\n        return isActive;\n    }\n\n    private themeListener = (event: CustomEvent<Theme>) => {\n        this.theme = event.detail;\n    };\n}\n"],"names":[],"mappings":"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"}