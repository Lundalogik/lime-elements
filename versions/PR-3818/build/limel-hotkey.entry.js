import{r as e,c as s,h as r,H as t}from"./index-3de2295c.js";import{t as a,i,n as l,h as n}from"./hotkeys-d58bd6e6.js";import{i as o}from"./device-8e34e2c7.js";const c='@charset "UTF-8";kbd{display:inline-block;font-family:ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Consolas, "DejaVu Sans Mono", monospace;font-weight:600;color:rgb(var(--contrast-1100));white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:normal;border-radius:0.125rem;border-style:solid;border-color:rgb(var(--contrast-500));border-width:0 1px 0.1875rem 1px;padding:0.0625rem 0.375rem;margin:0 0.25rem;background-color:rgb(var(--contrast-200));box-shadow:var(--button-shadow-normal), 0 0.625rem 0.375px -0.5rem rgb(var(--color-black), 0.02), 0 0.025rem 0.5rem 0 rgb(var(--contrast-100)) inset}kbd::first-letter{text-transform:uppercase}:host(limel-hotkey){display:flex;align-items:center;justify-content:center;gap:0.25rem}:host(limel-hotkey[disabled]:not([disabled=false])){opacity:0.5}kbd{margin:0;font-size:0.75rem;box-shadow:var(--button-shadow-pressed), 0 0.625rem 0.375px -0.5rem rgb(var(--color-black), 0.02), 0 0.025rem 0.5rem 0 rgb(var(--contrast-100)) inset}span{display:inline-block}span::first-letter{text-transform:uppercase}kbd.is-glyph span{transform:scale(1.2)}';const d=class{constructor(r){e(this,r);this.hotkeyTrigger=s(this,"hotkeyTrigger",7);this.registeredNormalizedHotkey=null;this.value=undefined;this.disabled=false}connectedCallback(){this.updateRegistry()}disconnectedCallback(){this.unregister()}valueWatcher(){this.updateRegistry()}disabledWatcher(){this.updateRegistry()}render(){var e;const s=o();const i=a(this.value);const l=((e=this.value)!==null&&e!==void 0?e:"").trim();return r(t,{"aria-label":l||undefined},i.map(((e,t)=>{const{display:a,isGlyph:i}=this.formatDisplayToken(e,s);return r("kbd",{key:`${e}-${t}`,class:i?"is-glyph":undefined},r("span",null,a))})))}formatDisplayToken(e,s){const r=(e!==null&&e!==void 0?e:"").trim();if(!r){return{display:"",isGlyph:false}}if(r==="+"){return{display:"+",isGlyph:false}}const t=r.toLowerCase();switch(t){case"meta":{return s?{display:"⌘",isGlyph:true}:{display:"⊞ Win",isGlyph:false}}case"cmd":case"command":{return{display:"⌘",isGlyph:true}}case"alt":case"option":{return s?{display:"⌥",isGlyph:true}:{display:"Alt",isGlyph:false}}case"shift":{return{display:"⇧",isGlyph:true}}case"enter":case"return":{return{display:"↩",isGlyph:true}}case"tab":{return{display:"⇥",isGlyph:true}}case"delete":case"del":case"backspace":{if(s){return{display:"⌫",isGlyph:true}}return t==="backspace"?{display:"Backspace",isGlyph:false}:{display:"Del",isGlyph:false}}case"ctrl":case"control":{return{display:"Ctrl",isGlyph:false}}}return{display:r,isGlyph:false}}handleKeyDown(e){if(this.disabled){return}if(e.defaultPrevented||e.repeat){return}if(e[d.handledFlag]){return}if(!this.value){return}if(i(e)){return}const s=l(this.value);if(!s){return}const r=n(e);if(!r||r!==s){return}this.warnIfDuplicateHotkey(s,e);e[d.handledFlag]=true;this.hotkeyTrigger.emit({hotkey:s,value:this.value,keyboardEvent:e})}warnIfDuplicateHotkey(e,s){var r;if(s[d.duplicateWarnedFlag]){return}const t=d.instancesByHotkey.get(e);const a=(r=t===null||t===void 0?void 0:t.size)!==null&&r!==void 0?r:0;if(a<=1){return}s[d.duplicateWarnedFlag]=true;console.warn(`[limel-hotkey] Duplicate hotkey detected: "${e}" is configured `+`${a} times among enabled <limel-hotkey> instances. `+`Only the first handler will run for each keypress.`)}updateRegistry(){const e=!this.disabled&&this.value?l(this.value):null;if(e===this.registeredNormalizedHotkey){return}this.unregister();if(!e){return}let s=d.instancesByHotkey.get(e);if(!s){s=new Set;d.instancesByHotkey.set(e,s)}s.add(this);this.registeredNormalizedHotkey=e}unregister(){const e=this.registeredNormalizedHotkey;if(!e){return}const s=d.instancesByHotkey.get(e);s===null||s===void 0?void 0:s.delete(this);if(s&&s.size===0){d.instancesByHotkey.delete(e)}this.registeredNormalizedHotkey=null}static get watchers(){return{value:["valueWatcher"],disabled:["disabledWatcher"]}}};d.handledFlag="__limelHotkeyHandled";d.duplicateWarnedFlag="__limelHotkeyDuplicateWarned";d.instancesByHotkey=new Map;d.style=c;export{d as limel_hotkey};
//# sourceMappingURL=limel-hotkey.entry.js.map