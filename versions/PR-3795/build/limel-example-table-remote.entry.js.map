{"version":3,"names":["tableCss","NETWORK_DELAY","TableExampleRemote","this","columns","allData","data","pageSize","addUnit","unit","value","handleLoad","event","console","log","detail","sorter","_a","sorters","loading","currentPage","page","column","sort","compareBy","loadData","a","b","fieldA","field","fieldB","direction","String","localeCompare","componentWillLoad","title","formatter","capitalize","horizontalAlign","aggregator","calculateAverage","values","rowsData","total","reduce","sum","length","setTimeout","start","end","currentData","slice","map","item","Object","assign","id","binominalName","render","h","mode","totalRows","onLoad"],"sources":["./src/components/table/examples/table.scss?tag=limel-example-table-remote&encapsulation=shadow","./src/components/table/examples/table-remote.tsx"],"sourcesContent":[":host {\n    display: block;\n}\n\nlimel-table {\n    height: 300px;\n}\n","import { Component, h, State } from '@stencil/core';\nimport { Column, TableParams, ColumnSorter } from '@limetech/lime-elements';\nimport { data, Bird } from './birds';\nimport { capitalize } from 'lodash-es';\n\nconst NETWORK_DELAY = 500;\ntype BirdRow = Bird & { id: string };\n\n/**\n * Remote sorting and pagination\n *\n * @sourceFile birds.ts\n */\n@Component({\n    tag: 'limel-example-table-remote',\n    styleUrl: 'table.scss',\n    shadow: true,\n})\nexport class TableExampleRemote {\n    private columns: Array<Column<Bird>> = [];\n\n    @State()\n    private currentData: BirdRow[] = [];\n\n    @State()\n    private loading = false;\n\n    private allData: Bird[] = data;\n\n    private pageSize = 10;\n\n    private currentPage: number;\n\n    public componentWillLoad() {\n        this.columns = [\n            { title: 'Name', field: 'name' },\n            { title: 'Binominal name', field: 'binominalName' },\n            {\n                title: 'Wingspan',\n                field: 'wingspan',\n                formatter: this.addUnit('cm'),\n            },\n            { title: 'Nest type', field: 'nest', formatter: capitalize },\n            {\n                title: 'Eggs per clutch',\n                horizontalAlign: 'right',\n                field: 'eggs',\n                aggregator: this.calculateAverage,\n            },\n            { title: 'Origin', field: 'origin' },\n        ];\n    }\n\n    private addUnit = (unit: string) => (value: any) => {\n        return `${value} ${unit}`;\n    };\n\n    private handleLoad = (event: CustomEvent<TableParams>) => {\n        console.log('Loading new data', event.detail);\n        const sorter = event.detail.sorters?.[0];\n\n        this.loading = true;\n\n        this.currentPage = event.detail.page;\n        if (sorter?.column) {\n            this.allData = [...data].sort(this.compareBy(sorter));\n        } else {\n            // When sorting is cleared, reset to the original order\n            this.allData = [...data];\n        }\n\n        this.loadData();\n    };\n\n    /**\n     * This will only handle how to compare strings. This means the two number\n     * columns in the example will not be sorted in the correct way\n     * @param sorter\n     */\n    private compareBy = (sorter: ColumnSorter) => (a: Bird, b: Bird) => {\n        const column = sorter.column;\n        const fieldA = a[column.field];\n        const fieldB = b[column.field];\n\n        if (sorter.direction === 'ASC') {\n            return String(fieldA).localeCompare(String(fieldB));\n        }\n\n        return String(fieldB).localeCompare(String(fieldA));\n    };\n\n    /**\n     * Calculate the average value for a column for all the available data\n     *\n     * `values` and `rowsData` are not needed in this example since they only\n     * contain the values for the data that is currently loaded in the table\n     * @param column\n     * @param values\n     * @param rowsData\n     */\n    private calculateAverage(column: Column, values: any[], rowsData: Bird[]) {\n        console.log(values, rowsData);\n\n        const total = data.reduce((sum: number, value: Bird) => {\n            return sum + value[column.field];\n        }, 0);\n\n        return total / data.length;\n    }\n\n    /**\n     * Simulate some network delay, like loading data from a server\n     */\n    private loadData() {\n        setTimeout(() => {\n            const start = (this.currentPage - 1) * this.pageSize;\n            const end = start + this.pageSize;\n\n            this.currentData = this.allData.slice(start, end).map((item) => ({\n                ...item,\n                // Provide a stable id to keep scroll position and selection\n                // intact while the remote dataset refreshes.\n                id: item.binominalName,\n            }));\n\n            this.loading = false;\n        }, NETWORK_DELAY);\n    }\n\n    public render() {\n        return (\n            <limel-table\n                mode=\"remote\"\n                loading={this.loading}\n                data={this.currentData}\n                columns={this.columns}\n                pageSize={this.pageSize}\n                totalRows={data.length}\n                onLoad={this.handleLoad}\n            />\n        );\n    }\n}\n"],"mappings":"qUAAA,MAAMA,EAAW,gDCKjB,MAAMC,EAAgB,I,MAaTC,EAAkB,M,yBACnBC,KAAAC,QAA+B,GAQ/BD,KAAAE,QAAkBC,EAElBH,KAAAI,SAAW,GAwBXJ,KAAAK,QAAWC,GAAkBC,GAC1B,GAAGA,KAASD,IAGfN,KAAAQ,WAAcC,I,MAClBC,QAAQC,IAAI,mBAAoBF,EAAMG,QACtC,MAAMC,GAASC,EAAAL,EAAMG,OAAOG,WAAO,MAAAD,SAAA,SAAAA,EAAG,GAEtCd,KAAKgB,QAAU,KAEfhB,KAAKiB,YAAcR,EAAMG,OAAOM,KAChC,GAAIL,IAAM,MAANA,SAAM,SAANA,EAAQM,OAAQ,CAChBnB,KAAKE,QAAU,IAAIC,GAAMiB,KAAKpB,KAAKqB,UAAUR,G,KAC1C,CAEHb,KAAKE,QAAU,IAAIC,E,CAGvBH,KAAKsB,UAAU,EAQXtB,KAAAqB,UAAaR,GAAyB,CAACU,EAASC,KACpD,MAAML,EAASN,EAAOM,OACtB,MAAMM,EAASF,EAAEJ,EAAOO,OACxB,MAAMC,EAASH,EAAEL,EAAOO,OAExB,GAAIb,EAAOe,YAAc,MAAO,CAC5B,OAAOC,OAAOJ,GAAQK,cAAcD,OAAOF,G,CAG/C,OAAOE,OAAOF,GAAQG,cAAcD,OAAOJ,GAAQ,E,iBAlEtB,G,aAGf,K,CAQXM,oBACH/B,KAAKC,QAAU,CACX,CAAE+B,MAAO,OAAQN,MAAO,QACxB,CAAEM,MAAO,iBAAkBN,MAAO,iBAClC,CACIM,MAAO,WACPN,MAAO,WACPO,UAAWjC,KAAKK,QAAQ,OAE5B,CAAE2B,MAAO,YAAaN,MAAO,OAAQO,UAAWC,GAChD,CACIF,MAAO,kBACPG,gBAAiB,QACjBT,MAAO,OACPU,WAAYpC,KAAKqC,kBAErB,CAAEL,MAAO,SAAUN,MAAO,U,CAmD1BW,iBAAiBlB,EAAgBmB,EAAeC,GACpD7B,QAAQC,IAAI2B,EAAQC,GAEpB,MAAMC,EAAQrC,EAAKsC,QAAO,CAACC,EAAanC,IAC7BmC,EAAMnC,EAAMY,EAAOO,QAC3B,GAEH,OAAOc,EAAQrC,EAAKwC,M,CAMhBrB,WACJsB,YAAW,KACP,MAAMC,GAAS7C,KAAKiB,YAAc,GAAKjB,KAAKI,SAC5C,MAAM0C,EAAMD,EAAQ7C,KAAKI,SAEzBJ,KAAK+C,YAAc/C,KAAKE,QAAQ8C,MAAMH,EAAOC,GAAKG,KAAKC,GAAIC,OAAAC,OAAAD,OAAAC,OAAA,GACpDF,GAAI,CAGPG,GAAIH,EAAKI,kBAGbtD,KAAKgB,QAAU,KAAK,GACrBlB,E,CAGAyD,SACH,OACIC,EAAA,eACIC,KAAK,SACLzC,QAAShB,KAAKgB,QACdb,KAAMH,KAAK+C,YACX9C,QAASD,KAAKC,QACdG,SAAUJ,KAAKI,SACfsD,UAAWvD,EAAKwC,OAChBgB,OAAQ3D,KAAKQ,Y"}