{"version":3,"names":["chipCss","Chip","this","renderAsButton","h","id","identifier","class","role","disabled","readonly","loading","onKeyDown","handleDeleteKeyDown","renderSpinner","renderPicture","renderLabel","renderBadge","renderProgressBar","renderRemoveButton","renderActionsMenu","renderAsLink","href","link","title","target","tabindex","text","filterClickWhenDisabled","e","preventDefault","handleRemoveClick","event","stopPropagation","remove","emit","removable","keys","DELETE","BACKSPACE","includes","key","removeChipLabel","translate","get","language","actionMenuLabel","handleActionMenuSelect","menuItem","detail","value","menuItemSelected","crypto","randomUUID","componentWillLoad","makeEnterClickable","host","disconnectedCallback","removeEnterClickable","render","Host","onClick","icon","getIconName","image","isEmpty","src","alt","badge","name","style","color","_a","_b","backgroundColor","label","menuItems","length","svgData","tabIndex","innerHTML","getMenuItems","items","onSelect","openDirection","slot","separator","indeterminate","progress","currentPercentage","handleKeyboardEvent","textValue","isArrowLeft","ARROW_LEFT","isArrowRight","ARROW_RIGHT","isEnter","ENTER","isDelete","isBackspace","isEscape","ESCAPE","handleLeft","handleRight","handleEnter","handleDelete","handleBackspace","handleEscape","inputChipIndexSelected","emitInteraction","removeChip","repeat","chipSetCss","INPUT_FIELD_TABINDEX","ChipSet","constructor","hostRef","handleKeyDown","getValue","map","chip","Object","assign","type","selected","selectedChipIds","renderEmptyValueForReadonly","floatLabelAbove","editMode","dropZoneTip","hasHelperText","helperText","undefined","renderHelperLine","maxItems","maxLength","invalid","isInvalid","catchInputChipClicks","Lime","isSelectableChip","updateSelectedChipIds","change","handleRemoveChip","newValue","filter","clearAllChipsLabel","renderChip","bind","renderInputChip","isFull","handleTextFieldFocus","handleInputBlur","handleTextInput","inputFieldOnChange","inputHidden","handleDeleteAllIconClick","renderDelimiter","connectedCallback","initialize","async","emptyInput","shadowRoot","querySelector","focus","startEdit","syncEmptyInput","componentDidLoad","triggerIconColorWarning","mdcTextField","MDCTextField","componentDidUpdate","input","destroy","renderInputChips","classes","chipSetLabel","renderChipSetLabel","handleChangeChips","oldValue","isEqual","leadingIcon","clearAllButton","inputType","hidden","onBlur","onFocus","onInput","onChange","placeholder","searchLabel","autocomplete","required","renderLeadingIcon","renderClearAllChipsButton","labelClassList","htmlFor","blurred","emptyInputOnBlur","setTimeout","stopEdit","trim","interact","chipType","chipProps","getChipProps","index","chips","isLastChip","onRemove","getHref","getTarget","updateChoiceTypeSelectedIds","updateFilterTypeSelectedIds","isChipSelected","find","chipId","removeChipIdFromSelectedChipIds","addChipIdToSelectedChipIds","delimiter","iconFillColor","iconBackgroundColor","iconTitle","console","warn"],"sources":["./src/components/chip/chip.scss?tag=limel-chip&encapsulation=shadow","./src/components/chip/chip.tsx","./src/components/chip-set/chip-set-input-helpers.ts","./src/components/chip-set/chip-set.scss?tag=limel-chip-set&encapsulation=shadow","./src/components/chip-set/chip-set.tsx"],"sourcesContent":["@use '../../style/mixins';\n\n/**\n* @prop --chip-max-width: Maximum width of the chip. Defaults to `10rem`. Keep in mind that the chips should not appear too big.\n* @prop --chip-progress-color: Color of the progress bar. Defaults to `rgb(var(--contrast-700))`.\n*/\n\n:host(limel-chip) {\n    --limel-chip-height: 1.75rem;\n    --limel-chip-gap: 0.5rem;\n    isolation: isolate;\n    display: inline-flex;\n    align-items: center;\n    min-width: 0;\n}\n\n* {\n    box-sizing: border-box;\n}\n\n.chip {\n    all: unset;\n    position: relative;\n\n    min-width: 0;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.25rem;\n\n    max-width: min(var(--chip-max-width, 100%), 25rem);\n    height: var(--limel-chip-height);\n\n    border-radius: var(--limel-chip-height);\n    font-size: 0.875rem;\n    padding: 0 0.125rem;\n\n    &:has(limel-icon),\n    &:has(img) {\n        .text {\n            padding-left: 0;\n        }\n    }\n\n    &:not([disabled]) {\n        @include mixins.visualize-keyboard-focus;\n        @include mixins.is-elevated-inset-clickable;\n    }\n\n    &:has(limel-badge) {\n        padding-right: 0.375rem;\n\n        .text {\n            padding-right: 0;\n        }\n    }\n\n    &:has(+ .remove-button:hover) {\n        box-shadow: var(--shadow-depth-8-error);\n    }\n\n    &:has(+ limel-menu),\n    &:has(+ .trailing-button) {\n        padding-right: calc(var(--limel-chip-height) + 0.125rem);\n\n        .text {\n            padding-right: 0;\n        }\n    }\n}\n\n:host(limel-chip[disabled]:not([disabled='false'])) {\n    .chip {\n        // Similar to `limel-button[disabled]`\n        color: rgba(var(--contrast-1600), 0.37);\n        background-color: rgba(var(--contrast-1600), 0.1);\n        box-shadow: none;\n    }\n}\n\n:host(limel-chip[readonly]:not([readonly='false'])) {\n    .chip {\n        box-shadow: 0 0 0 1px rgba(var(--contrast-800), 0.5);\n    }\n}\n\n:host(limel-chip[selected]:not([selected='false'])) {\n    .chip {\n        box-shadow: var(--button-shadow-inset);\n\n        &:focus-visible {\n            box-shadow: var(--button-shadow-inset),\n                var(--shadow-depth-8-focused);\n        }\n\n        &:active {\n            box-shadow: var(--button-shadow-inset-pressed);\n        }\n    }\n    .text {\n        color: var(--mdc-theme-primary);\n    }\n}\n\n:host(limel-chip[type='filter']) {\n    .chip {\n        border-top-left-radius: 0.5rem;\n        border-bottom-left-radius: 0.5rem;\n\n        &:after {\n            content: '';\n            transition:\n                background-color 0.4s ease 0.2s,\n                box-shadow 0.6s ease 0.2s;\n            box-sizing: border-box;\n            position: absolute;\n            bottom: 0.125rem;\n            left: 0.125rem;\n            width: 0.5rem;\n            height: 0.5rem;\n            border-radius: 50%;\n            background-color: rgb(var(--contrast-800), 0.8);\n            box-shadow: 0 0 0 1px rgb(var(--color-white)) inset;\n        }\n    }\n}\n\n:host(limel-chip[type='filter'][selected]) {\n    .chip {\n        &:after {\n            background-color: rgb(var(--color-green-default));\n            box-shadow:\n                0 0 0.375rem 0 rgb(var(--color-green-light)),\n                0 0 0 1px rgb(var(--color-white)) inset;\n        }\n    }\n}\n\n:host(limel-chip[invalid]) {\n    .chip {\n        background: url(\"data:image/svg+xml;charset=utf-8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' style='fill-rule:evenodd;'><path fill='rgba(186,186,192,0.16)' d='M0 0h4v4H0zM4 4h4v4H4z'/></svg>\");\n        background-size: 0.5rem;\n        background-color: rgb(var(--color-red-default));\n    }\n\n    .text {\n        color: rgb(var(--color-white));\n    }\n}\n\nimg,\nlimel-icon {\n    flex-shrink: 0;\n    width: calc(var(--limel-chip-height) - 0.25rem);\n    height: calc(var(--limel-chip-height) - 0.25rem);\n}\n\nimg {\n    object-fit: cover;\n    border-radius: 50%;\n}\n\nlimel-icon {\n    padding: 0.0625rem;\n}\n\nlimel-badge {\n    pointer-events: none;\n}\n\n.text {\n    @include mixins.truncate-text;\n    line-height: 1.2;\n    padding: 0 0.5rem;\n}\n\n.trailing-button {\n    all: unset;\n    @include mixins.is-flat-clickable();\n\n    z-index: 1;\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    margin-left: calc(var(--limel-chip-height) * -1 + 0.125rem);\n    margin-right: 0.125rem;\n    width: calc(var(--limel-chip-height) - 0.25rem);\n    height: calc(var(--limel-chip-height) - 0.25rem);\n\n    border-radius: 50%;\n\n    svg {\n        transition:\n            color 0.2s ease,\n            transform 0.2s ease;\n        width: 1.25rem;\n    }\n\n    &.remove-button:hover {\n        color: rgb(var(--color-red-dark));\n        svg {\n            transform: scale(0.8);\n        }\n    }\n}\n\nlimel-menu {\n    button[slot='trigger'] {\n        @include mixins.visualize-keyboard-focus;\n    }\n\n    &[open] {\n        button[slot='trigger'] {\n            box-shadow: var(--button-shadow-inset);\n        }\n    }\n}\n\n@import './partial-styles/_loading.scss';\n@import './partial-styles/_progress.scss';\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Host,\n    Prop,\n} from '@stencil/core';\nimport { Icon } from '../../global/shared-types/icon.types';\nimport { Languages } from '../date-picker/date.types';\nimport { Link } from '../../global/shared-types/link.types';\nimport { getIconName } from '../icon/get-icon-props';\nimport {\n    makeEnterClickable,\n    removeEnterClickable,\n} from '../../util/make-enter-clickable';\nimport translate from '../../global/translations';\nimport { BACKSPACE, DELETE } from '../../util/keycodes';\nimport { ChipType, Chip as OldChipInterface } from '../chip-set/chip.types';\nimport { Image } from '../../global/shared-types/image.types';\nimport { isEmpty } from 'lodash-es';\n\nimport { ListSeparator } from '../list/list-item.types';\nimport { LimelMenuCustomEvent, MenuItem } from '../../components';\n\ninterface ChipInterface extends Omit<OldChipInterface, 'id' | 'badge'> {\n    /**\n     * Identifier for the chip. Must be unique.\n     */\n    identifier?: number | string;\n\n    /**\n     * The value of the badge.\n     */\n    badge?: string | number;\n}\n\n/**\n * Chips and buttons are both interactive elements in UI design,\n * but they serve different purposes and are used in different contexts.\n *\n * :::warning\n * Do not use the chip component carelessly, as an alternative for\n * [`limel-button`](#/component/limel-button/) in the UI design!\n *\n * **Buttons:**\n * Buttons are used to trigger actions. They are typically used to\n * submit forms, open dialogs, initiate a process, or perform any action\n * that changes the state of the application.\n * Buttons' labels usually contain action words, in other words, the labels is\n * a _verb in imperative mood_ such as \"Submit\" or \"Delete\".\n * Buttons are placed in areas where it's clear they will initiate\n * an action when clicked.\n *\n * **Chips:**\n * Chips however are elements which may look like buttons, but they are\n * representing choices, filters, or tags, in a small block\n * or clearly bundled into a group. Chips are rarely used alone in the\n * user interface.\n * They are often used in a so called \"chip-set\", or placed together in\n * a section of the UI, where the user can expect more than one chip to be present.\n *\n * For example, a chip may represent a filter in a filter bar, or a tag in a tag list,\n * or an item in a shopping list.\n * Clicking a chip can also trigger an action, for example toggling a filter ON or OFF,\n * or opening a page with all posts tagged with the tag represented by the chip,\n * or navigating to a page with more information about the item in the shopping list.\n * :::\n *\n * @exampleComponent limel-example-chip-button\n * @exampleComponent limel-example-chip-link\n * @exampleComponent limel-example-chip-icon-colors\n * @exampleComponent limel-example-chip-image\n * @exampleComponent limel-example-chip-badge\n * @exampleComponent limel-example-chip-filter\n * @exampleComponent limel-example-chip-removable\n * @exampleComponent limel-example-chip-menu\n * @exampleComponent limel-example-chip-loading\n * @exampleComponent limel-example-chip-progress\n * @exampleComponent limel-example-chip-aria-role\n */\n@Component({\n    tag: 'limel-chip',\n    shadow: { delegatesFocus: true },\n    styleUrl: 'chip.scss',\n})\nexport class Chip implements ChipInterface {\n    /**\n     * Defines the language for translations.\n     * Will translate the translatable strings on the components.\n     */\n    @Prop({ reflect: true })\n    public language: Languages = 'en';\n\n    /**\n     * Label displayed on the chip\n     */\n    @Prop({ reflect: true })\n    public text: string;\n\n    /**\n     * Icon of the chip.\n     */\n    @Prop()\n    public icon?: string | Icon;\n\n    /**\n     * A picture to be displayed instead of the icon on the chip.\n     */\n    @Prop()\n    public image?: Image;\n\n    /**\n     * If supplied, the chip will become a clickable link.\n     */\n    @Prop()\n    public link?: Omit<Link, 'text'>;\n\n    /**\n     * The value of the badge, displayed on the chip.\n     */\n    @Prop({ reflect: true })\n    public badge?: string | number;\n\n    /**\n     * Set to `true` to disable the chip.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Set to `true` to render the chip as a static UI element.\n     * Useful when the parent component has a `readonly` state.\n     */\n    @Prop({ reflect: true })\n    public readonly = false;\n\n    /**\n     * Set to `true` to visualize the chip in a \"selected\" state.\n     * This is typically used when the chip is used in a chip-set\n     * along with other chips.\n     */\n    @Prop({ reflect: true })\n    public selected = false;\n\n    /**\n     * Set to `true` to visualize the chip in an \"invalid\" or \"error\" state.\n     */\n    @Prop({ reflect: true })\n    public invalid = false;\n\n    /**\n     * Set to `true` to render a remove button on the chip.\n     */\n    @Prop({ reflect: true })\n    public removable = false;\n\n    /**\n     * Set to `filter` to render the chip with a distinct style\n     * suitable for visualizing filters.\n     *\n     * @beta\n     */\n    @Prop({ reflect: true })\n    public type?: ChipType = 'default';\n\n    /**\n     * Set to `true` to put the component in the `loading` state,\n     * and render an indeterminate progress indicator inside the chip.\n     * This does _not_ disable the interactivity of the chip!\n     */\n    @Prop({ reflect: true })\n    public loading? = false;\n\n    /**\n     * Reflects the current value of a progress bar on the chip,\n     * visualizing the percentage of an ongoing process.\n     * Must be a number between `0` and `100`.\n     */\n    @Prop({ reflect: true })\n    public progress?: number;\n\n    /**\n     * Identifier for the chip. Must be unique.\n     */\n    @Prop({ reflect: true })\n    public identifier?: number | string = crypto.randomUUID();\n\n    /**\n     * When provided, the chip will render an ellipsis menu with the supplied items.\n     * Also, this will hide the \"remove button\" when `removable={true}`, as\n     * the remove button will automatically become the last item in the menu.\n     */\n    @Prop()\n    public menuItems?: Array<MenuItem | ListSeparator> = [];\n\n    /**\n     * Fired when clicking on the remove button of a `removable` chip.\n     * The value of `identifier` is emitted as the event detail.\n     */\n    @Event()\n    public remove: EventEmitter<number | string>;\n\n    /**\n     * Emitted when a menu item is selected from the actions menu.\n     */\n    @Event()\n    public menuItemSelected: EventEmitter<MenuItem>;\n\n    @Element()\n    private host: HTMLLimelChipElement;\n\n    public componentWillLoad() {\n        makeEnterClickable(this.host);\n    }\n\n    public disconnectedCallback() {\n        removeEnterClickable(this.host);\n    }\n\n    public render() {\n        return (\n            <Host onClick={this.filterClickWhenDisabled}>\n                {this.link ? this.renderAsLink() : this.renderAsButton()}\n            </Host>\n        );\n    }\n\n    private renderAsButton = () => {\n        return [\n            <button\n                id={'chip-' + this.identifier}\n                class=\"chip\"\n                role=\"button\"\n                disabled={this.disabled || this.readonly}\n                aria-busy={this.loading ? 'true' : 'false'}\n                aria-live=\"polite\"\n                onKeyDown={this.handleDeleteKeyDown}\n            >\n                {this.renderSpinner()}\n                {this.renderPicture()}\n                {this.renderLabel()}\n                {this.renderBadge()}\n                {this.renderProgressBar()}\n            </button>,\n            this.renderRemoveButton(),\n            this.renderActionsMenu(),\n        ];\n    };\n\n    private renderAsLink = () => {\n        return [\n            <a\n                id={'chip-' + this.identifier}\n                class=\"chip\"\n                href={this.link.href}\n                title={this.link.title}\n                target={this.link.target}\n                aria-disabled={this.disabled || this.readonly}\n                tabindex={this.disabled || this.readonly ? -1 : 0}\n                onKeyDown={this.handleDeleteKeyDown}\n            >\n                {this.renderSpinner()}\n                {this.renderPicture()}\n                {this.renderLabel()}\n                {this.renderBadge()}\n                {this.renderProgressBar()}\n            </a>,\n            this.renderRemoveButton(),\n            this.renderActionsMenu(),\n        ];\n    };\n\n    private renderLabel = () => {\n        return <span class=\"text\">{this.text}</span>;\n    };\n\n    private renderPicture() {\n        const icon = getIconName(this.icon);\n\n        if (!icon && !this.image) {\n            return;\n        }\n\n        if (!isEmpty(this.image)) {\n            return (\n                <img src={this.image.src} alt={this.image.alt} loading=\"lazy\" />\n            );\n        }\n\n        return (\n            <limel-icon\n                badge={true}\n                name={icon}\n                style={{\n                    color: `${(this.icon as Icon)?.color}`,\n                    'background-color': `${\n                        (this.icon as Icon)?.backgroundColor\n                    }`,\n                }}\n            />\n        );\n    }\n\n    private renderBadge() {\n        if (!this.badge) {\n            return;\n        }\n\n        return <limel-badge label={this.badge} />;\n    }\n\n    private renderRemoveButton() {\n        if (\n            !this.removable ||\n            this.readonly ||\n            this.disabled ||\n            !!this.menuItems?.length\n        ) {\n            return;\n        }\n\n        const svgData =\n            '<svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" d=\"m8 8 16 16M24 8 8 24\"/></svg>';\n\n        return (\n            <button\n                class=\"trailing-button remove-button\"\n                tabIndex={-1}\n                aria-label={this.removeChipLabel}\n                aria-controls={'chip-' + this.identifier}\n                innerHTML={svgData}\n                onClick={this.handleRemoveClick}\n            />\n        );\n    }\n\n    private renderActionsMenu() {\n        if (!this.menuItems?.length) {\n            return;\n        }\n\n        const svgData =\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" xml:space=\"preserve\"><circle fill=\"currentColor\" cx=\"16\" cy=\"16\" r=\"2\"/><circle fill=\"currentColor\" cx=\"16\" cy=\"24\" r=\"2\"/><circle fill=\"currentColor\" cx=\"16\" cy=\"8\" r=\"2\"/></svg>';\n\n        const menuItems = this.getMenuItems();\n\n        return (\n            <limel-menu\n                items={menuItems}\n                onSelect={this.handleActionMenuSelect}\n                openDirection=\"bottom-end\"\n            >\n                <button\n                    slot=\"trigger\"\n                    disabled={this.disabled}\n                    class=\"trailing-button\"\n                    aria-label={this.actionMenuLabel}\n                    innerHTML={svgData}\n                />\n            </limel-menu>\n        );\n    }\n\n    private getMenuItems() {\n        let menuItems = [...this.menuItems];\n\n        if (this.removable) {\n            menuItems = [\n                ...menuItems,\n                { separator: true },\n                {\n                    text: this.removeChipLabel(),\n                    icon: {\n                        name: 'delete_sign',\n                        color: 'rgb(var(--color-red-default))',\n                    },\n                    value: '_remove',\n                },\n            ];\n        }\n\n        return menuItems;\n    }\n\n    private filterClickWhenDisabled = (e) => {\n        if (this.disabled || this.readonly) {\n            e.preventDefault();\n        }\n    };\n\n    private handleRemoveClick = (event: MouseEvent | KeyboardEvent) => {\n        event.stopPropagation();\n        this.remove.emit(this.identifier);\n    };\n\n    private handleDeleteKeyDown = (event: KeyboardEvent) => {\n        if (!this.removable) {\n            return;\n        }\n\n        const keys = [DELETE, BACKSPACE];\n\n        if (keys.includes(event.key)) {\n            this.handleRemoveClick(event);\n        }\n    };\n\n    private removeChipLabel = (): string => {\n        return translate.get('remove', this.language) + ' ' + this.text;\n    };\n\n    private actionMenuLabel = (): string => {\n        return translate.get('file-viewer.more-actions', this.language);\n    };\n\n    private renderSpinner() {\n        if (!this.loading) {\n            return;\n        }\n\n        return <limel-linear-progress indeterminate={true} />;\n    }\n\n    private renderProgressBar() {\n        if (!this.progress) {\n            return;\n        }\n\n        const currentPercentage = this.progress + '%';\n\n        return (\n            <div\n                role=\"progressbar\"\n                aria-label=\"%\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                aria-valuenow={this.progress}\n                style={{\n                    '--limel-chip-progress-percentage': currentPercentage,\n                }}\n            />\n        );\n    }\n\n    private handleActionMenuSelect = (\n        event: LimelMenuCustomEvent<MenuItem>,\n    ) => {\n        const menuItem = event.detail;\n\n        if (!menuItem) {\n            return;\n        }\n\n        if (menuItem.value === '_remove') {\n            this.remove.emit(this.identifier);\n\n            return;\n        }\n\n        this.menuItemSelected.emit(menuItem);\n    };\n}\n","import {\n    ARROW_LEFT,\n    ARROW_RIGHT,\n    BACKSPACE,\n    DELETE,\n    ENTER,\n    ESCAPE,\n} from '../../util/keycodes';\n\n/**\n * Key handler for the input field.\n * Lets the user select, activate, and remove chips with the keyboard.\n *\n * @param event - event\n\n */\nexport function handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.textValue.length) {\n        // If there is any text in the input field, keyboard input should\n        // navigate the text, not the chips.\n        return;\n    }\n\n    if (!this.value?.length) {\n        // If there are no chips, there is nothing to select.\n        return;\n    }\n\n    const isArrowLeft = event.key === ARROW_LEFT;\n    const isArrowRight = event.key === ARROW_RIGHT;\n    const isEnter = event.key === ENTER;\n    const isDelete = event.key === DELETE;\n    const isBackspace = event.key === BACKSPACE;\n    const isEscape = event.key === ESCAPE;\n\n    if (isArrowLeft) {\n        return handleLeft(this, event);\n    }\n\n    if (isArrowRight) {\n        return handleRight(this, event);\n    }\n\n    if (isEnter) {\n        return handleEnter(this, event);\n    }\n\n    if (isDelete) {\n        return handleDelete(this, event);\n    }\n\n    if (isBackspace) {\n        return handleBackspace(this, event);\n    }\n\n    if (isEscape) {\n        return handleEscape(this, event);\n    }\n}\n\nfunction handleLeft(host, event) {\n    event.preventDefault();\n    if (host.inputChipIndexSelected === null) {\n        host.inputChipIndexSelected = host.value.length - 1;\n\n        return;\n    }\n\n    if (host.inputChipIndexSelected <= 0) {\n        return;\n    }\n\n    host.inputChipIndexSelected -= 1;\n}\n\nfunction handleRight(host, event) {\n    event.preventDefault();\n    if (host.inputChipIndexSelected === null) {\n        host.inputChipIndexSelected = 0;\n\n        return;\n    }\n\n    if (host.inputChipIndexSelected >= host.value.length - 1) {\n        return;\n    }\n\n    host.inputChipIndexSelected += 1;\n}\n\nfunction handleEnter(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        host.emitInteraction(host.value[host.inputChipIndexSelected]);\n    }\n}\n\nfunction handleEscape(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        host.inputChipIndexSelected = null;\n    }\n}\n\nfunction handleDelete(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        removeChip(host);\n    }\n}\n\nfunction handleBackspace(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        removeChip(host);\n    } else if (!event.repeat) {\n        host.inputChipIndexSelected = host.value.length - 1;\n    }\n}\n\nfunction removeChip(host) {\n    if (host.inputChipIndexSelected !== null) {\n        host.removeChip(host.value[host.inputChipIndexSelected].id);\n        host.inputChipIndexSelected = null;\n    }\n}\n","@use '../../style/functions';\n@use '../../style/internal/shared_input-select-picker';\n@use '../../style/mixins';\n\n@use '../../style/internal/lime-theme';\n\n@use '@material/textfield';\n@use '@material/textfield/icon';\n@use '@material/notched-outline/mdc-notched-outline';\n@use '@material/floating-label';\n@use '@material/floating-label/mdc-floating-label';\n\n/**\n * @prop --icon-background-color: Background color of the icon. Defaults to transparent.\n * @prop --icon-color: Color of the icon. Defaults to `rgb(var(--contrast-1100))`.\n * @prop --background-color: Background color of the field when type is set to input.\n * @prop --background-color-disabled: Background color of the field when type is set to input and the component is disabled or readonly.\n * @prop --input-chip-set-selected-chip-color: Color of the highlight around selected chips in input chip-sets.\n */\n\n@include textfield.core-styles;\n@include icon.icon-core-styles;\n\n@include shared_input-select-picker.outlined-style-overrides;\n@include shared_input-select-picker.floating-label-overrides;\n@include shared_input-select-picker.cropped-label-hack;\n@include shared_input-select-picker.disabled-overrides;\n@include shared_input-select-picker.readonly-overrides;\n@include shared_input-select-picker.leading-icon;\n@include shared_input-select-picker.lime-empty-value-for-readonly;\n@include shared_input-select-picker.lime-looks-like-input-value;\n\n$height-of-chip-set-input: functions.pxToRem(36);\n$leading-icon-space: 1.5rem;\n\n:host(limel-chip-set) {\n    isolation: isolate;\n}\n\n.mdc-chip-set {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 0.5rem;\n    min-height: shared_input-select-picker.$height-of-mdc-text-field;\n    position: relative;\n\n    &.chip-set--with-label {\n        .lime-floating-label--float-above {\n            padding-left: functions.pxToRem(4);\n        }\n    }\n\n    &.mdc-chip-set--input {\n        padding: 0.4rem 0.5rem;\n        width: 100%;\n    }\n\n    &.has-clear-all-button {\n        &.mdc-chip-set--input {\n            padding-right: functions.pxToRem(\n                32\n            ); // This leaves space for \"clear all\" button and avoids overlapping with chips\n        }\n    }\n}\n\n.mdc-text-field {\n    height: auto;\n    cursor: text;\n    flex-wrap: wrap;\n    row-gap: 0.5rem;\n\n    .mdc-text-field__input {\n        @include shared_input-select-picker.input-field-placeholder;\n\n        width: auto;\n        padding: 0 functions.pxToRem(12);\n\n        flex-grow: 1;\n        flex-shrink: 0;\n\n        &.hidden {\n            // This class is added, as soon as there is a chip selected and displayed\n            // This input field should not be visually visible as it breaks the UI in some cases\n            // But it should be rendered to be able to tab between fields and do other keyboard commands /Kia\n            transition: all 0s;\n            opacity: 0;\n            position: absolute;\n            z-index: -100; // to let users interact with chips, in case they're covered\n        }\n        &[type='search'] {\n            -webkit-appearance: textfield; // Removes the default magnifying glass icon on iOS which appears automatically on input fields with type of search\n            background-color: transparent; // overides styles caused by previous line\n\n            &::-webkit-search-cancel-button {\n                display: none; // removes the default X button\n            }\n        }\n    }\n}\n\n// used only in chipsets that do not have input\n.chip-set__label {\n    @include mixins.truncate-text;\n    width: 120%; // `120%` instead of `100%`,\n    // because this class is always together with `mdc-floating-label--float-above`,\n    // which scales the label down. So there is more horizontal space to display the label in.\n    top: functions.pxToRem(13);\n    padding-left: functions.pxToRem(20);\n}\n\n// Because MDC removes some classes in chipset, we add custom\n// classes with similar names and expected behavior & styles.\n// These class names start with `lime-`, instead of `mdc-`.\n.lime-notched-outline--notched {\n    .mdc-notched-outline__notch {\n        border-top: 1px solid transparent !important;\n\n        .lime-floating-label--float-above {\n            // This overrides MDC's original top value which is `top: 50%`.\n            // The reason is that a % value aligns the label in a wrong position\n            // vertically, when there are multiple rows of chips.\n            top: functions.pxToRem(27);\n\n            transform: translateY(-34.75px) scale(0.75) !important;\n            font-size: shared_input-select-picker.$cropped-label-hack--font-size;\n        }\n    }\n}\n\n.force-invalid {\n    @extend .mdc-text-field--invalid;\n}\n\n.clear-all-button {\n    @include mixins.clear-all-button;\n    @include mixins.visualize-keyboard-focus;\n\n    position: absolute;\n    right: 0.5rem;\n    top: calc(#{shared_input-select-picker.$height-of-mdc-text-field} / 4);\n\n    opacity: 0; // Is hidden, but can receive focus (such as when navigating through tab indexes).\n\n    &:focus,\n    .has-chips:not(.mdc-text-field--disabled):hover &,\n    .has-chips:not(.mdc-text-field--disabled).mdc-text-field--focused & {\n        opacity: 1;\n        outline: none;\n    }\n\n    .mdc-chip-set:not(.has-chips) &,\n    .has-chips.mdc-text-field--disabled & {\n        display: none; // Won't receive focus when disabled\n    }\n}\n\n.has-leading-icon {\n    &:not(.has-chips) {\n        .mdc-text-field__input {\n            padding-left: $leading-icon-space;\n        }\n\n        .mdc-floating-label {\n            &:not(.lime-floating-label--float-above) {\n                left: $leading-icon-space;\n            }\n            &.mdc-floating-label--float-above {\n                left: functions.pxToRem(4);\n            }\n        }\n    }\n\n    limel-chip {\n        &:first-of-type {\n            margin-left: 1.5rem;\n        }\n    }\n\n    .search-icon {\n        transition: transform 0.2s ease;\n        position: absolute;\n        top: functions.pxToRem(9);\n        left: 0.25rem;\n    }\n\n    limel-icon {\n        background-color: transparent;\n    }\n}\n\n.delimiter {\n    opacity: 0.5;\n    padding: 0 functions.pxToRem(2);\n    color: var(--mdc-theme-on-surface);\n}\n\nlimel-chip {\n    border-radius: 2rem;\n\n    &.can-be-removed {\n        // When chip is selected with keyboard (backspace / arrow-keys) to be deleted\n        box-shadow: var(--shadow-depth-8-error);\n    }\n}\n\n@import './partial-styles/_readonly';\n@import './partial-styles/_helper-text';\n\n// To make the input field render smaller than the default MDC UI\n.mdc-text-field {\n    &.mdc-text-field--outlined {\n        min-height: shared_input-select-picker.$height-of-mdc-text-field;\n    }\n}\n","import { Chip, ChipType } from '../chip-set/chip.types';\nimport { Languages } from '../date-picker/date.types';\nimport { MDCTextField } from '@material/textfield';\nimport {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Method,\n    Prop,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { handleKeyboardEvent } from './chip-set-input-helpers';\nimport translate from '../../global/translations';\nimport { getHref, getTarget } from '../../util/link-helper';\nimport { isEqual } from 'lodash-es';\nimport { LimelChipCustomEvent } from '../../components';\n\nconst INPUT_FIELD_TABINDEX = 1;\n\n/**\n * :::note\n * **Regarding `click` and `interact` events:**\n *\n * The `interact` event is emitted when a chip is interacted with, and is\n * the recommended way to listen for chip interactions.\n *\n * However, if you need to handle clicks differently depending on which chip\n * was clicked, or whether the click was on a chip or elsewhere, you need to\n * listen to the native `click` event instead.\n *\n * Native `click` events are passed through, and if the click came from\n * a chip, the chip object is available in the event object under\n * `<event object>.Lime.chip`.\n *\n * Example usage:\n * ```ts\n * private handleClick(event: Event) {\n *     if (event && 'Lime' in event && (event.Lime as any).chip) {\n *         if ((event.Lime as { chip: Chip }).chip.href) {\n *             // Chip has href, so let the browser open the link.\n *             return;\n *         }\n *         // handle click on chip without href\n *     } else {\n *         // handle click elsewhere\n *     }\n * }\n * ```\n * :::\n *\n * @exampleComponent limel-example-chip-set\n * @exampleComponent limel-example-chip-set-choice\n * @exampleComponent limel-example-chip-set-filter\n * @exampleComponent limel-example-chip-set-filter-badge\n * @exampleComponent limel-example-chip-set-input\n * @exampleComponent limel-example-chip-set-input-type-with-menu-items\n * @exampleComponent limel-example-chip-set-input-type-text\n * @exampleComponent limel-example-chip-set-input-type-search\n * @exampleComponent limel-example-chip-icon-color\n * @exampleComponent limel-example-chip-set-image\n * @exampleComponent limel-example-chip-set-composite\n */\n@Component({\n    tag: 'limel-chip-set',\n    shadow: true,\n    styleUrl: 'chip-set.scss',\n})\nexport class ChipSet {\n    /**\n     * List of chips for the set\n     */\n    @Prop()\n    public value: Chip[] = [];\n\n    /**\n     * Type of chip set\n     *\n     * - `choice` renders a set of selectable chips where only one is selectable. The `removable` property is ignored\n     * - `filter` renders a set of selectable chips where all are selectable.\n     * - `input` renders a set of chips that can be used in conjunction with an input field\n     *\n     * If no type is set, a basic set of chips without additional functionality will be rendered\n     */\n    @Prop({ reflect: true })\n    public type?: 'choice' | 'filter' | 'input';\n\n    /**\n     * Label for the chip-set\n     */\n    @Prop({ reflect: true })\n    public label: string;\n\n    /**\n     * Optional helper text to display below the chipset.\n     * When type is `input`, the helper text is displayed below the\n     * input field when it has focus.\n     * When type is not `input`, the helper text is always displayed\n     * if the device is touch screen; otherwise it is shown when chip-set\n     * is hovered or focused using keyboard navigation.\n     */\n    @Prop({ reflect: true })\n    public helperText: string;\n\n    /**\n     * True if the chip set should be disabled\n     */\n    @Prop({ reflect: true })\n    public disabled: boolean = false;\n\n    /**\n     * For chip-sets of type `input`, set to `true` to disable adding and\n     * removing chips, but allow interaction with existing chips in the set.\n     * For any other types, setting either `readonly` or `disabled` disables\n     * the chip-set.\n     */\n    @Prop({ reflect: true })\n    public readonly: boolean = false;\n\n    /**\n     * Set to `true` to indicate that the current value of the input field is\n     * invalid.\n     */\n    @Prop({ reflect: true })\n    public invalid = false;\n\n    /**\n     * For chip-sets of type `input`. Value to use for the `type` attribute on the\n     * input field inside the chip-set.\n     */\n    @Prop({ reflect: true })\n    public inputType: 'search' | 'text' = 'text';\n\n    /**\n     * For chip-sets of type `input`. Limits the maximum number of chips.\n     * When the value is `0` or not set, no limit is applied.\n     */\n    @Prop({ reflect: true })\n    public maxItems: number;\n\n    /**\n     * True if the control requires a value\n     */\n    @Prop({ reflect: true })\n    public required: boolean = false;\n\n    /**\n     * Search label to display when type is `input` and component is in search mode\n     */\n    @Prop({ reflect: true })\n    public searchLabel: string;\n\n    /**\n     * Whether the input field should be emptied when the chip-set loses focus.\n     */\n    @Prop({ reflect: true })\n    public emptyInputOnBlur: boolean = true;\n\n    /**\n     * Whether the \"Clear all\" buttons should be shown\n     */\n    @Prop()\n    public clearAllButton: boolean = true;\n\n    /**\n     * For chip-sets of type `input`. When the value is null, no leading icon is used.\n     * Leading icon to show to the far left in the text field\n     */\n    @Prop({ reflect: true })\n    public leadingIcon: string = null;\n\n    /**\n     * For chip-set of type `input`. Sets delimiters between chips.\n     */\n    @Prop({ reflect: true })\n    public delimiter: string = null;\n\n    /**\n     * For chip-set of type `input`, defines whether the input field should have autocomplete enabled.\n     * Read more about the `autocomplete` attribute\n     * [here](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete).\n     */\n    @Prop({ reflect: true })\n    public autocomplete: string = 'off';\n\n    /**\n     * Defines the language for translations.\n     * Will translate the translatable strings on the components. For example, the clear all chips label.\n     */\n    @Prop()\n    public language: Languages = 'en';\n\n    /**\n     * Dispatched when a chip is interacted with\n     */\n    @Event()\n    private interact: EventEmitter<Chip>;\n\n    /**\n     * Dispatched when a chip is selected/deselected\n     */\n    @Event()\n    private change: EventEmitter<Chip | Chip[]>;\n\n    /**\n     * Emitted when an input chip set has received focus and editing in the text field has started\n     */\n    @Event()\n    private startEdit: EventEmitter<void>;\n\n    /**\n     * Emitted when an input chip set has lost focus and editing in the text field has ended\n     */\n    @Event()\n    private stopEdit: EventEmitter<void>;\n\n    /**\n     * Dispatched when the input is changed for type `input`\n     */\n    @Event()\n    private input: EventEmitter<string>;\n\n    @Element()\n    private host: HTMLLimelChipSetElement;\n\n    @State()\n    private editMode: boolean = false;\n\n    @State()\n    private textValue: string = '';\n\n    @State()\n    private blurred: boolean = false;\n\n    @State()\n    private inputChipIndexSelected: number = null;\n\n    @State()\n    private selectedChipIds: Array<string | number>;\n\n    private mdcTextField: MDCTextField;\n    private handleKeyDown = handleKeyboardEvent;\n\n    constructor() {\n        this.renderChip = this.renderChip.bind(this);\n        this.renderInputChip = this.renderInputChip.bind(this);\n        this.isFull = this.isFull.bind(this);\n        this.handleTextFieldFocus = this.handleTextFieldFocus.bind(this);\n        this.handleInputBlur = this.handleInputBlur.bind(this);\n        this.handleTextInput = this.handleTextInput.bind(this);\n        this.inputFieldOnChange = this.inputFieldOnChange.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.inputHidden = this.inputHidden.bind(this);\n        this.handleDeleteAllIconClick =\n            this.handleDeleteAllIconClick.bind(this);\n        this.renderDelimiter = this.renderDelimiter.bind(this);\n    }\n\n    public connectedCallback() {\n        this.initialize();\n    }\n\n    private initialize() {\n        if (this.value.length) {\n            this.selectedChipIds = this.value\n                .filter((chip) => chip.selected)\n                .map((chip) => chip.id);\n        }\n    }\n\n    /**\n     * Used to find out whether the chip-set is in edit mode.\n     *\n     * @returns `true` if the chip-set is in edit mode, `false` otherwise.\n     */\n    @Method()\n    public async getEditMode(): Promise<boolean> {\n        return this.editMode;\n    }\n\n    /**\n     * Used to set focus to the chip-set input field.\n     *\n     * @param emptyInput - if `true`, any text in the input is discarded\n     * @returns does not return anything, but methods have to be async\n     */\n    @Method()\n    public async setFocus(emptyInput: boolean = false) {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        this.editMode = true;\n        if (emptyInput) {\n            this.textValue = '';\n        }\n\n        this.host.shadowRoot.querySelector('input').focus();\n        this.startEdit.emit();\n    }\n\n    /**\n     * Used to empty the input field. Used in conjunction with `emptyInputOnBlur` to let the\n     * consumer control when the input is emptied.\n     *\n     * @returns does not return anything, but methods have to be async\n     */\n    @Method()\n    public async emptyInput() {\n        this.syncEmptyInput();\n    }\n\n    public componentDidLoad() {\n        this.triggerIconColorWarning(this.value);\n\n        if (this.type === 'input') {\n            this.mdcTextField = new MDCTextField(\n                this.host.shadowRoot.querySelector('.mdc-text-field'),\n            );\n        }\n    }\n\n    public componentDidUpdate() {\n        const input = this.host.shadowRoot.querySelector('input');\n        if (input && this.editMode) {\n            input.focus();\n        }\n    }\n\n    public disconnectedCallback() {\n        if (this.mdcTextField) {\n            this.mdcTextField.destroy();\n        }\n    }\n\n    public render() {\n        if (this.type === 'input') {\n            return this.renderInputChips();\n        }\n\n        const classes = {\n            'mdc-chip-set': true,\n            disabled: this.disabled || this.readonly,\n            'mdc-text-field--with-trailing-icon': true,\n        };\n        if (this.type) {\n            classes[`mdc-chip-set--${this.type}`] = true;\n        }\n\n        const chipSetLabel = this.renderChipSetLabel();\n        if (chipSetLabel) {\n            classes['chip-set--with-label'] = true;\n        }\n\n        const value = this.getValue();\n\n        return (\n            <div class={classes} role=\"grid\">\n                {chipSetLabel}\n                {value.map(this.renderChip)}\n                {this.renderHelperLine()}\n            </div>\n        );\n    }\n\n    private getValue = () => {\n        return this.value.map((chip) => ({\n            ...chip,\n            ...(this.type && {\n                selected: this.selectedChipIds.includes(chip.id),\n            }),\n        }));\n    };\n\n    @Watch('value')\n    protected handleChangeChips(newValue: Chip[], oldValue: Chip[]) {\n        if (isEqual(newValue, oldValue)) {\n            return;\n        }\n\n        this.syncEmptyInput();\n        this.initialize();\n    }\n\n    private renderChipSetLabel() {\n        if (!this.label) {\n            return;\n        }\n\n        return (\n            <label class=\"chip-set__label mdc-floating-label mdc-floating-label--float-above\">\n                {this.label}\n            </label>\n        );\n    }\n\n    private renderInputChips() {\n        return [\n            <div\n                class={{\n                    'mdc-text-field mdc-text-field--outlined': true,\n                    'mdc-chip-set mdc-chip-set--input': true,\n                    'force-invalid': this.isInvalid(),\n                    'mdc-text-field--disabled': this.readonly || this.disabled,\n                    'lime-text-field--readonly': this.readonly,\n                    'has-chips mdc-text-field--label-floating':\n                        this.value.length !== 0,\n                    'has-leading-icon': this.leadingIcon !== null,\n                    'has-clear-all-button': this.clearAllButton,\n                }}\n                onClick={this.handleTextFieldFocus}\n            >\n                {this.value.map(this.renderInputChip)}\n                <input\n                    tabIndex={INPUT_FIELD_TABINDEX}\n                    type={this.inputType}\n                    id=\"input-element\"\n                    disabled={this.readonly || this.disabled}\n                    class={{\n                        'mdc-text-field__input': true,\n                        hidden: this.inputHidden(),\n                    }}\n                    value={this.textValue}\n                    onBlur={this.handleInputBlur}\n                    onFocus={this.handleTextFieldFocus}\n                    onKeyDown={this.handleKeyDown}\n                    onInput={this.handleTextInput}\n                    // Some browsers emit a change event on input elements, we need to stop\n                    // that event from propagating since we are emitting our own change event\n                    onChange={this.inputFieldOnChange}\n                    placeholder={this.isFull() ? '' : this.searchLabel}\n                    readonly={this.isFull()}\n                    autocomplete={this.autocomplete}\n                />\n                <div\n                    class={{\n                        'mdc-notched-outline': true,\n                        'mdc-notched-outline--upgraded': true,\n                        'mdc-text-field--required': this.required,\n                        'lime-notched-outline--notched': this.floatLabelAbove(),\n                    }}\n                    dropzone-tip={this.dropZoneTip()}\n                >\n                    <div class=\"mdc-notched-outline__leading\" />\n                    {this.renderLabel()}\n                    <div class=\"mdc-notched-outline__trailing\" />\n                </div>\n                {this.renderLeadingIcon()}\n                {this.renderEmptyValueForReadonly()}\n                {this.renderClearAllChipsButton()}\n            </div>,\n            this.renderHelperLine(),\n        ];\n    }\n\n    private renderEmptyValueForReadonly = () => {\n        if (this.readonly && this.value.length === 0) {\n            return (\n                <span class=\"lime-empty-value-for-readonly lime-looks-like-input-value\">\n                    –\n                </span>\n            );\n        }\n    };\n\n    private renderLabel() {\n        const labelClassList = {\n            'mdc-floating-label': true,\n            'mdc-text-field--disabled': this.readonly || this.disabled,\n            'mdc-floating-label--required': this.required,\n            'lime-floating-label--float-above': this.floatLabelAbove(),\n        };\n\n        if (!this.label) {\n            return;\n        }\n\n        return (\n            <div class=\"mdc-notched-outline__notch\">\n                <label class={labelClassList} htmlFor=\"input-element\">\n                    {this.label}\n                </label>\n            </div>\n        );\n    }\n\n    private floatLabelAbove = () => {\n        if (!!this.value.length || this.editMode || this.readonly) {\n            return true;\n        }\n    };\n\n    private dropZoneTip = (): string => {\n        return translate.get('file.drag-and-drop-tips', this.language);\n    };\n\n    private isFull(): boolean {\n        return !!this.maxItems && this.value.length >= this.maxItems;\n    }\n\n    private isInvalid() {\n        if (this.readonly) {\n            // A readonly field can never be invalid.\n            return false;\n        }\n\n        if (this.invalid) {\n            return true;\n        }\n\n        if (!this.required) {\n            return false;\n        }\n\n        if (!this.blurred) {\n            return false;\n        }\n\n        return !this.value?.length;\n    }\n\n    private inputFieldOnChange(event) {\n        event.stopPropagation();\n    }\n\n    /**\n     * Enter edit mode when the text field receives focus. When editMode is true, the input element will be visible\n     */\n    private handleTextFieldFocus() {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        if (this.editMode) {\n            return;\n        }\n\n        this.editMode = true;\n        this.startEdit.emit();\n    }\n\n    /**\n     * Exit edit mode when the input element loses focus. This makes sure the input element does not take up any\n     * additional space when the user it not typing anything\n     */\n    private handleInputBlur() {\n        if (this.emptyInputOnBlur) {\n            this.syncEmptyInput();\n        }\n\n        this.editMode = false;\n        this.blurred = true;\n        this.inputChipIndexSelected = null;\n\n        // This timeout is needed in order to let a new element receive focus\n        setTimeout(() => {\n            this.stopEdit.emit();\n        }, 0);\n    }\n\n    private syncEmptyInput() {\n        this.textValue = '';\n    }\n\n    private inputHidden() {\n        if (this.editMode) {\n            return this.isFull();\n        }\n\n        // If there are chips in the picker, hide the input to avoid the input\n        // being placed on a new line and adding ugly space beneath the chips.\n        // If there are no chips, show the input, or the picker will look weird.\n        return !!(this.value && this.value.length);\n    }\n\n    private handleTextInput(event) {\n        event.stopPropagation();\n        this.inputChipIndexSelected = null;\n        this.textValue = event.target.value;\n        this.input.emit(event.target.value?.trim());\n    }\n\n    private emitInteraction(chip: Chip) {\n        this.interact.emit(chip);\n    }\n\n    private renderChip(chip: Chip) {\n        const chipType: ChipType =\n            this.type === 'filter' ? 'filter' : 'default';\n\n        const chipProps = this.getChipProps(chip, chipType);\n\n        return <limel-chip {...chipProps} />;\n    }\n\n    private hasHelperText = () => {\n        return this.helperText !== null && this.helperText !== undefined;\n    };\n\n    private renderHelperLine = () => {\n        const maxItems = this.maxItems === 1 ? undefined : this.maxItems;\n\n        if (!maxItems && !this.hasHelperText()) {\n            return;\n        }\n\n        return (\n            <limel-helper-line\n                length={this.value.length}\n                maxLength={maxItems}\n                helperText={this.helperText}\n                invalid={this.isInvalid()}\n            />\n        );\n    };\n\n    private renderInputChip(chip: Chip, index: number, chips: Chip[]) {\n        const chipProps = this.getChipProps(chip, 'default');\n        const isLastChip = index === chips.length - 1;\n\n        return [\n            <limel-chip\n                key={chip.id}\n                class={{\n                    'can-be-removed': this.inputChipIndexSelected === index,\n                }}\n                {...chipProps}\n            />,\n            !(isLastChip && this.inputHidden()) && this.renderDelimiter(),\n        ];\n    }\n\n    private getChipProps(chip: Chip, chipType: ChipType) {\n        const removable =\n            this.type === 'input' && chip.removable && !this.readonly;\n        const readonly = this.readonly && this.type !== 'input';\n\n        return {\n            role: 'row',\n            identifier: chip.id,\n            text: chip.text,\n            icon: chip.icon,\n            image: chip.image,\n            badge: chip.badge,\n            selected: chip.selected,\n            disabled: this.disabled,\n            readonly: readonly,\n            type: chipType,\n            removable: removable,\n            menuItems: chip.menuItems,\n            onClick: this.catchInputChipClicks(chip),\n            onRemove: this.handleRemoveChip,\n            ...(chip.href && {\n                link: {\n                    href: getHref(chip.href),\n                    target: getTarget(chip.href),\n                },\n            }),\n        };\n    }\n\n    private catchInputChipClicks = (chip: Chip) => (event: Event) => {\n        /*\n         * We need to add the `chip` to the event object so that the consumer\n         * can get the chip object when the chip is clicked.\n         * This is necessary for the consumer to be able to handle the click\n         * event itself, based on which chip was clicked, or whether the click\n         * was on a chip or elsewhere. The reason the consumer can't just look\n         * at the event target is that that information is hidden by the\n         * shadow DOM.\n         *\n         * See documentation for the `interact` event for more information.\n         */\n        (event as any).Lime = { chip: chip };\n\n        if (this.isSelectableChip(chip)) {\n            this.updateSelectedChipIds(chip);\n            this.change.emit(chip);\n        }\n\n        this.emitInteraction(chip);\n    };\n\n    private isSelectableChip(chip: Chip): boolean {\n        return this.type !== 'input' && 'selected' in chip;\n    }\n\n    private updateSelectedChipIds(chip: Chip): void {\n        chip.selected = !chip.selected;\n        const id = chip.id;\n        if (this.type === 'choice') {\n            this.updateChoiceTypeSelectedIds(id);\n        } else {\n            this.updateFilterTypeSelectedIds(id);\n        }\n    }\n\n    private updateChoiceTypeSelectedIds(id: number | string): void {\n        this.selectedChipIds = this.isChipSelected(id) ? [] : [id];\n    }\n\n    private isChipSelected(id: number | string): boolean {\n        return !!this.selectedChipIds.find((chipId) => chipId === id);\n    }\n\n    private updateFilterTypeSelectedIds(id: number | string): void {\n        if (this.isChipSelected(id)) {\n            this.removeChipIdFromSelectedChipIds(id);\n        } else {\n            this.addChipIdToSelectedChipIds(id);\n        }\n    }\n\n    private removeChipIdFromSelectedChipIds(id: number | string): void {\n        this.selectedChipIds = this.selectedChipIds.filter(\n            (chipId) => chipId !== id,\n        );\n    }\n\n    private addChipIdToSelectedChipIds(id: number | string): void {\n        this.selectedChipIds = [...this.selectedChipIds, id];\n    }\n\n    private handleRemoveChip = (\n        event: LimelChipCustomEvent<string | number>,\n    ) => {\n        this.removeChip(event.detail);\n    };\n\n    private removeChip = (identifier: string | number) => {\n        const newValue = this.value.filter((chip) => {\n            return chip.id !== identifier;\n        });\n        this.change.emit(newValue);\n    };\n\n    private renderLeadingIcon() {\n        if (!this.leadingIcon) {\n            return;\n        }\n\n        return (\n            <i class=\"mdc-text-field__icon search-icon\">\n                <limel-icon name={this.leadingIcon} />\n            </i>\n        );\n    }\n\n    private renderClearAllChipsButton() {\n        if (this.disabled || this.readonly || !this.clearAllButton) {\n            return;\n        }\n\n        return (\n            <a\n                href=\"\"\n                onClick={this.handleDeleteAllIconClick}\n                class=\"mdc-text-field__icon clear-all-button\"\n                tabindex=\"0\"\n                role=\"button\"\n                title={this.clearAllChipsLabel()}\n                aria-label={this.clearAllChipsLabel()}\n            />\n        );\n    }\n\n    private clearAllChipsLabel = (): string => {\n        return translate.get('chip-set.clear-all', this.language);\n    };\n\n    private handleDeleteAllIconClick(event: Event) {\n        event.preventDefault();\n        this.change.emit([]);\n    }\n\n    private renderDelimiter() {\n        if (!this.delimiter) {\n            return;\n        }\n\n        return <div class=\"delimiter\">{this.delimiter}</div>;\n    }\n\n    private triggerIconColorWarning(value: Chip[]) {\n        for (const chip of value) {\n            if (\n                chip.icon &&\n                (chip.iconFillColor ||\n                    chip.iconBackgroundColor ||\n                    chip.iconTitle)\n            ) {\n                /* eslint-disable-next-line no-console */\n                console.warn(\n                    \"The `iconFillColor`, `iconBackgroundColor`, and `iconTitle` props are deprecated now! Use the new `Icon` interface and instead of `iconColor: 'color-name', `iconBackgroundColor: 'color-name', and `iconTitle: 'title'`, write `icon { name: 'icon-name', color: 'color-name', backgroundColor: 'color-name', title: 'title' }`.\",\n                );\n            }\n        }\n    }\n}\n"],"mappings":"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"}