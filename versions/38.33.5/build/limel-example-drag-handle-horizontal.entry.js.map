{"version":3,"names":["dragHandleHorizontalCss","DRAG_HANDLE_SELECTOR","DRAGGABLE_ITEM_SELECTOR","DEFAULT_DRAGGING_CLASS","DEFAULT_CONTAINER_CLASS","DEFAULT_DROP_ELEVATION_CLASS","DROP_ELEVATION_DURATION","DragHandleHorizontalExample","this","handleClick","event","console","log","currentTarget","setContainer","element","container","teardownSortable","undefined","setupSortable","handleSortStart","classList","add","item","HTMLElement","applyDropElevation","handleSortEnd","remove","oldIndex","newIndex","dropElevationTarget","scheduleDropElevationRemoval","kittens","moveKitten","id","image","src","alt","subheading","render","h","Host","class","ref","map","kitten","key","clickable","onClick","dragDirection","slot","sortable","option","Sortable","create","animation","direction","handle","draggable","chosenClass","onStart","onEnd","destroy","clearDropElevationTimer","target","dropElevationTimeout","globalThis","setTimeout","clearTimeout","list","fromIndex","toIndex","updated","moved","splice","disconnectedCallback"],"sources":["./src/components/drag-handle/examples/drag-handle-horizontal.scss?tag=limel-example-drag-handle-horizontal&encapsulation=shadow","./src/components/drag-handle/examples/drag-handle-horizontal.tsx"],"sourcesContent":["@use '../../../style/mixins.scss';\n\n:host {\n    display: block;\n}\n\ndiv {\n    max-width: 100%;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 1rem;\n}\n\nlimel-drag-handle {\n    margin-left: auto;\n}\n\nlimel-card {\n    @include mixins.is-draggable-item(\n        $border-radius-while-being-dragged: 0.95rem\n    );\n}\n","import { Component, h, Host, State } from '@stencil/core';\nimport Sortable, { SortableEvent } from 'sortablejs';\n\ninterface KittenCard {\n    id: string;\n    image: {\n        src: string;\n        alt: string;\n    };\n    subheading: string;\n}\n\nconst DRAG_HANDLE_SELECTOR = '[data-drag-handle]';\nconst DRAGGABLE_ITEM_SELECTOR = 'limel-card.kitten-card';\nconst DEFAULT_DRAGGING_CLASS = 'is-being-dragged';\nconst DEFAULT_CONTAINER_CLASS = 'has-an-item-which-is-being-dragged';\nconst DEFAULT_DROP_ELEVATION_CLASS = 'is-elevated';\nconst DROP_ELEVATION_DURATION = 1000;\n/**\n * Horizontal drag handle\n * This example shows how to use the drag handle component\n * together with SortableJS to enable horizontal drag-and-drop ordering.\n */\n@Component({\n    shadow: true,\n    tag: 'limel-example-drag-handle-horizontal',\n    styleUrl: 'drag-handle-horizontal.scss',\n})\nexport class DragHandleHorizontalExample {\n    @State()\n    private kittens: KittenCard[] = [\n        {\n            id: 'kitten-1',\n            image: {\n                src: 'https://images.unsplash.com/photo-1621238224334-20222c044b84?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@paracetamol',\n            },\n            subheading: \"@paracetamol's kitten\",\n        },\n        {\n            id: 'kitten-2',\n            image: {\n                src: 'https://images.unsplash.com/photo-1558674378-e4334d4fecc2?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@bliss1002',\n            },\n            subheading: \"@bliss1002's kitten\",\n        },\n        {\n            id: 'kitten-3',\n            image: {\n                src: 'https://images.unsplash.com/photo-1692962063951-0b5c81887f3d?q=80&w=600&h=400&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\n                alt: 'Photo by https://unsplash.com/@kmly',\n            },\n            subheading: \"@kmly's kitten\",\n        },\n    ];\n\n    private container?: HTMLDivElement;\n    private sortable?: Sortable;\n    private dropElevationTimeout?: ReturnType<typeof setTimeout>;\n    private dropElevationTarget?: HTMLElement;\n\n    public render() {\n        return (\n            <Host>\n                <h4>Drag & sort these kittens</h4>\n                <p>More cute â†’ Less cute</p>\n                <div class=\"kitten-list\" ref={this.setContainer}>\n                    {this.kittens.map((kitten) => (\n                        <limel-card\n                            class=\"kitten-card\"\n                            key={kitten.id}\n                            clickable={true}\n                            image={kitten.image}\n                            subheading={kitten.subheading}\n                            onClick={this.handleClick}\n                            data-reorder-id={kitten.id}\n                        >\n                            <limel-drag-handle\n                                dragDirection=\"horizontal\"\n                                slot=\"component\"\n                            />\n                        </limel-card>\n                    ))}\n                </div>\n            </Host>\n        );\n    }\n\n    private readonly handleClick = (event: MouseEvent) => {\n        console.log('Card clicked', event.currentTarget);\n    };\n\n    private readonly setContainer = (element?: HTMLDivElement) => {\n        if (this.container === element) {\n            return;\n        }\n\n        this.teardownSortable();\n        this.container = element ?? undefined;\n        this.setupSortable();\n    };\n\n    private setupSortable() {\n        if (!this.container) {\n            return;\n        }\n\n        if (this.sortable) {\n            this.sortable.option('handle', DRAG_HANDLE_SELECTOR);\n            this.sortable.option('draggable', DRAGGABLE_ITEM_SELECTOR);\n            this.sortable.option('disabled', false);\n            return;\n        }\n\n        this.sortable = Sortable.create(this.container, {\n            animation: 150,\n            direction: 'horizontal',\n            handle: DRAG_HANDLE_SELECTOR,\n            draggable: DRAGGABLE_ITEM_SELECTOR,\n            chosenClass: DEFAULT_DRAGGING_CLASS,\n            onStart: this.handleSortStart,\n            onEnd: this.handleSortEnd,\n        });\n    }\n\n    private teardownSortable() {\n        if (this.sortable) {\n            this.sortable.destroy();\n            this.sortable = undefined;\n        }\n\n        this.clearDropElevationTimer();\n\n        if (this.dropElevationTarget) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n            this.dropElevationTarget = undefined;\n        }\n\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n    }\n\n    private readonly handleSortStart = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.add(DEFAULT_CONTAINER_CLASS);\n        }\n\n        if (event.item instanceof HTMLElement) {\n            this.applyDropElevation(event.item);\n        }\n    };\n\n    private readonly handleSortEnd = (event: SortableEvent) => {\n        if (this.container) {\n            this.container.classList.remove(DEFAULT_CONTAINER_CLASS);\n        }\n\n        const { oldIndex, newIndex } = event;\n\n        if (event.item instanceof HTMLElement) {\n            this.dropElevationTarget = event.item;\n        }\n\n        if (\n            typeof oldIndex !== 'number' ||\n            typeof newIndex !== 'number' ||\n            oldIndex === newIndex\n        ) {\n            this.scheduleDropElevationRemoval();\n            return;\n        }\n\n        this.kittens = this.moveKitten(this.kittens, oldIndex, newIndex);\n        this.scheduleDropElevationRemoval();\n    };\n\n    private applyDropElevation(item: HTMLElement) {\n        if (this.dropElevationTarget && this.dropElevationTarget !== item) {\n            this.dropElevationTarget.classList.remove(\n                DEFAULT_DROP_ELEVATION_CLASS\n            );\n        }\n\n        this.clearDropElevationTimer();\n        item.classList.add(DEFAULT_DROP_ELEVATION_CLASS);\n        this.dropElevationTarget = item;\n    }\n\n    private scheduleDropElevationRemoval() {\n        if (!this.dropElevationTarget) {\n            return;\n        }\n\n        const target = this.dropElevationTarget;\n        this.clearDropElevationTimer();\n        this.dropElevationTimeout = globalThis.setTimeout(() => {\n            target.classList.remove(DEFAULT_DROP_ELEVATION_CLASS);\n            if (this.dropElevationTarget === target) {\n                this.dropElevationTarget = undefined;\n            }\n            this.dropElevationTimeout = undefined;\n        }, DROP_ELEVATION_DURATION);\n    }\n\n    private clearDropElevationTimer() {\n        if (this.dropElevationTimeout !== undefined) {\n            clearTimeout(this.dropElevationTimeout);\n            this.dropElevationTimeout = undefined;\n        }\n    }\n\n    private moveKitten(\n        list: KittenCard[],\n        fromIndex: number,\n        toIndex: number\n    ): KittenCard[] {\n        if (fromIndex === toIndex) {\n            return list;\n        }\n\n        const updated = [...list];\n        const [moved] = updated.splice(fromIndex, 1);\n\n        if (!moved) {\n            return list;\n        }\n\n        updated.splice(toIndex, 0, moved);\n        return updated;\n    }\n\n    public disconnectedCallback() {\n        this.teardownSortable();\n    }\n}\n"],"mappings":"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"}