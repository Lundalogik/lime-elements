import{r as e,h as t,H as i}from"./index-DBTJNfo7.js";const s=class{constructor(t){e(this,t),this.value="Copy an image file and paste it here.",this.uploadImageFails=!1,this.metadata={links:[],images:[]},this.handleFailedThumbnailChange=e=>{this.uploadImageFails=e.detail},this.handleChange=e=>{this.value=e.detail},this.handleImagePasted=async e=>{const t=e.detail;t.insertThumbnail();const i=await this.uploadImage(t.fileInfo);i?t.insertImage(i):t.insertFailedThumbnail()},this.uploadImage=async e=>{try{return await new Promise(((e,t)=>{setTimeout((()=>{this.uploadImageFails?t("Server error"):e("https://cdn.lime-crm.com/mail-addin-logo.png")}),2e3)}))}catch(t){console.error(`Failed to upload image ${e.filename}: ${t}`)}},this.handleMetadataChange=e=>{const t=this.getRemovedImages(this.metadata,e.detail);for(const e of t)"success"===e.state&&this.removeImage(e);this.metadata=e.detail}}render(){return t(i,{key:"ed1f03e8dde6720584ef36f6f0e7c2f80062897e"},t("limel-text-editor",{key:"666928b16a524835928be83ae835ec9b327b3729",value:this.value,onChange:this.handleChange,onImagePasted:this.handleImagePasted,onMetadataChange:this.handleMetadataChange}),t("limel-checkbox",{key:"0f6b154109c933396d1cebfde14969c3f6a4d3c9",label:"Upload image fails - insert failed thumbnail",onChange:this.handleFailedThumbnailChange}),t("limel-example-value",{key:"c841a6cd699a566d3f9d8cabe4258d7c1f2d3bfe",label:"Value",value:this.value}))}getRemovedImages(e,t){const i=new Set(t.images.map((e=>e.fileInfoId)));return e.images.filter((e=>!i.has(e.fileInfoId)))}removeImage(e){console.log(`Image removed: ${e.fileInfoId}`)}};export{s as limel_example_text_editor_with_inline_images_file_storage}