import{r as t,h as e,a as i}from"./index-DBTJNfo7.js";import{a as s,A as a,b as l,E as h,T as o}from"./keycodes-DnYyy-Oi.js";const n=class{constructor(i){t(this,i),this.value="",this.triggerState="",this.tagValue="",this.isPickerOpen=!1,this.insertMode="text",this.contentType="markdown",this.items=[{text:"Wolverine",value:1,icon:"wolf",selected:!0},{text:"Captain America",value:2,icon:"captain_america"},{text:"Superman",value:3,icon:"superman"},{text:"Tony Stark",value:4,icon:"iron_man"},{text:"Batman",value:5,icon:"batman_old"}],this.insertModeButtons=[{id:"1",title:"text",selected:!0},{id:"2",title:"chip"},{id:"3",title:"html"}],this.contentTypeButtons=[{id:"1",title:"markdown",selected:!0},{id:"2",title:"html"}],this.handleKeyPress=t=>{var e;if([s,a,l,h,o].includes(t.key)&&(t.stopPropagation(),t.preventDefault()),t.key!==l&&t.key!==a||this.moveSelection(t.key),t.key===h||t.key===o){const t=this.visibleItems.find((t=>t.selected));t&&this.insertItem(t)}t.key===s&&(this.isPickerOpen=!1,null===(e=this.triggerFunction)||void 0===e||e.stopTrigger())},this.moveSelection=t=>{const e=t===l?1:-1,i=this.visibleItems.length,s=(this.visibleItems.findIndex((t=>t.selected))+e+i)%i;this.removeAllSelections(),this.setSelection(s)},this.removeAllSelections=()=>{this.items=this.items.map((t=>(t.selected=!1,Object.assign({},t))))},this.setSelection=t=>{let e;this.visibleItems=this.visibleItems.map(((i,s)=>{const a=s===t;return a&&(e=i.value),Object.assign(Object.assign({},i),{selected:a})})),e&&(this.items[e-1].selected=!0)},this.renderPicker=()=>e("limel-popover",{open:this.isPickerOpen,openDirection:"top-start",onClose:this.handleTriggerStop},this.renderList(this.visibleItems)),this.renderList=t=>0===t.length?e("div",{style:{padding:"0.5rem"}},"Couldn't find. Not a hero yet! ðŸ¥²"):e("limel-menu-list",{items:t,onInteract:this.handleListInteraction}),this.handleTriggerStart=t=>{this.triggerState="start",this.isPickerOpen=!0,this.triggerFunction=t.detail.textEditor},this.handleTriggerStop=()=>{this.triggerState="stop",this.tagValue="",this.isPickerOpen=!1},this.handleTriggerChange=t=>{this.tagValue=t.detail.value.toLowerCase()},this.handleChange=t=>{this.value=t.detail},this.handleListInteraction=t=>{this.insertItem(t.detail)},this.handleInsertModeChange=t=>{this.insertMode=t.detail.title},this.handleContentTypeChange=t=>{this.contentType=t.detail.title,this.value=""},this.insertItem=t=>{this.removeAllSelections(),this.visibleItems=this.items,"html"!==this.insertMode?this.triggerFunction.insert("text"!==this.insertMode?{node:{tagName:"limel-chip",attributes:{icon:t.icon,text:t.text}},children:["I'm a teapot"]}:"@"+t.text):this.triggerFunction.insertHtml(`<strong>${t.text}</strong>`).then((()=>console.log("HTML inserted successfully"))).catch((t=>console.error("Error inserting HTML:",t)))}}watchOpen(){this.setupEventHandlers()}watchTagValue(){this.isPickerOpen&&(this.visibleItems=this.items.filter((t=>t.text.toLowerCase().includes(this.tagValue))))}componentWillLoad(){this.visibleItems=this.items,this.setupEventHandlers()}setupEventHandlers(){this.isPickerOpen?this.host.addEventListener("keydown",this.handleKeyPress,{capture:!0}):this.host.removeEventListener("keydown",this.handleKeyPress,{capture:!0})}render(){return[e("limel-example-controls",{key:"ec57c284f545a458aa777d419d6de30112903b7d"},e("label",{key:"5e129bb0bbb5c63100368fcf470f695cbc9c5c86"},"contentType:",e("limel-button-group",{key:"0454d59b8ff44dbf8697c114f07a4db8d167dda5",class:"mode",value:this.contentTypeButtons,onChange:this.handleContentTypeChange}))),this.renderPicker(),e("limel-text-editor",{style:{display:"block"},value:this.value,customElements:[{tagName:"limel-chip",attributes:["text","icon"]}],triggers:["@"],onTriggerStart:this.handleTriggerStart,onTriggerStop:this.handleTriggerStop,onTriggerChange:this.handleTriggerChange,onChange:this.handleChange,contentType:this.contentType,key:this.contentType}),e("limel-example-controls",{key:"f5f42d46c384faadf019a8025fb5178da110f8d7"},e("label",{key:"1f735ad1073e61aa92c0cd8b3d2284e48f881fbe"},"Insert mode:",e("limel-button-group",{key:"b6cc44f538971041dfa08ee9c1937dcc2abfa523",class:"mode",value:this.insertModeButtons,onChange:this.handleInsertModeChange})),e("div",{key:"ebf6e9c499bc51f714fbb5d847406dcdf3abe8d8",class:"value"},e("limel-example-value",{key:"3d53e83f19a618873d21472f6257b5b064469f82",label:"Action",value:this.triggerState}),e("limel-example-value",{key:"b9f5d3e39b0eed3f7c0d8ec450a359bbf0dc0476",label:"Tag value",value:this.tagValue}))),e("limel-example-value",{key:"a88d4d8aaed859cff6e1b88cb25207ab21a12ca9",value:this.value})]}get host(){return i(this)}static get watchers(){return{isPickerOpen:[{watchOpen:0}],tagValue:[{watchTagValue:0}]}}};n.style="limel-button-group{min-width:8rem}limel-example-controls{display:flex;flex-wrap:wrap}.mode{display:flex;flex-wrap:nowrap}.value{display:flex;gap:0.5rem}limel-portal{width:auto}";export{n as limel_example_text_editor_triggers}