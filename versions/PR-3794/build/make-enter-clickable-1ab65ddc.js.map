{"version":3,"names":["eventHandlers","WeakMap","EnterClickable","constructor","element","this","isActive","hasJustReleasedEnter","handleKeyDown","event","key","repeat","handleKeyUp","handleBlur","handleClick","stopImmediatePropagation","callbacks","keydownHandler","bind","keyupHandler","blurHandler","clickHandler","enable","addEventListener","disable","removeEventListener","makeEnterClickable","has","enterClickable","set","removeEnterClickable","get","delete"],"sources":["./src/util/make-enter-clickable.ts"],"sourcesContent":["const eventHandlers: WeakMap<HTMLElement, EnterClickable> = new WeakMap();\n\nclass EnterClickable {\n    private isActive = false;\n    private hasJustReleasedEnter = true;\n\n    constructor(private element: HTMLElement) {}\n\n    private handleKeyDown = (event: KeyboardEvent) => {\n        if (event.key === 'Enter' && !this.isActive && !event.repeat) {\n            this.isActive = true;\n        }\n    };\n\n    private handleKeyUp = (event: KeyboardEvent) => {\n        if (event.key === 'Enter' && this.isActive) {\n            this.isActive = false;\n            this.hasJustReleasedEnter = true;\n        }\n    };\n\n    private handleBlur = () => {\n        this.isActive = false;\n        this.hasJustReleasedEnter = true;\n    };\n\n    private handleClick = (event: MouseEvent) => {\n        if (!this.isActive) {\n            return;\n        }\n\n        if (this.hasJustReleasedEnter) {\n            this.hasJustReleasedEnter = false;\n\n            return;\n        }\n\n        event.stopImmediatePropagation();\n    };\n\n    private callbacks: CallBacks = {\n        keydownHandler: this.handleKeyDown.bind(this),\n        keyupHandler: this.handleKeyUp.bind(this),\n        blurHandler: this.handleBlur.bind(this),\n        clickHandler: this.handleClick.bind(this),\n    };\n\n    public enable() {\n        this.element.addEventListener('keydown', this.callbacks.keydownHandler);\n        this.element.addEventListener('keyup', this.callbacks.keyupHandler);\n        this.element.addEventListener('blur', this.callbacks.blurHandler);\n        this.element.addEventListener(\n            'click',\n            this.callbacks.clickHandler,\n            true\n        );\n    }\n\n    public disable() {\n        this.element.removeEventListener(\n            'keydown',\n            this.callbacks.keydownHandler\n        );\n        this.element.removeEventListener('keyup', this.callbacks.keyupHandler);\n        this.element.removeEventListener('blur', this.callbacks.blurHandler);\n        this.element.removeEventListener(\n            'click',\n            this.callbacks.clickHandler,\n            true\n        );\n    }\n}\n\n/**\n * Overrides the default browser behavior for clickable elements.\n * When focused and pressing down Enter, avoids calling onClick repeatedly.\n *\n * **Accessibility Context:**\n * Per WCAG 2.1 guidelines, keyboard users must be able to activate buttons and\n * clickable elements using both Enter and Space keys. Browsers natively support\n * both keys on button elements, allowing keyboard-only users full access to\n * interactive controls.\n *\n * **Why only Enter, not Space?**\n * - Enter key: Fires click events repeatedly while held down (browser bug/quirk)\n * - Space key: Fires click only once on keyup (correct behavior)\n *\n * This utility only fixes the problematic Enter key behavior. Space key\n * works correctly by default and doesn't need intervention.\n *\n * @param element - The clickable element\n */\nexport function makeEnterClickable(element: HTMLElement) {\n    if (!eventHandlers.has(element)) {\n        const enterClickable = new EnterClickable(element);\n        enterClickable.enable();\n        eventHandlers.set(element, enterClickable);\n    }\n}\n\n/**\n * Removes the keyboard-enter click override behavior from an element.\n * Call this during teardown (e.g. `disconnectedCallback`) to avoid leaking\n * event listeners.\n *\n * @param element - The clickable element\n */\nexport function removeEnterClickable(element: HTMLElement) {\n    const enterClickable: EnterClickable = eventHandlers.get(element);\n    if (enterClickable) {\n        enterClickable.disable();\n        eventHandlers.delete(element);\n    }\n}\n\ninterface CallBacks {\n    keydownHandler: (arg: KeyboardEvent) => void;\n    keyupHandler: (arg: KeyboardEvent) => void;\n    blurHandler: () => void;\n    clickHandler: (arg: MouseEvent) => void;\n}\n"],"mappings":"AAAA,MAAMA,EAAsD,IAAIC,QAEhE,MAAMC,EAIFC,YAAoBC,GAAAC,KAAAD,UAHZC,KAAAC,SAAW,MACXD,KAAAE,qBAAuB,KAIvBF,KAAAG,cAAiBC,IACrB,GAAIA,EAAMC,MAAQ,UAAYL,KAAKC,WAAaG,EAAME,OAAQ,CAC1DN,KAAKC,SAAW,I,GAIhBD,KAAAO,YAAeH,IACnB,GAAIA,EAAMC,MAAQ,SAAWL,KAAKC,SAAU,CACxCD,KAAKC,SAAW,MAChBD,KAAKE,qBAAuB,I,GAI5BF,KAAAQ,WAAa,KACjBR,KAAKC,SAAW,MAChBD,KAAKE,qBAAuB,IAAI,EAG5BF,KAAAS,YAAeL,IACnB,IAAKJ,KAAKC,SAAU,CAChB,M,CAGJ,GAAID,KAAKE,qBAAsB,CAC3BF,KAAKE,qBAAuB,MAE5B,M,CAGJE,EAAMM,0BAA0B,EAG5BV,KAAAW,UAAuB,CAC3BC,eAAgBZ,KAAKG,cAAcU,KAAKb,MACxCc,aAAcd,KAAKO,YAAYM,KAAKb,MACpCe,YAAaf,KAAKQ,WAAWK,KAAKb,MAClCgB,aAAchB,KAAKS,YAAYI,KAAKb,M,CAGjCiB,SACHjB,KAAKD,QAAQmB,iBAAiB,UAAWlB,KAAKW,UAAUC,gBACxDZ,KAAKD,QAAQmB,iBAAiB,QAASlB,KAAKW,UAAUG,cACtDd,KAAKD,QAAQmB,iBAAiB,OAAQlB,KAAKW,UAAUI,aACrDf,KAAKD,QAAQmB,iBACT,QACAlB,KAAKW,UAAUK,aACf,K,CAIDG,UACHnB,KAAKD,QAAQqB,oBACT,UACApB,KAAKW,UAAUC,gBAEnBZ,KAAKD,QAAQqB,oBAAoB,QAASpB,KAAKW,UAAUG,cACzDd,KAAKD,QAAQqB,oBAAoB,OAAQpB,KAAKW,UAAUI,aACxDf,KAAKD,QAAQqB,oBACT,QACApB,KAAKW,UAAUK,aACf,K,WAwBIK,EAAmBtB,GAC/B,IAAKJ,EAAc2B,IAAIvB,GAAU,CAC7B,MAAMwB,EAAiB,IAAI1B,EAAeE,GAC1CwB,EAAeN,SACftB,EAAc6B,IAAIzB,EAASwB,E,CAEnC,C,SASgBE,EAAqB1B,GACjC,MAAMwB,EAAiC5B,EAAc+B,IAAI3B,GACzD,GAAIwB,EAAgB,CAChBA,EAAeJ,UACfxB,EAAcgC,OAAO5B,E,CAE7B,Q"}